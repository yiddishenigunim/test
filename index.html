<!DOCTYPE html>
<html lang="yi" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>××•×¦×¨ ×”× ×™×’×•× ×™×</title>
    <link rel="icon"
        href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext x='50' y='80' font-size='80' text-anchor='middle'%3Eâ™ª%3C/text%3E%3C/svg%3E">
    <link
        href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700;800&family=Rubik:wght@300;400;500;600;700&family=David+Libre:wght@400;500;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="css/utilities.css">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- Header -->
    <header class="main-header">
        <div class="header-main">
            <a class="logo" href="#/home">
                <div class="logo-icon">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z" />
                    </svg>
                </div>
                <div class="logo-text">
                    <span class="logo-word-1">××•×¦×¨</span>
                    <span class="logo-word-2">×”× ×™×’×•× ×™×</span>
                </div>
            </a>

            <!-- Removed nav wrapper, elements are now direct children for better centering -->
            <div class="main-nav">
                <!-- × ×™×’×•× ×™× - Standalone (no children) -->
                <a class="nav-btn nav-nigunim" href="#/nigunim">× ×™×’×•× ×™×</a>

                <!-- ××—×‘×¨×™× - with children: ××—×‘×¨×™×, ×—×¦×¨×•×ª -->
                <div class="nav-dropdown">
                    <a class="nav-dropdown-btn theme-mechaber" href="#/mechabrim">
                        ××—×‘×¨×™×
                        <span class="nav-arrow">â–¾</span>
                    </a>
                    <div class="nav-dropdown-content">
                        <div class="dropdown-inner">
                            <a class="nav-dropdown-item" data-dest="mechabrim" href="#/mechabrim">
                                <span>××—×‘×¨×™×</span>
                            </a>
                            <a class="nav-dropdown-item" data-dest="chatzeros" href="#/chatzeros">
                                <span>×—×¦×¨×•×ª</span>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- ×•×•×¢×¨×˜×¢×¨ - with children: ×•×•×¢×¨×˜×¢×¨, ×¨×™×˜×¢× -->
                <div class="nav-dropdown">
                    <a class="nav-dropdown-btn theme-verter" href="#/verter">
                        ×•×•×¢×¨×˜×¢×¨
                        <span class="nav-arrow">â–¾</span>
                    </a>
                    <div class="nav-dropdown-content">
                        <div class="dropdown-inner">
                            <a class="nav-dropdown-item" data-dest="verter" href="#/verter">
                                <span>×•×•×¢×¨×˜×¢×¨</span>
                            </a>
                            <a class="nav-dropdown-item" data-dest="music" href="#/music">
                                <span>×¨×™×˜×¢×</span>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- ×–×× ×™× - with children: ××•×¢×“×™× ×•×–×× ×™×, ×§××œ×¢×§×©×× ×¡, ×¤×™×•×˜×™× -->
                <div class="nav-dropdown">
                    <a class="nav-dropdown-btn theme-zman" href="#/zmanim">
                        ×–×× ×™×
                        <span class="nav-arrow">â–¾</span>
                    </a>
                    <div class="nav-dropdown-content">
                        <div class="dropdown-inner">
                            <a class="nav-dropdown-item" data-dest="zmanim" href="#/zmanim">
                                <span>××•×¢×“×™× ×•×–×× ×™×</span>
                            </a>
                            <a class="nav-dropdown-item" data-dest="collections" href="#/collections">
                                <span>×§××œ×¢×§×©×× ×¡</span>
                            </a>
                            <a class="nav-dropdown-item" data-dest="piyutim" href="#/piyutim">
                                <span>×¤×™×•×˜×™×</span>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Divider -->
                <div class="nav-divider"></div>

                <style>
                    .nav-divider {
                        width: 4px;
                        height: 4px;
                        background: var(--gradient-main);
                        margin: 0 6px;
                        opacity: 0.6;
                        border-radius: 50%;
                    }
                </style>

                <!-- ×“××§×•××¢× ×˜××¦×™×¢ - with children: ×¨×¢×¡×•×¨×¡×Ÿ, ××¨×›×™×•×•×Ÿ, ××œ×‘×•××¡ -->
                <div class="nav-dropdown">
                    <a class="nav-dropdown-btn theme-document" href="#/resources">
                        ×“××§×•××¢× ×˜××¦×™×¢
                        <span class="nav-arrow">â–¾</span>
                    </a>
                    <div class="nav-dropdown-content">
                        <div class="dropdown-inner">
                            <a class="nav-dropdown-item" data-dest="resources" href="#/resources">
                                <span>×¨×¢×¡×•×¨×¡×Ÿ</span>
                            </a>
                            <a class="nav-dropdown-item" data-dest="documents" href="#/documents">
                                <span>××¨×›×™×•×•×Ÿ</span>
                            </a>
                            <a class="nav-dropdown-item" data-dest="albums" href="#/albums">
                                <span>××œ×‘×•××¡</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right side buttons wrapper - matches logo width on left -->
            <div class="header-right-buttons">
                <!-- Combined Search + Add Button -->
                <div class="header-combo-btn">
                    <button class="combo-search" onclick="openSearchModal()">
                        <svg class="combo-search-icon" viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" />
                        </svg>
                        <span class="combo-search-text">×–×•×š</span>
                    </button>
                    <a href="#/contribute" class="combo-add">
                        <span class="combo-add-icon">+</span>
                        <span class="combo-add-text">×œ×™×™×’ ×¦×•</span>
                    </a>
                </div>

                <!-- Streaming Button - ball with blinking dot, expands on hover -->
                <a href="https://stream.oitzerhanigunim.org/" target="_blank" class="stream-ball-btn">
                    <span class="stream-dot"></span>
                    <span class="stream-text-new">×¡×˜×¨×™××™× ×’</span>
                </a>
            </div>
        </div>

        <style>
            /* Sticky header with hide on scroll down, show on scroll up */
            .main-header {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                z-index: 1000;
                transition: transform 0.4s ease, opacity 0.4s ease;
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.85) 0%, rgba(248, 250, 252, 0.85) 100%);
                backdrop-filter: blur(16px);
                -webkit-backdrop-filter: blur(16px);
            }

            .main-header.header-hidden {
                transform: translateY(-100%);
                opacity: 0;
            }

            /* Main content - offset for fixed header */
            .main-content {
                padding-top: 80px;
            }

            .header-main {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 30px;
                width: 100%;
                max-width: 1400px;
                margin: 0 auto;
                padding: 12px 30px;
                position: relative;
            }

            .logo {
                position: absolute;
                right: 30px;
                top: 50%;
                transform: translateY(-50%);
            }

            .main-nav {
                margin: 0;
                /* Reset margins */
            }

            .global-search-btn {
                margin-right: 0;
            }

            .header-right-buttons {
                position: absolute;
                left: 20px;
                top: 50%;
                transform: translateY(-50%);
                display: flex;
                align-items: center;
                gap: 10px;
                z-index: 10;
            }

            /* Combined Search + Add Button */
            .header-combo-btn {
                display: flex;
                align-items: stretch;
                background: var(--gradient-main);
                border-radius: 25px;
                overflow: hidden;
                box-shadow: 0 2px 12px rgba(139, 92, 246, 0.3);
                height: 40px;
                gap: 3px;
                padding: 3px;
            }

            .combo-search {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 6px;
                padding: 0 16px;
                background: rgba(255, 255, 255, 0.15);
                border: none;
                border-radius: 22px;
                cursor: pointer;
                font-family: inherit;
                font-size: 0.95em;
                font-weight: 600;
                color: white;
                transition: all 0.4s ease;
                flex: 3;
                min-width: 60px;
            }

            .combo-search-icon {
                width: 16px;
                height: 16px;
                fill: white;
                opacity: 0;
                max-width: 0;
                transition: all 0.4s ease;
            }

            .combo-search-text {
                transition: all 0.4s ease;
            }

            .combo-add {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 6px;
                padding: 0 12px;
                background: rgba(255, 255, 255, 0.15);
                border: none;
                border-radius: 22px;
                cursor: pointer;
                text-decoration: none;
                font-family: inherit;
                font-size: 0.95em;
                font-weight: 600;
                color: white;
                transition: all 0.4s ease;
                flex: 1;
                min-width: 36px;
            }

            .combo-add-icon {
                font-size: 1.3em;
                font-weight: 700;
                color: white;
                transition: all 0.4s ease;
            }

            .combo-add-text {
                color: white;
                opacity: 0;
                max-width: 0;
                overflow: hidden;
                white-space: nowrap;
                transition: all 0.4s ease;
            }

            /* Hover on Search - expands to show icon */
            .header-combo-btn:hover .combo-search:hover {
                flex: 10;
                background: rgba(255, 255, 255, 0.25);
            }

            .header-combo-btn:hover .combo-search:hover .combo-search-icon {
                opacity: 1;
                max-width: 20px;
            }

            .header-combo-btn:hover .combo-search:hover~.combo-add {
                flex: 0;
                padding: 0;
                min-width: 0;
                opacity: 0;
            }

            /* Hover on Add - expands to show text */
            .header-combo-btn:hover .combo-add:hover {
                flex: 10;
                padding: 0 16px;
                background: rgba(255, 255, 255, 0.25);
            }

            .header-combo-btn:hover .combo-add:hover .combo-add-text {
                opacity: 1;
                max-width: 80px;
            }

            .header-combo-btn:has(.combo-add:hover) .combo-search {
                flex: 0;
                padding: 0;
                min-width: 0;
                opacity: 0;
            }

            /* Logo hover effect with fade both ways */
            .logo {
                transition: all 0.4s ease;
            }

            .logo-icon,
            .logo-text {
                transition: filter 0.4s ease, transform 0.4s ease;
            }

            .logo:hover {
                transform: scale(1.05);
            }

            .logo:hover .logo-icon {
                filter: drop-shadow(0 4px 12px rgba(156, 91, 181, 0.4));
            }

            .logo:hover .logo-text {
                filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.15));
            }

            /* Search button styled like logo */
            .global-search-btn {
                display: flex;
                align-items: center;
                gap: 8px;
                background: transparent;
                border: none;
                cursor: pointer;
                padding: 0;
                transition: all 0.4s ease;
            }

            .search-icon {
                width: 32px;
                height: 32px;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .search-icon svg {
                width: 100%;
                height: 100%;
                fill: url(#search-gradient);
            }

            .search-text {
                font-size: 1.1em;
                font-weight: 700;
                background: var(--gradient-main);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }

            .global-search-btn:hover {
                opacity: 0.8;
            }
        </style>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content" id="mainContent">
        <!-- Content will be rendered by JavaScript -->
    </main>

    <!-- Search Modal -->
    <div class="search-modal-overlay" id="searchModalOverlay" onclick="closeSearchModal()">
        <div class="search-modal" onclick="event.stopPropagation()">
            <div class="search-modal-header">
                <h3>ğŸ” ×–×•×›×˜ ××™×Ÿ ××•×¦×¨ ×”× ×™×’×•× ×™×</h3>
                <button class="search-modal-close" onclick="closeSearchModal()">Ã—</button>
            </div>
            <div class="search-modal-body">
                <input type="text" id="searchModalInput" class="search-modal-input"
                    placeholder="×–×•×›×˜ × × ×™×’×•×Ÿ, ××—×‘×¨, ×—×¦×¨..."
                    onkeydown="if(event.key==='Enter') executeSearchFromModal()">
                <button class="search-modal-btn" onclick="executeSearchFromModal()">×–×•×š</button>
            </div>
        </div>
    </div>

    <!-- Player Show Button (when minimized) -->
    <button class="player-show-btn" id="playerShowBtn" onclick="showPlayerBanner()">
        <span id="showBtnSongName">×•×•×™×™×– ×¤×œ×¢×™×¢×¨</span>
        <div class="equalizer-icon">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
        </div>
    </button>

    <!-- Player -->
    <div class="player-section">
        <button class="player-hide-btn" onclick="hidePlayerBanner()" title="×‘××”××œ×˜ ×¤×œ×¢×™×¢×¨">âˆ’</button>
        <div class="player-inner">
            <div class="player-info">
                <div class="player-song-name" id="playerSongName">×§×œ×™×§ ××•×™×£ × × ×™×’×•×Ÿ ×¦×• ×©×¤×™×œ×Ÿ</div>
                <div class="player-song-meta" id="playerSongMeta"></div>
            </div>
            <div class="player-controls">
                <button class="player-btn" onclick="playPrevious()" title="×¤×¨×™×¢×¨×“×™×’×¢"><svg viewBox="0 0 24 24"
                        fill="currentColor" width="18" height="18">
                        <path d="M6 6h2v12H6V6zm3.5 6l8.5 6V6l-8.5 6z" />
                    </svg></button>
                <button class="player-btn main" id="playPauseBtn" onclick="togglePlayPause()">
                    <span class="player-play-icon"><svg viewBox="0 0 24 24" fill="currentColor" width="22" height="22">
                            <path d="M8 5v14l11-7L8 5z" />
                        </svg></span>
                    <span class="player-pause-icon"><svg viewBox="0 0 24 24" fill="currentColor" width="22" height="22">
                            <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" />
                        </svg></span>
                </button>
                <button class="player-btn" onclick="playNext()" title="×§×•××¢× ×“×™×’×¢"><svg viewBox="0 0 24 24"
                        fill="currentColor" width="18" height="18">
                        <path d="M6 18l8.5-6L6 6v12zm2 0V6l6.5 6L8 18zM16 6v12h2V6h-2z" />
                    </svg></button>
            </div>
            <div class="player-progress">
                <div class="progress-bar-container" onclick="seekTo(event)">
                    <div class="progress-bar" id="progressBar"></div>
                </div>
                <div class="time-display">
                    <span id="currentTime">0:00</span>
                    <span id="duration">0:00</span>
                </div>
            </div>
            <div class="player-extra">
                <div class="player-extra-line" id="playerCollection"></div>
                <div class="player-extra-line" id="playerGezungen"></div>
            </div>
            <div class="player-rating" id="playerRating" title="××•×“×™××• ×§×•×•××œ×™×˜×¢×˜" style="display: none;">
                <span class="player-rating-stars" id="playerRatingStars"></span>
            </div>
        </div>
        <audio id="audioPlayer"></audio>
    </div>

    <!-- Hover Tooltip -->
    <div class="hover-tooltip" id="hoverTooltip">
        <div class="hover-tooltip-type" id="tooltipType">×—×¦×¨</div>
        <div class="hover-tooltip-header">
            <img class="hover-tooltip-image" id="tooltipImage" src="" alt="" style="display: none;">
            <div class="hover-tooltip-title-area">
                <div class="hover-tooltip-title" id="tooltipTitle">×˜×™×™×˜×œ</div>
                <div class="hover-tooltip-subtitle" id="tooltipSubtitle"></div>
            </div>
        </div>
        <div class="hover-tooltip-stats" id="tooltipStats"></div>
    </div>

    <!-- Song Details Modal -->
    <div class="modal" id="songModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">×“×¢×˜××œ×Ÿ</h2>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body" id="modalBody"></div>
        </div>
    </div>

    <!-- Nigun Modal Overlay (Lightbox) -->
    <div class="nigun-modal-overlay" id="nigunModalOverlay" onclick="if(event.target === this) closeNigunModal()">
        <div class="nigun-modal-content">
            <button class="nigun-modal-close" onclick="event.stopPropagation(); closeNigunModal()">Ã—</button>
            <div id="nigunModalBody"></div>
        </div>
    </div>

    <!-- PDF Popup -->
    <div class="pdf-popup-overlay" id="pdfPopup" onclick="closePdfPopup(event)">
        <div class="pdf-popup" onclick="event.stopPropagation()">
            <div class="pdf-popup-header">
                <div class="pdf-popup-title" id="pdfPopupTitle">×“××§×•××¢× ×˜</div>
                <button class="pdf-popup-close" onclick="closePdfPopup()">&times;</button>
            </div>
            <div class="pdf-popup-body">
                <iframe id="pdfPopupFrame" src=""></iframe>
            </div>
            <div class="pdf-popup-footer">
                <a id="pdfDownloadLink" href="" target="_blank" class="pdf-download-btn">
                    ×“××•× ×œ××•×“ PDF
                </a>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>

</html>
