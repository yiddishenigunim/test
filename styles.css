:root {
    --primary-deep: #4a1259;
    --primary: #7b1fa2;
    --primary-light: #ae52d4;
    --primary-pale: #f3e5f5;
    --accent-gold: #d4af37;
    --accent-warm: #ff6f61;
    --bg-cream: #faf8f5;
    --text-dark: #2c2c2c;
    --text-muted: #666;
    --text-secondary: #888;
    --card-shadow: 0 4px 24px rgba(74, 18, 89, 0.12);
    --card-hover-shadow: 0 12px 40px rgba(74, 18, 89, 0.2);
    --transition-smooth: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);

    /* Category Colors */
    /* חצרות - Purple */
    --color-chatzer: #9c5bb5;
    --color-chatzer-light: #c48fd7;
    --color-chatzer-dark: #7b3f96;
    --color-chatzer-pale: #f3e5f5;

    /* מחברים - Magenta/Pink */
    --color-mechaber: #c435a8;
    --color-mechaber-light: #e066c7;
    --color-mechaber-dark: #9c1b82;
    --color-mechaber-pale: #fce4ec;

    /* ווערטער - Gray */
    --color-verter: #6b7280;
    --color-verter-light: #9ca3af;
    --color-verter-dark: #4b5563;
    --color-verter-pale: #f3f4f6;

    /* זמנים/מועדים - Orange */
    --color-zman: #e96a1b;
    --color-zman-light: #ff8c42;
    --color-zman-dark: #c54e00;
    --color-zman-pale: #fff3e0;

    /* קאלעקשאנס - Red */
    --color-collection: #c62828;
    --color-collection-light: #ef5350;
    --color-collection-dark: #8e0000;
    --color-collection-pale: #ffebee;

    /* פיוטים - Green */
    --color-piyut: #2e8b2e;
    --color-piyut-light: #81c784;
    --color-piyut-dark: #1b5e20;
    --color-piyut-pale: #e8f5e9;

    /* ניגונים - Blue */
    --color-nigun: #4a7cc9;
    --color-nigun-light: #7aa3e0;
    --color-nigun-dark: #2d5aa0;
    --color-nigun-pale: #e3f2fd;

    /* מוזיק/ריטעם - Gold/Yellow */
    --color-music: #d4ac12;
    --color-music-light: #f0c040;
    --color-music-dark: #b8960c;
    --color-music-pale: #fff8e1;

    /* רעסורסן - Light Blue/Cyan */
    --color-resource: #5bc0de;
    --color-resource-light: #8cd4eb;
    --color-resource-dark: #31a5c7;
    --color-resource-pale: #e0f7fa;

    /* דאקומענטן - Teal/Cyan */
    --color-document: #00a0b0;
    --color-document-light: #4dd0e1;
    --color-document-dark: #007c8a;
    --color-document-pale: #e0f7fa;

    /* אלבומס - Teal */
    --color-album: #00838f;
    --color-album-light: #4fb3bf;
    --color-album-dark: #005662;
    --color-album-pale: #e0f7fa;

    /* ארכיוון - Teal (same as albums) */
    --color-archive: #00838f;

    /* גרעידיענט טהעמע - Home/General - combining ניגונים, מחברים, חצרות */
    --gradient-main: linear-gradient(135deg, var(--color-nigun) 0%, var(--color-chatzer) 50%, var(--color-mechaber) 100%);
    --gradient-main-reverse: linear-gradient(135deg, var(--color-mechaber) 0%, var(--color-chatzer) 50%, var(--color-nigun) 100%);
    --gradient-main-vertical: linear-gradient(180deg, var(--color-nigun) 0%, var(--color-chatzer) 50%, var(--color-mechaber) 100%);
    --gradient-main-soft: linear-gradient(135deg, var(--color-nigun-light) 0%, var(--color-chatzer-light) 50%, var(--color-mechaber-light) 100%);
    --gradient-main-pale: linear-gradient(135deg, var(--color-nigun-pale) 0%, var(--color-chatzer-pale) 50%, var(--color-mechaber-pale) 100%);
    --gradient-main-dark: linear-gradient(135deg, var(--color-nigun-dark) 0%, var(--color-chatzer-dark) 50%, var(--color-mechaber-dark) 100%);
    /* Combined pale color for home page background */
    --color-home-pale: color-mix(in srgb, var(--color-nigun-pale) 33%, color-mix(in srgb, var(--color-chatzer-pale) 50%, var(--color-mechaber-pale)));
}

/* Full page background color */
html {
    background: #f8fafc;
}

/* Loading wave bar animation */
.loading-wave-bar {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: transparent;
    overflow: hidden;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.loading-wave-bar.active {
    opacity: 1;
}

.loading-wave-bar::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg,
            transparent 0%,
            var(--color-nigun-light) 25%,
            var(--color-nigun) 50%,
            var(--color-nigun-light) 75%,
            transparent 100%);
    animation: loadingWave 1.5s infinite ease-in-out;
}

@keyframes loadingWave {
    0% {
        left: -100%;
    }

    100% {
        left: 100%;
    }
}

.page-title-content {
    position: relative;
}

/* Musical notes loader animation */
/* --- LOADER TINY CSS --- */
.loader-tiny {
    position: relative;
    width: 40px;
    height: 20px;
    display: inline-block;
    margin-left: 8px;
    vertical-align: middle;
    overflow: visible;
}

.loader-tiny .note {
    position: absolute;
    bottom: 0;
    color: var(--color-nigun);
    font-size: 11px;
    opacity: 0;
    will-change: transform, opacity;
}

/* Note 1 */
.loader-tiny .note.n1 {
    left: 15%;
    animation: floatTinyLeft 2.8s infinite ease-out;
}

/* Note 2 */
.loader-tiny .note.n2 {
    left: 50%;
    animation: floatTinyRight 3.2s infinite ease-out;
    animation-delay: 1s;
}

/* Note 3 */
.loader-tiny .note.n3 {
    left: 85%;
    animation: floatTinyCenter 2.5s infinite ease-out;
    animation-delay: 2s;
}

@keyframes floatTinyLeft {
    0% {
        transform: translate(5px, 2px) rotate(-5deg) scale(0.8);
        opacity: 0;
    }

    20% {
        opacity: 1;
    }

    80% {
        opacity: 0.8;
    }

    100% {
        transform: translate(-10px, -20px) rotate(-10deg) scale(1.0);
        opacity: 0;
    }
}

@keyframes floatTinyRight {
    0% {
        transform: translate(-5px, 2px) rotate(5deg) scale(0.8);
        opacity: 0;
    }

    20% {
        opacity: 1;
    }

    80% {
        opacity: 0.8;
    }

    100% {
        transform: translate(10px, -20px) rotate(10deg) scale(1.0);
        opacity: 0;
    }
}

@keyframes floatTinyCenter {
    0% {
        transform: translate(0, 2px) rotate(0deg) scale(0.8);
        opacity: 0;
    }

    20% {
        opacity: 1;
    }

    80% {
        opacity: 0.8;
    }

    100% {
        transform: translate(2px, -20px) rotate(5deg) scale(1.0);
        opacity: 0;
    }
}

/* --- LOADER MEDIUM CSS --- */
.loader-medium {
    position: relative;
    width: 100px;
    height: 50px;
    display: inline-block;
}

.loader-medium .note {
    position: absolute;
    bottom: 0;
    color: var(--color-nigun);
    font-size: 30px;
    opacity: 0;
    will-change: transform, opacity;
}

.loader-medium .note.n1 {
    left: 15%;
    animation: floatMediumLeft 2.8s infinite ease-out;
}

.loader-medium .note.n2 {
    left: 50%;
    animation: floatMediumRight 3.2s infinite ease-out;
    animation-delay: 1s;
}

.loader-medium .note.n3 {
    left: 85%;
    animation: floatMediumCenter 2.5s infinite ease-out;
    animation-delay: 2s;
}

@keyframes floatMediumLeft {
    0% {
        transform: translate(10px, 5px) rotate(-5deg) scale(0.8);
        opacity: 0;
    }

    20% {
        opacity: 1;
    }

    80% {
        opacity: 0.8;
    }

    100% {
        transform: translate(-25px, -50px) rotate(-15deg) scale(1.1);
        opacity: 0;
    }
}

@keyframes floatMediumRight {
    0% {
        transform: translate(-10px, 5px) rotate(5deg) scale(0.8);
        opacity: 0;
    }

    20% {
        opacity: 1;
    }

    80% {
        opacity: 0.8;
    }

    100% {
        transform: translate(25px, -50px) rotate(15deg) scale(1.1);
        opacity: 0;
    }
}

@keyframes floatMediumCenter {
    0% {
        transform: translate(0, 5px) rotate(0deg) scale(0.8);
        opacity: 0;
    }

    20% {
        opacity: 1;
    }

    80% {
        opacity: 0.8;
    }

    100% {
        transform: translate(5px, -50px) rotate(5deg) scale(1.1);
        opacity: 0;
    }
}

/* Category-themed loading wave bars */.subtitle {
    transition: opacity 0.3s ease-out;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html {
    overflow-x: hidden;
}

body {
    font-family: 'Heebo', 'David Libre', sans-serif;
    background: transparent;
    min-height: 100vh;
    direction: rtl;
    color: var(--text-dark);
    padding-bottom: 140px;
    overflow-x: hidden;
}

/* Header */
.main-header {
    background: linear-gradient(135deg, rgba(248, 250, 252, 0.9) 0%, rgba(248, 250, 252, 0.85) 100%);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    position: sticky;
    top: 0;
    z-index: 100;
    border-bottom: 1px solid rgba(0, 0, 0, 0.08);
}

.header-main {
    max-width: 1200px;
    margin: 0 auto;
    padding: 15px 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px;
    position: relative;
}

.logo {
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
    text-decoration: none;
}

.logo-icon {
    width: 42px;
    height: 42px;
    background: var(--gradient-main);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 3px 12px rgba(74, 124, 201, 0.3);
}

.logo-icon svg {
    width: 24px;
    height: 24px;
    fill: white;
}

.logo-text {
    display: flex;
    flex-direction: column;
    line-height: 1.1;
}

.logo-text span {
    font-weight: 700;
    font-family: 'Heebo', sans-serif;
    background: var(--gradient-main);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.logo-text .logo-word-1 {
    font-size: 0.95em;
}

.logo-text .logo-word-2 {
    font-size: 1.1em;
}

.header-nav {
    display: flex;
    align-items: center;
    gap: 5px;
}

.global-search-btn {
    width: 40px;
    height: 40px;
    border: none;
    border-radius: 50%;
    background: var(--gradient-main);
    color: white;
    font-size: 1.2em;
    cursor: pointer;
    transition: var(--transition-smooth);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    margin-left: 15px;
}

.global-search-btn:hover {
    background: var(--gradient-main-dark);
    transform: scale(1.1);
}

/* Search Modal */
.search-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.6);
    display: none;
    align-items: flex-start;
    justify-content: center;
    padding-top: 15vh;
    z-index: 10000;
    backdrop-filter: blur(4px);
}

.search-modal-overlay.active {
    display: flex;
}

.search-modal {
    background: white;
    border-radius: 16px;
    width: 90%;
    max-width: 500px;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    animation: modalSlideIn 0.3s ease;
}

@keyframes modalSlideIn {
    from {
        opacity: 0;
        transform: translateY(-30px) scale(0.95);
    }

    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

.search-modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 24px;
    border-bottom: 1px solid #eee;
}

.search-modal-header h3 {
    margin: 0;
    font-size: 1.2em;
    background: var(--gradient-main);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.search-modal-close {
    width: 32px;
    height: 32px;
    border: none;
    background: #f0f0f0;
    border-radius: 50%;
    font-size: 1.4em;
    cursor: pointer;
    color: #666;
    transition: var(--transition-smooth);
}

.search-modal-close:hover {
    background: #e0e0e0;
    color: #333;
}

.search-modal-body {
    padding: 24px;
    display: flex;
    gap: 12px;
}

.search-modal-input {
    flex: 1;
    padding: 14px 18px;
    border: 2px solid #e0e0e0;
    border-radius: 10px;
    font-size: 1.1em;
    font-family: inherit;
    direction: rtl;
    transition: var(--transition-smooth);
}

.search-modal-input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 4px var(--primary-pale);
}

.search-modal-btn {
    padding: 14px 28px;
    background: var(--gradient-main);
    color: white;
    border: none;
    border-radius: 10px;
    font-size: 1.1em;
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition-smooth);
}

.search-modal-btn:hover {
    background: var(--gradient-main-dark);
    transform: translateY(-2px);
}

/* Nigun Modal Overlay */
.nigun-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.65);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    backdrop-filter: blur(6px);
    padding: 20px;
}

.nigun-modal-overlay.active {
    display: flex;
}

.nigun-modal {
    background: white;
    border-radius: 20px;
    width: 95%;
    max-width: 700px;
    max-height: 85vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    box-shadow: 0 25px 80px rgba(0, 0, 0, 0.4);
    animation: nigunModalIn 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.nigun-modal-overlay.closing .nigun-modal {
    animation: nigunModalOut 0.25s ease-out forwards;
}

@keyframes nigunModalIn {
    from {
        opacity: 0;
        transform: scale(0.85) translateY(30px);
    }

    to {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

@keyframes nigunModalOut {
    from {
        opacity: 1;
        transform: scale(1) translateY(0);
    }

    to {
        opacity: 0;
        transform: scale(0.9) translateY(20px);
    }
}

.nigun-modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 20px;
    border-bottom: 1px solid #eee;
    background: linear-gradient(135deg, var(--color-nigun-pale) 0%, white 100%);
    flex-shrink: 0;
}

.nigun-modal-header h2 {
    margin: 0;
    font-size: 1.3em;
    color: var(--color-nigun-dark);
    font-weight: 700;
}

.nigun-modal-close {
    width: 36px;
    height: 36px;
    border: none;
    background: white;
    border-radius: 50%;
    font-size: 1.5em;
    cursor: pointer;
    color: #666;
    transition: var(--transition-smooth);
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.nigun-modal-close:hover {
    background: var(--color-nigun);
    color: white;
    transform: scale(1.1);
}

.nigun-modal-body {
    flex: 1;
    overflow-y: auto;
    padding: 20px;
}

.nigun-modal-body .detail-page {
    padding: 0;
}

.nigun-modal-body .back-button {
    display: none;
}

.nigun-modal-body .detail-header {
    margin-bottom: 20px;
}

.nigun-modal-body .detail-category-bar {
    display: none;
}

@media (max-width: 600px) {
    .nigun-modal {
        max-height: 90vh;
        border-radius: 16px;
    }

    .nigun-modal-body {
        padding: 15px;
    }
}

.global-search-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 42px;
    height: 42px;
    border-radius: 50%;
    background: var(--gradient-main);
    border: none;
    color: white;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 4px 15px rgba(156, 91, 181, 0.4);
    margin-left: 12px;
    position: relative;
    overflow: hidden;
}

.global-search-btn::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.4), transparent);
    transform: translateX(-100%) rotate(45deg);
    transition: transform 0.4s ease;
}

.global-search-btn:hover {
    transform: translateY(-2px) scale(1.1);
    box-shadow: 0 8px 25px rgba(156, 91, 181, 0.6);
}

.global-search-btn:hover::before {
    transform: translateX(100%) rotate(45deg);
}

.global-search-btn svg {
    transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
}

.global-search-btn:hover svg {
    transform: scale(1.15) rotate(15deg);
}

.search-btn-text {
    max-width: 0;
    opacity: 0;
    overflow: hidden;
    white-space: nowrap;
    transition: all 0.4s ease;
    font-weight: 700;
    font-size: 0.95em;
    margin-right: 0;
}

.global-search-btn:hover {
    width: 95px;
    /* Expand to show text */
    border-radius: 30px;
    /* Pill shape */
    gap: 6px;
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(156, 91, 181, 0.6);
}

.global-search-btn:hover .search-btn-text {
    max-width: 50px;
    opacity: 1;
    margin-right: 4px;
}

/* Compact header buttons - gradient only */
.stream-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    padding: 8px 14px;
    background: var(--gradient-main);
    border: none;
    border-radius: 20px;
    text-decoration: none;
    font-size: 0.85em;
    font-weight: 600;
    color: white;
    transition: all 0.3s ease;
    box-shadow: 0 3px 12px rgba(156, 91, 181, 0.3);
    white-space: nowrap;
}

.stream-btn::before {
    content: '';
    width: 6px;
    height: 6px;
    background: white;
    border-radius: 50%;
    animation: pulse-white 2s infinite;
}

@keyframes pulse-white {

    0%,
    100% {
        opacity: 0.6;
        transform: scale(0.9);
    }

    50% {
        opacity: 1;
        transform: scale(1.1);
    }
}

.stream-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(156, 91, 181, 0.5);
}

/* New swapped button styles */
.search-pill-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    padding: 8px 14px;
    background: var(--gradient-main);
    border: none;
    border-radius: 20px;
    font-family: inherit;
    font-size: 0.85em;
    font-weight: 600;
    color: white;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 3px 12px rgba(156, 91, 181, 0.3);
    white-space: nowrap;
}

.search-pill-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(156, 91, 181, 0.5);
}

/* Search button with icon + text */
.search-btn-new {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    padding: 8px 14px;
    background: var(--gradient-main);
    border: none;
    border-radius: 20px;
    font-family: inherit;
    font-size: 0.85em;
    font-weight: 600;
    color: white;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 3px 12px rgba(156, 91, 181, 0.3);
    white-space: nowrap;
}

.search-icon-new {
    width: 16px;
    height: 16px;
    fill: white;
}

.search-btn-new:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(156, 91, 181, 0.5);
}

/* Streaming ball button - expands on hover */
.stream-ball-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 32px;
    height: 32px;
    padding: 0 10px;
    background: transparent;
    border: 2px solid #9c5bb5;
    border-radius: 16px;
    text-decoration: none;
    color: #9c5bb5;
    transition: all 0.3s ease;
    overflow: hidden;
    cursor: pointer;
}

.stream-dot {
    width: 6px;
    height: 6px;
    background: var(--gradient-main);
    border-radius: 50%;
    animation: pulse-dot 2s infinite;
    flex-shrink: 0;
}

@keyframes pulse-dot {

    0%,
    100% {
        opacity: 0.5;
        transform: scale(0.9);
    }

    50% {
        opacity: 1;
        transform: scale(1.1);
    }
}

.stream-text-new {
    max-width: 0;
    overflow: hidden;
    white-space: nowrap;
    font-size: 0.8em;
    font-weight: 600;
    opacity: 0;
    transition: all 0.3s ease;
    background: var(--gradient-main);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.stream-ball-btn:hover {
    padding: 6px 12px;
    gap: 5px;
    background: rgba(156, 91, 181, 0.05);
}

.stream-ball-btn:hover .stream-text-new {
    max-width: 80px;
    opacity: 1;
    margin-left: 4px;
}

.global-search-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 38px;
    height: 38px;
    border-radius: 50%;
    background: var(--gradient-main);
    border: none;
    color: white;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 3px 12px rgba(156, 91, 181, 0.3);
    position: relative;
    overflow: hidden;
}

.global-search-btn:hover {
    transform: translateY(-2px) scale(1.1);
    box-shadow: 0 6px 20px rgba(156, 91, 181, 0.5);
}

.search-btn-text {
    display: none;
    /* Hide text for compact design */
}

/* Navigation - Clean Layout, Individual Button Colors */
.main-nav {
    display: flex;
    gap: 16px;
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
    perspective: 800px;
}

.main-nav>* {
    transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* Tablecloth slide effect - corrected for divider at position 5 */
/* Nav order: 1=Nigunim, 2=Mechabrim, 3=Verter, 4=Zmanim, 5=Divider, 6=Docs */

/* When hovering Nigunim (1) - others slide right */
.main-nav>*:nth-child(1):hover~* {
    transform: translateX(8px);
}

/* When hovering Mechabrim (2) */
.main-nav:has(*:nth-child(2):hover)>*:nth-child(1) {
    transform: translateX(-6px);
}

.main-nav>*:nth-child(2):hover~* {
    transform: translateX(6px);
}

/* When hovering Verter (3) */
.main-nav:has(*:nth-child(3):hover)>*:nth-child(1),
.main-nav:has(*:nth-child(3):hover)>*:nth-child(2) {
    transform: translateX(-5px);
}

.main-nav>*:nth-child(3):hover~* {
    transform: translateX(5px);
}

/* When hovering Zmanim (4) */
.main-nav:has(*:nth-child(4):hover)>*:nth-child(1),
.main-nav:has(*:nth-child(4):hover)>*:nth-child(2),
.main-nav:has(*:nth-child(4):hover)>*:nth-child(3) {
    transform: translateX(-4px);
}

.main-nav>*:nth-child(4):hover~* {
    transform: translateX(4px);
}

/* When hovering Docs (6) - all others slide left toward it */
.main-nav:has(*:nth-child(6):hover)>*:nth-child(1),
.main-nav:has(*:nth-child(6):hover)>*:nth-child(2),
.main-nav:has(*:nth-child(6):hover)>*:nth-child(3),
.main-nav:has(*:nth-child(6):hover)>*:nth-child(4),
.main-nav:has(*:nth-child(6):hover)>*:nth-child(5) {
    transform: translateX(-8px);
}

.nav-btn {
    padding: 12px 28px;
    background: var(--color-nigun);
    border: none;
    border-radius: 30px;
    font-size: 1.1em;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    font-family: inherit;
    color: white;
    text-decoration: none;
    box-shadow: 0 4px 15px rgba(74, 124, 201, 0.35);
    position: relative;
    overflow: hidden;
    letter-spacing: 0.5px;
}

/* Animated glow ring */
.nav-btn::before {
    content: '';
    position: absolute;
    inset: -3px;
    border-radius: 35px;
    background: var(--color-nigun);
    z-index: -1;
    opacity: 0.5;
    filter: blur(8px);
    transition: all 0.4s ease;
}

/* Inner shine effect */
/* Inner shine effect - RTL direction, hover only */
.nav-btn::after {
    content: '';
    position: absolute;
    top: 0;
    left: 100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    transition: none;
}

.nav-btn:hover::after {
    left: -100%;
    transition: left 0.5s ease;
}

.nav-btn:hover {
    transform: translateY(3px) scale(1.08);
    box-shadow: 0 8px 25px rgba(74, 124, 201, 0.5);
}

.nav-btn:hover::before {
    opacity: 0.8;
    filter: blur(12px);
}

.nav-dropdown {
    position: relative;
}

/* Base dropdown button style */
.nav-dropdown-btn {
    padding: 10px 18px;
    border: none;
    border-radius: 25px;
    font-size: 0.95em;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    font-family: inherit;
    display: flex;
    align-items: center;
    gap: 8px;
    text-decoration: none;
    position: relative;
    z-index: 2;
}

.nav-dropdown-btn .nav-arrow {
    font-size: 1.1em;
    opacity: 0.6;
    transition: transform 0.3s ease;
}

.nav-dropdown:hover .nav-dropdown-btn .nav-arrow {
    transform: rotate(180deg);
}

/* Dropdown content positioning and default hidden state */
.nav-dropdown-content {
    display: none !important;
    position: absolute;
    top: 100%;
    right: auto;
    left: 50%;
    transform: translateX(-50%);
    background: transparent;
    min-width: 160px;
    z-index: 1000;
    overflow: visible;
    padding-top: 12px;
}

@keyframes dropdownFadeIn {
    from {
        opacity: 0;
        transform: translateY(-8px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Bridge between button and dropdown to prevent losing hover */
.nav-dropdown-content::before {
    content: '';
    position: absolute;
    top: 0;
    right: -20px;
    left: -20px;
    height: 15px;
    pointer-events: none;
}

.nav-dropdown-content .dropdown-inner {
    background: transparent;
    border-radius: 16px;
    padding: 6px 0;
    display: flex;
    flex-direction: column;
    gap: 4px;
}

@keyframes dropdownSlideIn {
    from {
        opacity: 0;
        transform: translateY(-10px) scale(0.95);
    }

    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

/* Keep dropdown open and parent styled when hovering anywhere in the dropdown area */
.nav-dropdown:hover .nav-dropdown-content,
.nav-dropdown:focus-within .nav-dropdown-content {
    display: block !important;
}

/* Parent button stays in hover state when dropdown is open */
/* Individual button hover styles handle the transform */

.nav-dropdown-content.hiding {
    display: none !important;
}

/* Beautiful dropdown items - each as separate white card */
.nav-dropdown-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
    margin: 0;
    cursor: pointer;
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    font-size: 0.9em;
    font-weight: 500;
    background: white;
    text-decoration: none;
    color: var(--text-dark);
    border-radius: 14px;
    position: relative;
    overflow: hidden;
    opacity: 0;
    animation: itemDropIn 0.35s ease-out forwards;
    border: none;
    box-shadow: 0 3px 12px rgba(0, 0, 0, 0.12), 0 1px 4px rgba(0, 0, 0, 0.08);
}

/* Staggered animation delays - items come in one by one */
.nav-dropdown-item:nth-child(1) {
    animation-delay: 0s;
}

.nav-dropdown-item:nth-child(2) {
    animation-delay: 0.08s;
}

.nav-dropdown-item:nth-child(3) {
    animation-delay: 0.16s;
}

.nav-dropdown-item:nth-child(4) {
    animation-delay: 0.24s;
}

.nav-dropdown-item:nth-child(5) {
    animation-delay: 0.32s;
}

.nav-dropdown-item:nth-child(6) {
    animation-delay: 0.4s;
}

@keyframes itemDropIn {
    from {
        opacity: 0;
        transform: translateY(-15px) scale(0.9);
    }

    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

.nav-dropdown-item:hover {
    transform: translateX(-4px) scale(1.02);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

/* Color indicator dot */
.nav-dropdown-item::before {
    content: '';
    width: 10px;
    height: 10px;
    border-radius: 50%;
    flex-shrink: 0;
    transition: all 0.25s ease;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
}

/* Stars need bigger size */
.nav-dropdown-item[data-dest="resources"]::before,
.nav-dropdown-item[data-dest="albums"]::before,
.nav-dropdown-item[data-dest="documents"]::before,
.nav-dropdown-item[data-dest="info"]::before {
    width: 14px;
    height: 14px;
}

.nav-dropdown-item:hover::before {
    transform: scale(1.3);
}

.nav-dropdown-item[data-dest="home"]::before {
    background: var(--color-nigun);
}

.nav-dropdown-item[data-dest="nigunim"]::before {
    background: var(--color-nigun);
}

.nav-dropdown-item[data-dest="mechabrim"]::before {
    background: var(--color-mechaber);
}

.nav-dropdown-item[data-dest="chatzeros"]::before {
    background: var(--color-chatzer);
}

.nav-dropdown-item[data-dest="verter"]::before {
    background: var(--color-verter);
    border-radius: 2px;
    /* Square shape */
}

.nav-dropdown-item[data-dest="zmanim"]::before {
    background: var(--color-zman);
    border-radius: 0;
    clip-path: polygon(0 50%, 100% 0, 100% 100%);
    /* Play triangle - RTL direction */
}

.nav-dropdown-item[data-dest="music"]::before {
    background: var(--color-music);
    border-radius: 2px;
    /* Square shape like verter */
}

.nav-dropdown-item[data-dest="collections"]::before {
    background: var(--color-collection);
    border-radius: 0;
    clip-path: polygon(0 50%, 100% 0, 100% 100%);
    /* Play triangle - RTL direction */
}

.nav-dropdown-item[data-dest="piyutim"]::before {
    background: var(--color-piyut);
    border-radius: 0;
    clip-path: polygon(0 50%, 100% 0, 100% 100%);
    /* Play triangle - RTL direction */
}

.nav-dropdown-item[data-dest="resources"]::before {
    background: var(--color-resource);
    clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
    /* Star */
    border-radius: 0;
}

.nav-dropdown-item[data-dest="albums"]::before {
    background: var(--color-album);
    clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
    /* Star */
    border-radius: 0;
}

.nav-dropdown-item[data-dest="documents"]::before {
    background: var(--color-document);
    clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
    /* Star */
    border-radius: 0;
}

.nav-dropdown-item[data-dest="info"]::before {
    background: #999;
    clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
    /* Star */
    border-radius: 0;
}

/* Navigation items text colors on hover */
.nav-dropdown-item[data-dest="nigunim"]:hover {
    color: var(--color-nigun-dark);
    background: var(--color-nigun-pale);
}

.nav-dropdown-item[data-dest="mechabrim"]:hover {
    color: var(--color-mechaber-dark);
    background: var(--color-mechaber-pale);
}

.nav-dropdown-item[data-dest="chatzeros"]:hover {
    color: var(--color-chatzer-dark);
    background: var(--color-chatzer-pale);
}

.nav-dropdown-item[data-dest="verter"]:hover {
    color: var(--color-verter-dark);
    background: var(--color-verter-pale);
}

.nav-dropdown-item[data-dest="zmanim"]:hover {
    color: var(--color-zman-dark);
    background: var(--color-zman-pale);
}

.nav-dropdown-item[data-dest="music"]:hover {
    color: var(--color-music-dark);
    background: var(--color-music-pale);
}

.nav-dropdown-item[data-dest="collections"]:hover {
    color: var(--color-collection-dark);
    background: var(--color-collection-pale);
}

.nav-dropdown-item[data-dest="piyutim"]:hover {
    color: var(--color-piyut-dark);
    background: var(--color-piyut-pale);
}

.nav-dropdown-item[data-dest="resources"]:hover {
    color: var(--color-resource-dark);
    background: var(--color-resource-pale);
}

.nav-dropdown-item[data-dest="albums"]:hover {
    color: var(--color-album-dark);
    background: var(--color-album-pale);
}

.nav-dropdown-item[data-dest="documents"]:hover {
    color: var(--color-document-dark);
    background: var(--color-document-pale);
}

.nav-dropdown-divider {
    height: 1px;
    background: #eee;
    margin: 4px 0;
}

/* Main Content */
.main-content {
    max-width: 1200px;
    margin: 0 auto;
    padding: 30px 20px;
}

/* Home Page Styles */
.home-page {
    max-width: 1000px;
    margin: 0 auto;
    padding: 30px 20px;
}

.home-hero {
    background: var(--gradient-main);
    border-radius: 25px;
    padding: 50px 30px;
    text-align: center;
    margin-bottom: 30px;
    box-shadow: 0 10px 40px rgba(74, 124, 201, 0.25), 0 10px 40px rgba(156, 91, 181, 0.2), 0 10px 40px rgba(196, 53, 168, 0.15);
    position: relative;
    overflow: hidden;
}

.home-hero::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
    /* animation: shimmer 15s infinite linear; removed for new animation */
}

/* Hero Musical Background Animation - Relaxing Floating Notes */
/* Hero Musical Background Animation - Relaxing Floating Notes + Wandering */
.hero-musical-bg {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    overflow: hidden;
    pointer-events: none;
    z-index: 1;
    perspective: 1000px;
}

/* Wrapper handles the main flight path (center to outward) */
.note-wrapper {
    position: absolute;
    top: 50%;
    left: 50%;
    transform-style: preserve-3d;
    animation: flight linear infinite;
}

/* Inner note handles rotation and random wandering */
.musical-note {
    display: block;
    color: rgba(255, 255, 255, 0.6);
    /* font-size set inline */
    transform-style: preserve-3d;
}

.musical-note.wander-1 {
    animation: wander1 ease-in-out infinite alternate;
}

.musical-note.wander-2 {
    animation: wander2 ease-in-out infinite alternate;
}

.musical-note.wander-3 {
    animation: wander3 ease-in-out infinite alternate;
}

@keyframes flight {
    0% {
        transform: translate(-50%, -50%) scale(0);
        opacity: 0;
    }

    50% {
        opacity: 0.8;
    }

    100% {
        transform: translate(var(--tx), var(--ty)) scale(2.5);
        opacity: 0;
    }
}

@keyframes wander1 {
    0% {
        transform: translate3d(0, 0, 0) rotateZ(var(--rot)) rotateX(0deg) rotateY(0deg);
    }

    33% {
        transform: translate3d(250px, -400px, 150px) rotateZ(calc(var(--rot) + 120deg)) rotateX(40deg) rotateY(30deg);
    }

    66% {
        transform: translate3d(-150px, 300px, -200px) rotateZ(calc(var(--rot) + 240deg)) rotateX(-30deg) rotateY(-40deg);
    }

    100% {
        transform: translate3d(0, 0, 0) rotateZ(calc(var(--rot) + 360deg)) rotateX(0deg) rotateY(0deg);
    }
}

@keyframes wander2 {
    0% {
        transform: translate3d(0, 0, 0) rotateZ(var(--rot)) rotateX(0deg) rotateY(0deg);
    }

    50% {
        transform: translate3d(-400px, 0, 300px) rotateZ(calc(var(--rot) - 180deg)) rotateX(-45deg) rotateY(45deg);
    }

    100% {
        transform: translate3d(400px, -200px, -400px) rotateZ(calc(var(--rot) - 360deg)) rotateX(0deg) rotateY(0deg);
    }
}

@keyframes wander3 {
    0% {
        transform: translate3d(0, 0, 0) rotateZ(var(--rot)) rotateX(0deg) rotateY(0deg);
    }

    25% {
        transform: translate3d(300px, 300px, 300px) rotateZ(calc(var(--rot) + 90deg)) rotateX(50deg) rotateY(-30deg);
    }

    75% {
        transform: translate3d(-300px, -300px, -300px) rotateZ(calc(var(--rot) + 270deg)) rotateX(-50deg) rotateY(30deg);
    }

    100% {
        transform: translate3d(0, 0, 0) rotateZ(calc(var(--rot) + 360deg)) rotateX(0deg) rotateY(0deg);
    }
}

/* Fade in up animation for cards */
@keyframes fadeInUp {
    from {
        opacity: 0;
        margin-top: 40px;
    }

    to {
        opacity: 1;
        margin-top: 0;
    }
}

/* Animate cards on load */
.animate-on-load {
    opacity: 0;
    animation: fadeInUp 0.6s ease-out forwards;
}

/* Staggered card animation */
@keyframes cardFadeIn {
    from {
        opacity: 0;
        margin-top: 30px;
    }

    to {
        opacity: 1;
        margin-top: 0;
    }
}

/* Staggered Fade Up Animation using Transform for better performance */
@keyframes fadeInUpTransform {
    from {
        opacity: 0;
        transform: translateY(50px) scale(0.97);
    }

    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

.stagger-fade-up {
    opacity: 0;
    animation: fadeInUpTransform 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) both;
    will-change: transform, opacity;
}

/* Initial state for elements we want to animate */
.home-stat-hero,
.home-stat-card,
.home-link-card,
.home-section {
    /* We will add the class via JS, but good to know these are the targets */
}

/* Smooth insertion animation - new items pop in */
@keyframes itemPopIn {
    0% {
        opacity: 0;
        transform: scale(0.8) translateY(-10px);
        max-height: 0;
        margin-bottom: 0;
        padding-top: 0;
        padding-bottom: 0;
    }

    40% {
        max-height: 100px;
        margin-bottom: 8px;
        padding-top: 12px;
        padding-bottom: 12px;
    }

    100% {
        opacity: 1;
        transform: scale(1) translateY(0);
        max-height: 100px;
        margin-bottom: 8px;
    }
}

.item-pop-in {
    animation: itemPopIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

/* Make song items and category cards animate their position smoothly */
.all-songs-grid .song-item,
.category-grid .category-card {
    transition: transform 0.3s ease-out, margin 0.3s ease-out;
}

/* When items need to make room for new ones */
.item-shift-down {
    animation: shiftDown 0.3s ease-out forwards;
}

@keyframes shiftDown {
    from {
        transform: translateY(0);
    }

    to {
        transform: translateY(0);
    }
}

/* Page transition animation (LTR - left to right) */
/* Forward navigation: enter from left */
@keyframes pageSlideInFromLeft {
    from {
        opacity: 0;
        transform: translateX(-50px);
    }

    to {
        opacity: 1;
        transform: translateX(0);
    }
}

/* Forward navigation: exit to right */
@keyframes pageSlideOutToRight {
    from {
        opacity: 1;
        transform: translateX(0);
    }

    to {
        opacity: 0;
        transform: translateX(50px);
    }
}

/* Backward navigation: enter from right */
@keyframes pageSlideInFromRight {
    from {
        opacity: 0;
        transform: translateX(50px);
    }

    to {
        opacity: 1;
        transform: translateX(0);
    }
}

/* Backward navigation: exit to left */
@keyframes pageSlideOutToLeft {
    from {
        opacity: 1;
        transform: translateX(0);
    }

    to {
        opacity: 0;
        transform: translateX(-50px);
    }
}

/* Home page specific animation (enter from bottom - dramatic) */
@keyframes pageSlideInUp {
    from {
        opacity: 0;
        transform: translateY(80px) scale(0.97);
    }

    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

/* Home page exit (all to right) */
@keyframes homePageExitRight {
    from {
        opacity: 1;
        transform: translateX(0);
    }

    to {
        opacity: 0;
        transform: translateX(50px);
    }
}

/* Content page transitions - forward */
.page-enter {
    animation: pageSlideInFromLeft 0.35s ease-out forwards;
}

.page-exit {
    animation: pageSlideOutToRight 0.2s ease-in forwards;
}

/* Content page transitions - backward */
.page-enter-back {
    animation: pageSlideInFromRight 0.35s ease-out forwards;
}

.page-exit-back {
    animation: pageSlideOutToLeft 0.2s ease-in forwards;
}

/* Home page transitions */
.page-enter-up {
    animation: pageSlideInUp 0.5s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
}

.page-exit-home {
    animation: homePageExitRight 0.2s ease-in forwards;
}

/* Info page fade animation - no directional movement */
@keyframes infoPageFadeIn {
    from {
        opacity: 0;
        transform: scale(0.98);
    }

    to {
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes infoPageFadeOut {
    from {
        opacity: 1;
        transform: scale(1);
    }

    to {
        opacity: 0;
        transform: scale(0.98);
    }
}

.page-enter-info {
    animation: infoPageFadeIn 0.3s ease-out forwards;
}

.page-exit-info {
    animation: infoPageFadeOut 0.15s ease-in forwards;
}

/* Count-up number animation */
@keyframes numberPop {
    0% {
        opacity: 0;
        transform: scale(0.5);
    }

    60% {
        transform: scale(1.1);
    }

    100% {
        opacity: 1;
        transform: scale(1);
    }
}

.number-animate {
    animation: numberPop 0.4s ease-out forwards;
}

.home-hero-content {
    position: relative;
    z-index: 2;
}

.home-logo {
    font-size: 4em;
    margin-bottom: 15px;
    text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}

.home-title {
    font-size: 5.5em;
    color: white;
    margin: 0 0 10px 0;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    font-family: 'Heebo', sans-serif;
    font-weight: 700;
}

.home-subtitle {
    font-size: 1.2em;
    color: rgba(255, 255, 255, 0.9);
    margin: 0;
}

.home-search-section {
    margin-bottom: 30px;
}

.home-search-box {
    display: flex;
    gap: 10px;
}

.home-search-input {
    flex: 1;
    padding: 15px 20px;
    font-size: 1.1em;
    border: 2px solid var(--primary-pale);
    border-radius: 15px;
    outline: none;
    font-family: inherit;
    direction: rtl;
    transition: var(--transition-smooth);
}

.home-search-input:focus {
    border-color: var(--color-chatzer);
    box-shadow: 0 0 0 4px rgba(156, 91, 181, 0.15);
}

.home-search-btn {
    padding: 15px 30px;
    background: var(--gradient-main);
    color: white;
    border: none;
    border-radius: 15px;
    font-size: 1.1em;
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition-smooth);
}

.home-search-btn:hover {
    background: var(--gradient-main-dark);
    transform: translateY(-2px);
}

/* Stats Grid - 2 Stack Layout */
.home-stats-grid {
    display: flex;
    gap: 20px;
    margin-bottom: 60px;
}

/* Hero ניגונים Card - Left Side, Full Height */
.home-stat-hero {
    flex: 0 0 35%;
    background: linear-gradient(145deg, var(--color-nigun-pale) 0%, white 100%);
    border: 2px solid var(--color-nigun-pale);
    border-radius: 22px;
    padding: 40px 30px;
    text-align: center;
    cursor: pointer;
    transition: var(--transition-smooth);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
    display: flex;
    flex-direction: column;
    justify-content: center;
    text-decoration: none;
    color: inherit;
}

.home-stat-hero:hover {
    transform: translateY(-5px);
    box-shadow: 0 12px 35px rgba(0, 0, 0, 0.1);
    border-color: var(--color-nigun);
}

.home-stat-hero .home-stat-number {
    font-size: 4.5em;
    font-weight: 700;
    color: var(--color-nigun-dark);
    font-family: 'Heebo', sans-serif;
}

.home-stat-hero .home-stat-label {
    font-size: 1.8em;
    color: var(--color-nigun);
    font-weight: 600;
    margin-top: 10px;
}

.home-stat-hero .home-stat-subtitle {
    font-size: 1em;
    color: var(--color-nigun);
    opacity: 0.8;
    margin-top: 0px;
}

/* Right Side - 2 Stacked Rows */
.home-stats-right {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.home-stats-row {
    display: flex;
    gap: 20px;
    flex: 1;
}

/* Individual Stat Cards */
.home-stat-card {
    flex: 1;
    background: white;
    border-radius: 18px;
    padding: 20px 15px;
    text-align: center;
    cursor: pointer;
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1), border-color 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
    border: 2px solid transparent;
    display: flex;
    flex-direction: column;
    justify-content: center;
    transform: translateY(0);
    text-decoration: none;
    color: inherit;
}

.home-stat-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 12px 35px rgba(0, 0, 0, 0.1);
}

.home-stat-number {
    font-size: 2em;
    font-weight: 700;
    margin-bottom: 5px;
    font-family: 'Heebo', sans-serif;
}

.home-stat-label {
    font-size: 1.05em;
    font-weight: 500;
}

/* Statistics Link */
.home-stats-link {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-top: -40px;
    margin-bottom: 50px;
    cursor: pointer;
    transition: var(--transition-smooth);
    width: 100%;
    gap: 15px;
    text-decoration: none;
    color: inherit;
}

.home-stats-link-line {
    flex: 1;
    height: 2px;
    background: var(--primary);
    border-radius: 2px;
    position: relative;
    transition: all 0.3s ease;
}

/* Right line (appears on LEFT in RTL) - has arrow pointing left (outward) */
.home-stats-link-line::after {
    content: '';
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 0;
    height: 0;
    border-top: 4px solid transparent;
    border-bottom: 4px solid transparent;
    border-right: 8px solid var(--primary);
    transition: all 0.3s ease;
}

/* Left line (appears on RIGHT in RTL) - solid like the other line */
.home-stats-link-line.left {
    background: var(--primary);
}

.home-stats-link-line.left::after {
    display: none;
}

.home-stats-link-text {
    background: var(--gradient-main);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    font-size: 1.1em;
    font-weight: 600;
    letter-spacing: 0.3em;
    text-transform: uppercase;
    padding: 8px 20px;
    position: relative;
    transition: var(--transition-smooth);
}

.home-stats-link:hover {
    transform: scale(1.03);
}

.home-stats-link:hover .home-stats-link-line {
    background: var(--color-mechaber);
}

.home-stats-link:hover .home-stats-link-line::after {
    border-right-color: var(--color-mechaber);
}

.home-stats-link:hover .home-stats-link-line.left {
    background: var(--color-mechaber);
}

.home-section-title {
    text-align: center;
    background: var(--gradient-main);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    font-size: 1.5em;
    margin-bottom: 20px;
}

.home-links-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 15px;
}

.home-link-card {
    display: flex;
    align-items: center;
    gap: 15px;
    background: white;
    border-radius: 15px;
    padding: 20px;
    box-shadow: var(--card-shadow);
    cursor: pointer;
    transition: var(--transition-smooth);
    border: 2px solid transparent;
}

.home-link-card:hover {
    border-color: var(--primary);
    transform: translateX(-5px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.12);
}

.home-link-icon {
    font-size: 2.5em;
    width: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--primary-pale);
    border-radius: 15px;
}

.home-link-text {
    flex: 1;
}

.home-link-title {
    font-size: 1.2em;
    font-weight: 600;
    color: var(--text-dark);
    margin-bottom: 5px;
}

.home-link-desc {
    font-size: 0.9em;
    color: var(--text-muted);
}

/* Home Sections */
.home-section {
    background: white;
    border-radius: 15px;
    padding: 30px;
    margin-top: 30px;
    box-shadow: var(--card-shadow);
}

.home-section-title {
    color: var(--primary-deep);
    font-size: 1.4em;
    font-family: 'Heebo', sans-serif;
    font-weight: 600;
    margin: 0 0 20px 0;
    padding-bottom: 10px;
    border-bottom: 2px solid var(--primary-pale, #f3e5f5);
}

.home-section-content {
    color: var(--text-dark);
    line-height: 1.8;
}

.home-section-content p {
    margin: 0 0 15px 0;
}

.home-section-content p:last-child {
    margin-bottom: 0;
}

/* Instructions */
.instructions-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 15px;
}

.instruction-item {
    display: flex;
    align-items: flex-start;
    gap: 15px;
    padding: 15px;
    background: var(--bg-light);
    border-radius: 10px;
}

.instruction-number {
    width: 30px;
    height: 30px;
    background: var(--gradient-main);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    flex-shrink: 0;
}

.instruction-text {
    flex: 1;
}

/* Stats detailed */
.stats-detailed {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 10px;
}

.stat-row {
    display: flex;
    justify-content: space-between;
    padding: 12px 15px;
    background: var(--bg-light);
    border-radius: 8px;
}

.stat-label-lg {
    color: var(--text-muted);
}

.stat-value-lg {
    font-weight: 700;
    color: var(--primary);
}

/* Credits */
.credits-list {
    margin-top: 15px;
}

.credit-item {
    padding: 10px 15px;
    background: var(--bg-light);
    border-radius: 8px;
    margin-bottom: 10px;
}

.credit-item:last-child {
    margin-bottom: 0;
}

/* Thanks */
.thanks-list {
    margin: 15px 0;
    padding-right: 20px;
}

.thanks-list li {
    margin-bottom: 8px;
}

.blessing {
    font-style: italic;
    text-align: center;
    color: var(--primary);
    margin-top: 20px;
    padding: 15px;
    background: var(--primary-pale, #f3e5f5);
    border-radius: 10px;
}

/* Terms */
.terms-content ul {
    margin: 15px 0;
    padding-right: 20px;
}

.terms-content li {
    margin-bottom: 8px;
}

@media (max-width: 600px) {
    .home-hero {
        padding: 35px 20px;
    }

    .home-title {
        font-size: 2em;
    }

    .home-logo {
        font-size: 3em;
    }

    .home-search-box {
        flex-direction: column;
    }

    .home-stats-grid {
        flex-direction: column;
    }

    .home-stat-hero {
        flex: none;
        padding: 35px 20px;
    }

    .home-stat-hero .home-stat-number {
        font-size: 3.5em;
    }

    .home-stat-hero .home-stat-label {
        font-size: 1.5em;
    }

    .home-stats-row {
        flex-wrap: wrap;
        gap: 12px;
    }

    .home-stat-card {
        flex: 1 1 45%;
        min-width: 120px;
        padding: 18px 12px;
    }

    .home-stat-number {
        font-size: 1.7em;
    }

    .home-links-grid {
        grid-template-columns: 1fr;
    }

    .home-about-links {
        grid-template-columns: repeat(2, 1fr);
    }

    .home-about-link {
        padding: 14px 10px;
        font-size: 0.85em;
        border-bottom: 1px solid var(--color-chatzer-pale);
    }

    .home-about-link:nth-child(2n+1) {
        border-left: none;
    }
}

@media (max-width: 500px) {
    .home-stat-card {
        flex: 1 1 100%;
    }

    .home-about-links {
        grid-template-columns: 1fr;
    }

    .home-about-link {
        border-left: none !important;
    }
}

/* Page Title */
.page-title {
    background: white;
    border-radius: 16px;
    box-shadow: var(--card-shadow);
    margin-bottom: 25px;
    overflow: hidden;
}

.page-title-bar {
    padding: 25px 20px;
    font-size: 2.2em;
    font-weight: 700;
    font-family: 'Heebo', sans-serif;
    background: var(--gradient-main);
    color: white;
    text-align: center;
}

.page-title-content {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    padding: 15px 25px;
    background: white;
}

.page-title-icon {
    display: none;
}

.page-title .subtitle {
    color: var(--text-muted);
    font-size: 0.95em;
    transition: color 0.3s;
}

/* Loading Animation for Subtitle */
.page-title .subtitle.loading {
    position: relative;
    color: transparent !important;
    background: #e0e0e0;
    border-radius: 4px;
    overflow: hidden;
    display: inline-block;
    min-width: 100px;
    vertical-align: middle;
}

.page-title .subtitle.loading::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg,
            rgba(255, 255, 255, 0) 0%,
            rgba(255, 255, 255, 0.5) 50%,
            rgba(255, 255, 255, 0) 100%);
    animation: loadingShimmer 1.5s infinite;
    transform: translateX(-100%);
}

@keyframes loadingShimmer {
    100% {
        transform: translateX(100%);
    }
}

/* Resources Page */
.category-group {
    margin-bottom: 30px;
}

.category-group-header {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 20px;
    border-radius: 12px;
    margin-bottom: 15px;
}

.category-group-title {
    font-size: 1.2em;
    font-weight: 600;
    font-family: 'Heebo', sans-serif;
}

.category-group-count {
    background: rgba(0, 0, 0, 0.1);
    padding: 3px 10px;
    border-radius: 12px;
    font-size: 0.85em;
    font-weight: 500;
}

/* Clickable card elements */
.clickable-header {
    cursor: pointer;
    transition: var(--transition-smooth);
}

.clickable-header:hover {
    filter: brightness(1.1);
}

.clickable-title {
    cursor: pointer;
    transition: var(--transition-smooth);
}

.clickable-title:hover {
    opacity: 0.7;
}

.clickable-cover {
    cursor: pointer;
    transition: var(--transition-smooth);
}

.clickable-cover:hover {
    opacity: 0.85;
}

.resources-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 20px;
}

.resource-card-header {
    padding: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.resource-icon {
    font-size: 2.5em;
}

.resource-sort-label {
    font-size: 0.9em;
    font-weight: 600;
    color: white;
    text-align: center;
}

.resource-card-body {
    padding: 15px;
    flex: 1;
}

.resource-title {
    font-weight: 600;
    font-size: 1.1em;
    color: var(--color-resource-dark);
    margin-bottom: 8px;
}

.resource-type {
    display: inline-block;
    background: var(--color-resource-pale);
    color: var(--color-resource-dark);
    padding: 3px 10px;
    border-radius: 12px;
    font-size: 0.8em;
    margin-bottom: 8px;
}

.resource-chatzer {
    margin-bottom: 8px;
}

.resource-details,
.resource-notes {
    font-size: 0.85em;
    color: var(--text-muted);
    line-height: 1.5;
}

.resource-card-footer {
    padding: 15px;
    border-top: 1px solid var(--color-resource-pale);
}

.resource-link-btn,
.resource-btn-placeholder {
    display: block;
    width: 100%;
    padding: 10px;
    background: var(--color-resource);
    color: white;
    border-radius: 10px;
    text-decoration: none;
    font-size: 0.95em;
    text-align: center;
    transition: var(--transition-smooth);
    box-sizing: border-box;
    min-height: 40px;
}

.resource-btn-placeholder {
    visibility: hidden;
}

.resource-phone-number {
    width: 100%;
    padding: 10px;
    background: var(--color-resource-pale);
    color: var(--color-resource-dark);
    border-radius: 10px;
    font-size: 0.95em;
    text-align: center;
    font-weight: 600;
    white-space: pre-line;
    line-height: 1.6;
}

.resource-link-btn:hover {
    background: var(--color-resource-dark);
}

/* Documents Page */
.documents-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 20px;
}

.document-card-header {
    padding: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.document-preview {
    position: relative;
    width: 100%;
    height: 200px;
    background: #f5f5f5;
    overflow: hidden;
}

.document-preview-frame {
    width: 100%;
    height: calc(100% + 60px);
    border: none;
    pointer-events: none;
    margin-top: -30px;
}

.document-preview-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: var(--transition-smooth);
}

.document-preview-overlay:hover {
    background: rgba(0, 0, 0, 0.3);
}

.preview-expand-icon {
    font-size: 2em;
    opacity: 0;
    transition: var(--transition-smooth);
}

.document-preview-overlay:hover .preview-expand-icon {
    opacity: 1;
}

.document-icon {
    font-size: 2.5em;
}

.document-sort-label {
    font-size: 0.9em;
    font-weight: 600;
    color: white;
    text-align: center;
}

.document-card-body {
    padding: 15px;
    flex: 1;
}

.document-title {
    font-weight: 600;
    font-size: 1.1em;
    color: var(--color-document-dark);
    margin-bottom: 8px;
}

.document-type {
    display: inline-block;
    background: var(--color-document-pale);
    color: var(--color-document-dark);
    padding: 3px 10px;
    border-radius: 12px;
    font-size: 0.8em;
    margin-bottom: 5px;
    margin-left: 5px;
}

.document-serie {
    display: inline-block;
    background: var(--color-document-pale);
    color: var(--color-document-dark);
    padding: 3px 10px;
    border-radius: 12px;
    font-size: 0.8em;
    margin-bottom: 8px;
}

.document-chatzer {
    margin-bottom: 8px;
}

.document-details,
.document-notes {
    font-size: 0.85em;
    color: var(--text-muted);
    line-height: 1.5;
}

.document-card-footer {
    padding: 15px;
    border-top: 1px solid var(--color-document-pale);
}

.document-pdf-btn,
.document-link-btn,
.document-btn-placeholder {
    width: 100%;
    padding: 10px;
    border-radius: 10px;
    text-decoration: none;
    font-size: 0.95em;
    text-align: center;
    transition: var(--transition-smooth);
    cursor: pointer;
    border: none;
    font-family: inherit;
    box-sizing: border-box;
    min-height: 40px;
    display: block;
}

.document-btn-placeholder {
    visibility: hidden;
}

.document-pdf-btn {
    background: var(--color-document);
    color: white;
}

.document-pdf-btn:hover {
    background: var(--color-document-dark);
}

.document-link-btn {
    background: var(--color-document);
    color: white;
}

.document-link-btn:hover {
    background: var(--color-document-dark);
}

/* PDF Popup */
.pdf-popup-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.8);
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: var(--transition-smooth);
}

.pdf-popup-overlay.show {
    opacity: 1;
    visibility: visible;
}

.pdf-popup {
    background: white;
    border-radius: 16px;
    width: 90%;
    max-width: 900px;
    height: 85vh;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.pdf-popup-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 20px;
    background: var(--color-document);
    color: white;
}

.pdf-popup-title {
    font-weight: 600;
    font-size: 1.1em;
}

.pdf-popup-close {
    background: rgba(255, 255, 255, 0.2);
    border: none;
    color: white;
    width: 35px;
    height: 35px;
    border-radius: 50%;
    font-size: 1.2em;
    cursor: pointer;
    transition: var(--transition-smooth);
}

.pdf-popup-close:hover {
    background: rgba(255, 255, 255, 0.3);
}

.pdf-popup-body {
    flex: 1;
    overflow: hidden;
}

.pdf-popup-body iframe {
    width: 100%;
    height: 100%;
    border: none;
}

.pdf-popup-footer {
    padding: 10px 20px;
    background: #f8fafc;
    display: flex;
    justify-content: center;
    gap: 10px;
}

.pdf-download-btn {
    padding: 10px 25px;
    background: var(--color-document);
    color: white;
    border: none;
    border-radius: 20px;
    text-decoration: none;
    font-size: 0.95em;
    cursor: pointer;
    transition: var(--transition-smooth);
}

.pdf-download-btn:hover {
    background: var(--color-document-dark);
}

/* Albums Page */
.albums-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 20px;
}

.album-cover {
    width: 100%;
    aspect-ratio: 1;
    object-fit: cover;
}

.album-cover-placeholder {
    width: 100%;
    aspect-ratio: 1;
    background: linear-gradient(135deg, var(--color-album-pale) 0%, var(--color-album-light) 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 3em;
    color: var(--color-album);
}

.album-card-header {
    padding: 10px 15px;
    text-align: center;
}

.album-producer-label {
    font-size: 0.85em;
    font-weight: 600;
    color: white;
    line-height: 1.4;
}

.album-info {
    padding: 15px;
    flex: 1;
}

.album-title {
    font-weight: 600;
    font-size: 1.05em;
    color: var(--color-album-dark);
    margin-bottom: 5px;
}

.album-producer,
.album-year {
    font-size: 0.85em;
    color: var(--text-muted);
}

.album-chatzer {
    margin: 5px 0;
}

.album-serie {
    display: inline-block;
    background: var(--color-album-pale);
    color: var(--color-album-dark);
    padding: 2px 8px;
    border-radius: 10px;
    font-size: 0.75em;
    margin-top: 3px;
}

.album-notes {
    font-size: 0.8em;
    color: var(--text-muted);
    margin-top: 5px;
    font-style: italic;
}

.album-actions {
    padding: 0 15px 15px;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.album-booklet-btn,
.album-buy-btn,
.album-btn-placeholder {
    width: 100%;
    padding: 10px 12px;
    border-radius: 20px;
    text-decoration: none;
    font-size: 0.85em;
    text-align: center;
    transition: var(--transition-smooth);
    border: none;
    cursor: pointer;
    box-sizing: border-box;
    min-height: 38px;
    display: block;
}

.album-btn-placeholder {
    visibility: hidden;
}

.album-booklet-btn {
    background: var(--color-album);
    color: white;
    cursor: pointer;
}

.album-booklet-btn:hover {
    background: var(--color-album-dark);
}

.album-buy-btn {
    background: var(--color-album-pale);
    color: var(--color-album-dark);
    border: 1px solid var(--color-album-light);
}

.album-buy-btn:hover {
    background: var(--color-album-light);
}

/* Collections Grid - Playlist Style */
.collections-grid {
    display: flex;
    flex-direction: column;
    gap: 12px;
    max-width: 800px;
    margin: 0 auto;
}

.collection-card {
    background: white;
    border-radius: 12px;
    box-shadow: var(--card-shadow);
    /* overflow: hidden; Removed */
    transition: var(--transition-smooth);
    position: relative;
    /* For pseudo-element */
}

.collection-card> :first-child {
    border-top-left-radius: inherit;
    border-top-right-radius: inherit;
}

.collection-card> :last-child {
    border-bottom-left-radius: inherit;
    border-bottom-right-radius: inherit;
}

/* Hover effect for Collection Card */
.collection-card::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    border-radius: 12px;
    border: 2px solid var(--color-collection);
    opacity: 0;
    top: -6px;
    left: -6px;
    right: -6px;
    bottom: -6px;
    transition: opacity 0.2s ease, top 0s 0.2s, bottom 0s 0.2s, left 0s 0.2s, right 0s 0.2s;
    pointer-events: none;
    box-sizing: border-box;
    box-shadow: 0 0 15px rgba(76, 175, 80, 0.15);
}

.collection-card:hover::after {
    opacity: 1;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.collection-card:hover {
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
    transform: translateY(-2px);
}

.collection-card-header {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 15px 20px;
    cursor: pointer;
}

.collection-icon {
    width: 50px;
    height: 50px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5em;
    color: white;
    flex-shrink: 0;
}

.collection-info {
    flex: 1;
    min-width: 0;
}

.collection-title {
    font-weight: 700;
    font-size: 1.1em;
    color: var(--text-dark);
    margin-bottom: 4px;
}

.collection-meta {
    font-size: 0.85em;
    color: var(--text-muted);
}

.collection-zmanim {
    display: flex;
    flex-wrap: wrap;
    gap: 5px;
    margin-top: 6px;
}

.collection-zman-tag {
    background: var(--color-zman);
    color: white;
    padding: 2px 8px;
    border-radius: 10px;
    font-size: 0.75em;
    cursor: pointer;
    transition: var(--transition-smooth);
}

.collection-zman-tag:hover {
    background: var(--color-zman-dark);
    transform: scale(1.05);
}

.collection-zman-more {
    background: var(--bg-light);
    color: var(--text-muted);
    padding: 2px 8px;
    border-radius: 10px;
    font-size: 0.75em;
}

/* Music Page Styles */
.music-ritem-groups {
    display: flex;
    flex-direction: column;
    gap: 25px;
}

.ritem-group {
    background: white;
    border-radius: 20px;
    box-shadow: var(--card-shadow);
    /* overflow: hidden; Removed */
}

.ritem-group> :first-child {
    border-top-left-radius: inherit;
    border-top-right-radius: inherit;
}

.ritem-group> :last-child {
    border-bottom-left-radius: inherit;
    border-bottom-right-radius: inherit;
}

.ritem-group-header {
    background: linear-gradient(135deg, var(--color-music) 0%, var(--color-music-dark) 100%);
    color: white;
    padding: 18px 25px;
    display: flex;
    align-items: center;
    gap: 12px;
}

.ritem-group-header h3 {
    margin: 0;
    font-size: 1.25em;
    flex: 1;
}

.ritem-count {
    font-size: 0.9em;
    opacity: 0.9;
}

.ritem-play-btn {
    background: rgba(255, 255, 255, 0.2);
    border: none;
    color: white;
    padding: 8px 16px;
    border-radius: 20px;
    cursor: pointer;
    transition: var(--transition-smooth);
    font-size: 0.85em;
}

.ritem-play-btn:hover {
    background: rgba(255, 255, 255, 0.35);
}

.ritem-scales {
    padding: 20px;
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
}

.scale-group {
    background: var(--bg-light);
    border-radius: 15px;
    /* overflow: hidden; Removed */
}

.scale-group> :first-child {
    border-top-left-radius: inherit;
    border-top-right-radius: inherit;
}

.scale-group> :last-child {
    border-bottom-left-radius: inherit;
    border-bottom-right-radius: inherit;
}

.scale-group-header {
    background: var(--color-music-pale);
    padding: 12px 18px;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.scale-name {
    font-weight: 600;
    color: var(--color-music-dark);
}

.scale-song-count {
    background: var(--color-music);
    color: white;
    padding: 3px 10px;
    border-radius: 12px;
    font-size: 0.8em;
}

.scale-songs {
    padding: 10px;
}

.music-song-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 12px;
    border-radius: 10px;
    cursor: pointer;
    transition: var(--transition-smooth);
    margin-bottom: 6px;
    background: white;
}

.music-song-item:hover {
    background: var(--color-nigun-pale);
    transform: translateX(-3px);
}

.music-song-item.no-audio {
    opacity: 0.6;
    border: 1px dashed var(--border-color);
}

.music-song-name {
    flex: 1;
    font-weight: 500;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.music-song-meta {
    font-size: 0.8em;
    color: var(--color-mechaber-dark);
    white-space: nowrap;
}

.music-song-details {
    background: transparent;
    border: none;
    color: var(--color-music);
    cursor: pointer;
    padding: 5px;
    font-size: 1em;
    opacity: 0.5;
    transition: var(--transition-smooth);
}

.music-song-details:hover {
    opacity: 1;
}

.scale-more {
    text-align: center;
    padding: 10px;
    color: var(--color-music);
    cursor: pointer;
    font-size: 0.9em;
    transition: var(--transition-smooth);
}

.scale-more:hover {
    background: var(--color-music-pale);
    border-radius: 8px;
}

.collection-play-btn {
    width: 45px;
    height: 45px;
    background: linear-gradient(135deg, var(--color-collection) 0%, var(--color-collection-dark) 100%);
    border: none;
    border-radius: 50%;
    color: white;
    font-size: 1.2em;
    cursor: pointer;
    transition: var(--transition-smooth);
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
}

.collection-play-btn:hover {
    transform: scale(1.1);
    box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
}

/* Category Cards Grid */
.category-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 20px;
}

.category-card {
    background: white;
    border-radius: 16px;
    padding: 20px;
    box-shadow: var(--card-shadow);
    transition: var(--transition-smooth);
    cursor: pointer;
    display: flex;
    flex-direction: column;
    border: 2px solid transparent;
    /* Removed overflow: hidden to allow hover glow */
    position: relative;
    text-decoration: none;
    color: inherit;
}

.category-card> :first-child {
    border-top-left-radius: inherit;
    border-top-right-radius: inherit;
}

.category-card> :last-child {
    border-bottom-left-radius: inherit;
    border-bottom-right-radius: inherit;
}

/* Category-themed card backgrounds and unified hover effect */
.category-card {
    position: relative;
}

/* Unified Hover Effect for Category Cards */
.category-card::after {
    content: '';
    position: absolute;
    border-radius: 16px;
    border: 2px solid transparent;
    /* Color set by theme */
    opacity: 0;
    top: -6px;
    left: -6px;
    right: -6px;
    bottom: -6px;
    transition: opacity 0.2s ease, top 0s 0.2s, bottom 0s 0.2s, left 0s 0.2s, right 0s 0.2s;
    pointer-events: none;
    box-sizing: border-box;
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.05);
}

.category-card:hover::after {
    opacity: 1;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* Remove old hover border change - handled by ::after now */

.category-card:hover {
    transform: translateY(-5px);
    box-shadow: var(--card-hover-shadow);
}

.category-card.expanded {
    grid-column: 1 / -1;
    /* border-color: var(--primary);  - Handled by inner content or theme */
}

.category-card.expanded::after {
    opacity: 1;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    border-color: var(--primary);
}

.card-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 10px;
}

.card-image {
    width: 55px;
    height: 55px;
    border-radius: 10px;
    object-fit: cover;
    flex-shrink: 0;
    border: 2px solid var(--primary-pale);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

/* Round images for mechabrim cards */
.page-theme.theme-mechaber .card-image {
    border-radius: 50%;
}

.category-card.has-image .card-header {
    align-items: flex-start;
}

.card-header-text {
    flex: 1;
    min-width: 0;
}

.card-description {
    font-size: 0.85em;
    color: var(--text-muted);
    margin-top: 4px;
    line-height: 1.4;
}

.card-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-top: 8px;
}

.card-chatzer-tag {
    display: inline-block;
    background: var(--color-chatzer);
    color: white;
    padding: 3px 10px;
    border-radius: 12px;
    font-size: 0.75em;
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition-smooth);
}

.card-chatzer-tag:hover {
    background: var(--color-chatzer-dark);
    transform: scale(1.05);
}

.card-chatzer-display {
    text-align: center;
    font-size: 1.3em;
    font-weight: 700;
    color: var(--color-chatzer-dark);
    padding: 12px 15px;
    margin-top: 5px;
    cursor: pointer;
    transition: var(--transition-smooth);
    border-top: 1px solid var(--color-chatzer-light);
    background: var(--color-chatzer-pale);
    border-radius: 0 0 14px 14px;
    margin: 0 -20px -20px -20px;
}

.card-chatzer-display:hover {
    background: var(--color-chatzer-light);
    color: var(--color-chatzer-dark);
}

.card-zman-tag {
    display: inline-block;
    background: var(--color-zman);
    color: white;
    padding: 3px 10px;
    border-radius: 12px;
    font-size: 0.75em;
    cursor: pointer;
    transition: var(--transition-smooth);
}

.card-zman-tag:hover {
    background: var(--color-zman-dark);
    transform: scale(1.05);
}

.card-stats {
    display: flex;
    gap: 12px;
    margin-top: 8px;
    flex-wrap: wrap;
}

.card-stat {
    font-size: 0.8em;
    color: var(--text-muted);
}

.card-years {
    font-size: 0.8em;
    color: var(--text-muted);
    margin-top: 2px;
}

.card-stat-zman {
    font-size: 0.8em;
    color: var(--primary);
    font-weight: 600;
}

.section-header {
    color: var(--primary-deep);
    font-size: 1.3em;
    margin: 30px 0 15px 0;
    padding-bottom: 10px;
    border-bottom: 2px solid var(--primary-pale);
}

.section-header:first-of-type {
    margin-top: 0;
}

.zman-section {
    background: white;
    padding: 25px;
    border-radius: 20px;
    box-shadow: var(--card-shadow);
    margin-bottom: 25px;
}

.zman-section h3 {
    font-size: 1.2em;
    margin-bottom: 20px;
    padding-bottom: 10px;
}

/* Collections section - red */
.zman-section.section-collections h3 {
    color: var(--color-collection);
    border-bottom: 2px solid var(--color-collection-pale);
}

.zman-section.section-collections .zman-item-card {
    background: var(--color-collection-pale);
    border: 2px solid transparent;
}

.zman-section.section-collections .zman-item-card:hover {
    border-color: var(--color-collection);
}

/* Piyutim section - green */
.zman-section.section-piyutim h3 {
    color: #2e8b2e;
    border-bottom: 2px solid #e8f5e9;
}

.zman-section.section-piyutim .zman-item-card {
    background: #e8f5e9;
    border: 2px solid transparent;
}

.zman-section.section-piyutim .zman-item-card:hover {
    border-color: #2e8b2e;
}

.zman-items-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 12px;
}

.zman-item-card {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 15px;
    background: #f8fafc;
    border-radius: 12px;
    cursor: pointer;
    transition: var(--transition-smooth);
    border: 2px solid transparent;
    position: relative;
    /* For pseudo-element */
}

/* Hover effect for Zman Item Card */
.zman-item-card::after {
    content: '';
    position: absolute;
    border-radius: 12px;
    border: 2px solid transparent;
    /* Set by specific section rules */
    opacity: 0;
    top: -6px;
    left: -6px;
    right: -6px;
    bottom: -6px;
    transition: opacity 0.2s ease, top 0s 0.2s, bottom 0s 0.2s, left 0s 0.2s, right 0s 0.2s;
    pointer-events: none;
    box-sizing: border-box;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

.zman-item-card:hover::after {
    opacity: 1;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* Collections colored border */
.zman-section.section-collections .zman-item-card::after {
    border-color: var(--color-collection);
    box-shadow: 0 0 10px rgba(76, 175, 80, 0.15);
}

/* Piyutim colored border */
.zman-section.section-piyutim .zman-item-card::after {
    border-color: #2e8b2e;
    box-shadow: 0 0 10px rgba(46, 139, 46, 0.15);
}

/* Removing old border hover effect to avoid conflict */
.zman-item-card:hover {
    /* border-color handled by ::after now */
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.zman-item-icon {
    font-size: 1.5em;
}

.zman-item-info {
    flex: 1;
    min-width: 0;
}

.zman-item-name {
    font-weight: 600;
    color: var(--text-dark);
    font-size: 0.95em;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.zman-item-count {
    font-size: 0.8em;
    color: var(--text-muted);
    margin-top: 3px;
}

/* Search Results Page */
.search-section {
    background: white;
    padding: 25px;
    border-radius: 15px;
    box-shadow: var(--card-shadow);
    margin-bottom: 20px;
}

.search-results-searchbar {
    display: flex;
    gap: 12px;
    margin-bottom: 25px;
    padding: 20px;
    background: white;
    border-radius: 12px;
    box-shadow: var(--card-shadow);
}

.search-results-input {
    flex: 1;
    padding: 12px 16px;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    font-size: 1em;
    font-family: inherit;
    direction: rtl;
    transition: var(--transition-smooth);
}

.search-results-input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px var(--primary-pale);
}

.search-results-btn {
    padding: 12px 24px;
    background: var(--gradient-main);
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 1em;
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition-smooth);
    white-space: nowrap;
}

.search-results-btn:hover {
    background: var(--gradient-main-dark);
}

.search-section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 2px solid var(--bg-light);
}

.search-section-header h3 {
    margin: 0;
    font-size: 1.1em;
}

.see-all-btn {
    background: none;
    border: none;
    color: var(--color-nigun);
    cursor: pointer;
    font-family: inherit;
    font-size: 0.9em;
}

.see-all-btn:hover {
    text-decoration: underline;
}



.list-layout .song-item {
    margin-bottom: 0;
}

.search-result-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 15px;
    background: var(--bg-light);
    border-radius: 10px;
    cursor: pointer;
    transition: var(--transition-smooth);
}

.search-result-item.nigun-result {
    padding: 0;
    gap: 0;
}

.search-result-item .result-main {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 15px;
    flex: 1;
    cursor: pointer;
}

.search-result-item .result-detail-btn {
    padding: 8px 15px;
    background: var(--color-nigun-pale);
    border: none;
    border-radius: 0 10px 10px 0;
    color: var(--color-nigun);
    font-family: inherit;
    font-size: 0.85em;
    cursor: pointer;
    transition: var(--transition-smooth);
    height: 100%;
}

.search-result-item .result-detail-btn:hover {
    background: var(--color-nigun);
    color: white;
}

.search-result-item:hover {
    background: var(--color-nigun-pale);
    transform: translateX(-5px);
}

.result-play {
    color: var(--color-nigun);
    font-size: 1.2em;
    opacity: 0;
    transition: var(--transition-smooth);
}

.search-result-item:hover .result-play {
    opacity: 1;
}

.result-icon {
    font-size: 1.3em;
    opacity: 0.7;
}

.result-info {
    flex: 1;
}

.result-name {
    font-weight: 600;
    color: var(--text-dark);
}

.result-meta {
    font-size: 0.85em;
    color: var(--text-muted);
    margin-top: 2px;
}

.search-results-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: 12px;
}

.search-result-card {
    padding: 15px;
    background: var(--bg-light);
    border-radius: 10px;
    cursor: pointer;
    transition: var(--transition-smooth);
    border-right: 4px solid transparent;
}

.search-result-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.search-result-card .result-name {
    font-size: 0.95em;
    margin-bottom: 5px;
}

.search-result-card .result-count {
    font-size: 0.8em;
    color: var(--text-muted);
}

/* Search result card category colors */
.search-result-card.result-chatzer .result-name {
    color: var(--color-chatzer-dark);
}

.search-result-card.result-chatzer:hover {
    background: var(--color-chatzer-pale);
}

.search-result-card.result-mechaber .result-name {
    color: var(--color-mechaber-dark);
}

.search-result-card.result-mechaber:hover {
    background: var(--color-mechaber-pale);
}

.search-result-card.result-nigun .result-name {
    color: var(--color-nigun-dark);
}

.search-result-card.result-nigun:hover {
    background: var(--color-nigun-pale);
}

.search-result-card.result-verter .result-name {
    color: var(--color-verter-dark);
}

.search-result-card.result-verter:hover {
    background: var(--color-verter-pale);
}

.search-result-card.result-zman .result-name {
    color: var(--color-zman-dark);
}

.search-result-card.result-zman:hover {
    background: var(--color-zman-pale);
}

.search-result-card.result-collection .result-name {
    color: var(--color-collection-dark);
}

.search-result-card.result-collection:hover {
    background: var(--color-collection-pale);
}

.search-result-card.result-resource .result-name {
    color: var(--color-resource-dark);
}

.search-result-card.result-resource:hover {
    background: var(--color-resource-pale);
}

.search-result-card.result-document .result-name {
    color: var(--color-document-dark);
}

.search-result-card.result-document:hover {
    background: var(--color-document-pale);
}

.search-result-card.result-album .result-name {
    color: var(--color-album-dark);
}

.search-result-card.result-album:hover {
    background: var(--color-album-pale);
}

.search-result-card.result-music .result-name {
    color: var(--color-music-dark);
}

.search-result-card.result-music:hover {
    background: var(--color-music-pale);
}

/* Universal Hover Effect for Search Result Cards */
.search-result-card {
    position: relative;
}

.search-result-card::after {
    content: '';
    position: absolute;
    border-radius: 10px;
    border: 2px solid transparent;
    /* Set by category class */
    opacity: 0;
    top: -6px;
    left: -6px;
    right: -6px;
    bottom: -6px;
    transition: opacity 0.2s ease, top 0s 0.2s, bottom 0s 0.2s, left 0s 0.2s, right 0s 0.2s;
    pointer-events: none;
    box-sizing: border-box;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

.search-result-card:hover::after {
    opacity: 1;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* Assign border colors based on result type */
.search-result-card.result-chatzer::after {
    border-color: var(--color-chatzer);
    box-shadow: 0 0 10px rgba(156, 91, 181, 0.15);
}

.search-result-card.result-mechaber::after {
    border-color: var(--color-mechaber);
    box-shadow: 0 0 10px rgba(239, 83, 80, 0.15);
}

.search-result-card.result-nigun::after {
    border-color: var(--color-nigun);
    box-shadow: 0 0 10px rgba(74, 124, 201, 0.15);
}

.search-result-card.result-verter::after {
    border-color: var(--color-verter);
    box-shadow: 0 0 10px rgba(255, 167, 38, 0.15);
}

.search-result-card.result-zman::after {
    border-color: var(--color-zman);
    box-shadow: 0 0 10px rgba(66, 165, 245, 0.15);
}

.search-result-card.result-collection::after {
    border-color: var(--color-collection);
    box-shadow: 0 0 10px rgba(76, 175, 80, 0.15);
}

.search-result-card.result-resource::after {
    border-color: var(--color-resource);
    box-shadow: 0 0 10px rgba(121, 85, 72, 0.15);
}

.search-result-card.result-document::after {
    border-color: var(--color-document);
    box-shadow: 0 0 10px rgba(96, 125, 139, 0.15);
}

.search-result-card.result-album::after {
    border-color: var(--color-album);
    box-shadow: 0 0 10px rgba(233, 30, 99, 0.15);
}

.search-result-card.result-music::after {
    border-color: var(--color-music);
    box-shadow: 0 0 10px rgba(67, 74, 84, 0.15);
}

.no-results {
    text-align: center;
    padding: 60px 20px;
    color: var(--text-muted);
}

.no-results-icon {
    font-size: 4em;
    margin-bottom: 20px;
    opacity: 0.5;
}

.no-results-hint {
    font-size: 0.9em;
    margin-top: 10px;
}

.card-meta {
    font-size: 0.8em;
    color: var(--primary);
    margin-bottom: 8px;
    padding: 4px 10px;
    background: var(--primary-pale);
    border-radius: 8px;
    display: inline-block;
}

.card-icon {
    display: none;
}

/* Show card icon for mechabrim as circular placeholder */
.page-theme.theme-mechaber .card-icon {
    display: flex;
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background: var(--color-mechaber-pale);
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.page-theme.theme-mechaber .card-icon .mechaber-icon {
    width: 37px;
    height: 55px;
    background-color: var(--color-mechaber);
    -webkit-mask: url('assets/mechaber-placeholder.svg') center/contain no-repeat;
    mask: url('assets/mechaber-placeholder.svg') center/contain no-repeat;
}

/* Hide icon when image loads successfully (inline style override) */
.page-theme.theme-mechaber .card-icon[style*="display:none"],
.page-theme.theme-mechaber .card-icon[style*="display: none"] {
    display: none !important;
}

.card-title {
    font-size: 1.2em;
    font-weight: 700;
    color: var(--primary-deep);
    flex: 1;
}

/* Mechaber formal name (טיטל + ערשטע נאמען + לעצטע נאמען - smaller, lighter) */
.card-mechaber-formal {
    display: block;
    font-size: 0.75em;
    font-weight: 400;
    color: var(--color-mechaber);
    margin-bottom: 3px;
}

/* Mechaber known name (גערופן + פלאץ + סופיקס - bigger, darker) */
.card-mechaber-known {
    font-size: 1.1em;
    font-weight: 700;
    color: var(--color-mechaber-dark);
}

.card-count {
    background: var(--gradient-main);
    color: white;
    padding: 4px 12px;
    border-radius: 15px;
    font-size: 0.85em;
    font-weight: 600;
}

.card-expand-icon {
    font-size: 1.2em;
    color: var(--text-muted);
    transition: var(--transition-smooth);
}

.card-arrow {
    font-size: 1.2em;
    color: var(--text-muted);
    transition: var(--transition-smooth);
}

.category-card:hover .card-arrow {
    color: var(--primary);
    transform: translateX(-5px);
}

.category-card.expanded .card-expand-icon {
    transform: rotate(180deg);
    color: var(--primary);
}

/* Detail Page Styles */
.detail-page {
    margin: 0 auto;
}

/* Detail pages with page-theme classes need full-width override */
.detail-page.page-theme.theme-album,
.detail-page.page-theme.theme-document,
.detail-page.page-theme.theme-resource {
    max-width: none;
}

.detail-page.page-theme.theme-album>*,
.detail-page.page-theme.theme-document>*,
.detail-page.page-theme.theme-resource>* {
    max-width: 900px;
    margin-left: auto;
    margin-right: auto;
}

/* Nigun Detail Page */
.nigun-detail-page {
    max-width: none;
    position: relative;
    margin-left: calc(-50vw + 50%);
    margin-right: calc(-50vw + 50%);
    padding-left: calc(50vw - 50%);
    padding-right: calc(50vw - 50%);
    min-height: calc(100vh - 180px);
    background: linear-gradient(180deg, var(--color-nigun-pale) 0%, color-mix(in srgb, var(--color-nigun-pale) 30%, #f8fafc) 300px, #f8fafc 100%);
}

.nigun-detail-page>* {
    max-width: 700px;
    margin-left: auto;
    margin-right: auto;
}

.nigun-detail-header {
    display: flex;
    gap: 20px;
    align-items: flex-start;
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
    padding: 30px;
    border-radius: 20px;
    margin-bottom: 25px;
    color: white;
}

.nigun-detail-icon {
    width: 80px;
    height: 80px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2.5em;
    flex-shrink: 0;
}

.nigun-detail-title-section {
    flex: 1;
}

.nigun-detail-title {
    font-size: 1.8em;
    margin: 0 0 12px 0;
    font-family: 'Heebo', sans-serif;
    font-weight: 600;
}

.nigun-mechaber-tag {
    margin-bottom: 10px;
    text-align: center;
}

.nigun-chatzer-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    justify-content: center;
}

.nigun-tag {
    display: inline-block;
    padding: 6px 14px;
    border-radius: 20px;
    font-size: 0.9em;
    cursor: pointer;
    transition: var(--transition-smooth);
    text-decoration: none;
}

.nigun-tag.mechaber-tag {
    background: var(--color-mechaber);
    color: white;
}

.nigun-tag.mechaber-tag:hover {
    background: var(--color-mechaber-dark);
}

.nigun-tag.chatzer-tag {
    background: var(--color-chatzer);
    color: white;
}

.nigun-tag.chatzer-tag:hover {
    background: var(--color-chatzer-dark);
}

/* Standalone chatzer tag for use in cards */
.chatzer-tag {
    display: inline-block;
    background: var(--color-chatzer);
    color: white;
    padding: 4px 12px;
    border-radius: 15px;
    font-size: 0.85em;
    cursor: pointer;
    transition: var(--transition-smooth);
}

.chatzer-tag:hover {
    background: var(--color-chatzer-dark);
    transform: scale(1.05);
}

/* Standalone mechaber tag for use in cards */
.mechaber-tag {
    display: inline-block;
    background: var(--color-mechaber);
    color: white;
    padding: 4px 12px;
    border-radius: 15px;
    font-size: 0.85em;
    cursor: pointer;
    transition: var(--transition-smooth);
}

.mechaber-tag:hover {
    background: var(--color-mechaber-dark);
    transform: scale(1.05);
}

/* Standalone verter tag for use in cards */
.verter-tag {
    display: inline-block;
    background: var(--color-verter);
    color: white;
    padding: 4px 12px;
    border-radius: 15px;
    font-size: 0.85em;
    cursor: pointer;
    transition: var(--transition-smooth);
}

.verter-tag:hover {
    background: var(--color-verter-dark);
    transform: scale(1.05);
}

/* Standalone zman tag for use in cards */
.zman-tag {
    display: inline-block;
    background: var(--color-zman);
    color: white;
    padding: 4px 12px;
    border-radius: 15px;
    font-size: 0.85em;
    cursor: pointer;
    transition: var(--transition-smooth);
}

.zman-tag:hover {
    background: var(--color-zman-dark);
    transform: scale(1.05);
}

/* Standalone collection tag for use in cards */
.collection-tag {
    display: inline-block;
    background: var(--color-collection);
    color: white;
    padding: 4px 12px;
    border-radius: 15px;
    font-size: 0.85em;
    cursor: pointer;
    transition: var(--transition-smooth);
}

.collection-tag:hover {
    background: var(--color-collection-dark);
    transform: scale(1.05);
}

/* Standalone nigun tag for use in cards */
.nigun-tag-pill {
    display: inline-block;
    background: var(--color-nigun);
    color: white;
    padding: 4px 12px;
    border-radius: 15px;
    font-size: 0.85em;
    cursor: pointer;
    transition: var(--transition-smooth);
}

.nigun-tag-pill:hover {
    background: var(--color-nigun-dark);
    transform: scale(1.05);
}

/* Standalone album tag for use in cards */
.album-tag {
    display: inline-block;
    background: var(--color-album);
    color: white;
    padding: 4px 12px;
    border-radius: 15px;
    font-size: 0.85em;
    cursor: pointer;
    transition: var(--transition-smooth);
}

.album-tag:hover {
    background: var(--color-album-dark);
    transform: scale(1.05);
}

/* Standalone document tag for use in cards */
.document-tag {
    display: inline-block;
    background: var(--color-document);
    color: white;
    padding: 4px 12px;
    border-radius: 15px;
    font-size: 0.85em;
    cursor: pointer;
    transition: var(--transition-smooth);
}

.document-tag:hover {
    background: var(--color-document-dark);
    transform: scale(1.05);
}

/* Standalone resource tag for use in cards */
.resource-tag {
    display: inline-block;
    background: var(--color-resource);
    color: white;
    padding: 4px 12px;
    border-radius: 15px;
    font-size: 0.85em;
    cursor: pointer;
    transition: var(--transition-smooth);
}

.resource-tag:hover {
    background: var(--color-resource-dark);
    transform: scale(1.05);
}

/* Tags container for displaying multiple tags */
.tags-container {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 10px;
}

/* Category-specific text colors - for use anywhere on the site */
.text-chatzer {
    color: var(--color-chatzer-dark);
}

.text-chatzer:hover {
    color: var(--color-chatzer);
}

.text-mechaber {
    color: var(--color-mechaber-dark);
}

.text-mechaber:hover {
    color: var(--color-mechaber);
}

.text-nigun {
    color: var(--color-nigun-dark);
}

.text-nigun:hover {
    color: var(--color-nigun);
}

.text-verter {
    color: var(--color-verter-dark);
}

.text-verter:hover {
    color: var(--color-verter);
}

.text-zman {
    color: var(--color-zman-dark);
}

.text-zman:hover {
    color: var(--color-zman);
}

.text-collection {
    color: var(--color-collection-dark);
}

.text-collection:hover {
    color: var(--color-collection);
}

.text-resource {
    color: var(--color-resource-dark);
}

.text-resource:hover {
    color: var(--color-resource);
}

.text-document {
    color: var(--color-document-dark);
}

.text-document:hover {
    color: var(--color-document);
}

.text-album {
    color: var(--color-album-dark);
}

.text-album:hover {
    color: var(--color-album);
}

.text-music {
    color: var(--color-music-dark);
}

.text-music:hover {
    color: var(--color-music);
}

/* Category text links with underlines */
.link-chatzer {
    color: var(--color-chatzer-dark);
    text-decoration: underline;
    text-decoration-color: var(--color-chatzer-light);
    cursor: pointer;
}

.link-chatzer:hover {
    color: var(--color-chatzer);
    text-decoration-color: var(--color-chatzer);
}

.link-mechaber {
    color: var(--color-mechaber-dark);
    text-decoration: underline;
    text-decoration-color: var(--color-mechaber-light);
    cursor: pointer;
}

.link-mechaber:hover {
    color: var(--color-mechaber);
    text-decoration-color: var(--color-mechaber);
}

.link-nigun {
    color: var(--color-nigun-dark);
    text-decoration: underline;
    text-decoration-color: var(--color-nigun-light);
    cursor: pointer;
}

.link-nigun:hover {
    color: var(--color-nigun);
    text-decoration-color: var(--color-nigun);
}

.link-verter {
    color: var(--color-verter-dark);
    text-decoration: underline;
    text-decoration-color: var(--color-verter-light);
    cursor: pointer;
}

.link-verter:hover {
    color: var(--color-verter);
    text-decoration-color: var(--color-verter);
}

.link-zman {
    color: var(--color-zman-dark);
    text-decoration: underline;
    text-decoration-color: var(--color-zman-light);
    cursor: pointer;
}

.link-zman:hover {
    color: var(--color-zman);
    text-decoration-color: var(--color-zman);
}

.link-collection {
    color: var(--color-collection-dark);
    text-decoration: underline;
    text-decoration-color: var(--color-collection-light);
    cursor: pointer;
}

.link-collection:hover {
    color: var(--color-collection);
    text-decoration-color: var(--color-collection);
}

.link-resource {
    color: var(--color-resource-dark);
    text-decoration: underline;
    text-decoration-color: var(--color-resource-light);
    cursor: pointer;
}

.link-resource:hover {
    color: var(--color-resource);
    text-decoration-color: var(--color-resource);
}

.link-document {
    color: var(--color-document-dark);
    text-decoration: underline;
    text-decoration-color: var(--color-document-light);
    cursor: pointer;
}

.link-document:hover {
    color: var(--color-document);
    text-decoration-color: var(--color-document);
}

.link-album {
    color: var(--color-album-dark);
    text-decoration: underline;
    text-decoration-color: var(--color-album-light);
    cursor: pointer;
}

.link-album:hover {
    color: var(--color-album);
    text-decoration-color: var(--color-album);
}

/* Nigun sections */
.nigun-section {
    background: white;
    border-radius: 15px;
    padding: 25px;
    box-shadow: var(--card-shadow);
    margin-bottom: 20px;
}

/* Mechaber Section */
.nigun-mechaber-section {
    background: white;
    border-radius: 15px;
    padding: 20px 25px;
    box-shadow: var(--card-shadow);
    margin-bottom: 20px;
}

.nigun-mechaber-title {
    font-weight: 600;
    color: var(--color-mechaber-dark);
    margin-bottom: 15px;
    font-size: 1em;
    text-align: center;
}

.nigun-mechaber-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    justify-content: center;
}

.nigun-mechaber-card {
    display: inline-flex;
    flex-direction: column;
    align-items: center;
    background: var(--bg-light);
    border-radius: 15px;
    padding: 20px 25px;
    cursor: pointer;
    transition: var(--transition-smooth);
    border: 2px solid transparent;
    position: relative;
    /* For pseudo-element */
}

/* Hover effect for Mechaber Card */
.nigun-mechaber-card::after {
    content: '';
    position: absolute;
    border-radius: 15px;
    border: 2px solid var(--color-mechaber);
    opacity: 0;
    top: -6px;
    left: -6px;
    right: -6px;
    bottom: -6px;
    transition: opacity 0.2s ease, top 0s 0.2s, bottom 0s 0.2s, left 0s 0.2s, right 0s 0.2s;
    pointer-events: none;
    box-sizing: border-box;
    box-shadow: 0 0 15px rgba(239, 83, 80, 0.15);
}

.nigun-mechaber-card:hover::after {
    opacity: 1;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.nigun-mechaber-card:hover {
    /* border-color handled by ::after now */
    background: white;
    transform: translateY(-2px);
    box-shadow: var(--card-shadow);
}

.nigun-mechaber-image {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    object-fit: cover;
    margin-bottom: 10px;
    border: 3px solid var(--color-mechaber-pale);
}

.nigun-mechaber-placeholder {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background: var(--color-mechaber-pale);
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 10px;
}

.nigun-mechaber-placeholder .mechaber-icon {
    width: 37px;
    height: 55px;
    background-color: var(--color-mechaber);
    -webkit-mask: url('assets/mechaber-placeholder.svg') center/contain no-repeat;
    mask: url('assets/mechaber-placeholder.svg') center/contain no-repeat;
}

.nigun-mechaber-name {
    font-weight: 600;
    color: var(--text-dark);
    text-align: center;
    font-size: 0.95em;
}

/* Personality Section */
.nigun-personality-section {
    background: white;
    border-radius: 15px;
    padding: 20px 25px;
    box-shadow: var(--card-shadow);
    margin-bottom: 20px;
}

.nigun-personality-title {
    font-weight: 600;
    color: var(--color-mechaber-dark);
    margin-bottom: 15px;
    font-size: 1em;
    text-align: center;
}

.nigun-personality-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    justify-content: center;
}

.nigun-personality-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    background: var(--bg-light);
    border-radius: 12px;
    padding: 15px;
    cursor: pointer;
    transition: var(--transition-smooth);
    border: 2px solid transparent;
    min-width: 100px;
}

.nigun-personality-card:hover {
    /* border-color handled by ::after */
    background: white;
    transform: translateY(-2px);
    box-shadow: var(--card-shadow);
}

/* Add hover effect for personality card */
.nigun-personality-card {
    position: relative;
}

.nigun-personality-card::after {
    content: '';
    position: absolute;
    border-radius: 12px;
    border: 2px solid var(--color-mechaber);
    opacity: 0;
    top: -6px;
    left: -6px;
    right: -6px;
    bottom: -6px;
    transition: opacity 0.2s ease, top 0s 0.2s, bottom 0s 0.2s, left 0s 0.2s, right 0s 0.2s;
    pointer-events: none;
    box-shadow: 0 0 15px rgba(239, 83, 80, 0.15);
}

.nigun-personality-card:hover::after {
    opacity: 1;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.nigun-personality-image {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    object-fit: cover;
    margin-bottom: 8px;
    border: 2px solid var(--color-mechaber-pale);
}

.nigun-personality-placeholder {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: var(--color-mechaber-pale);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5em;
    margin-bottom: 8px;
}

.nigun-personality-name {
    font-weight: 500;
    color: var(--text-dark);
    text-align: center;
    font-size: 0.85em;
}

.nigun-details-card {
    background: white;
    border-radius: 15px;
    padding: 20px 25px;
    box-shadow: var(--card-shadow);
    margin-bottom: 20px;
}

.nigun-detail-row {
    display: flex;
    padding: 12px 0;
    border-bottom: 1px solid var(--color-nigun-pale);
}

.nigun-detail-row:last-child {
    border-bottom: none;
}

.nigun-detail-label {
    font-weight: 600;
    color: var(--color-nigun-dark);
    min-width: 100px;
    flex-shrink: 0;
}

.nigun-detail-value {
    color: var(--text-dark);
    flex: 1;
}

.nigun-detail-value.nigun-tags-row {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
}

.nigun-tag-inline {
    display: inline-block;
    padding: 4px 12px;
    border-radius: 15px;
    font-size: 0.9em;
    cursor: pointer;
    transition: var(--transition-smooth);
}

.nigun-tag-inline.tag-scale {
    background: var(--color-music);
    color: white;
    cursor: default;
}

.nigun-tag-inline.tag-ritem {
    background: var(--color-music);
    color: white;
    cursor: default;
}

.nigun-tag-inline.tag-zman {
    background: var(--color-zman);
    color: white;
}

.nigun-tag-inline.tag-zman:hover {
    background: var(--color-zman-dark);
    transform: scale(1.05);
}

.nigun-tag-inline.tag-piyut {
    background: #2e8b2e;
    color: white;
}

.nigun-tag-inline.tag-piyut:hover {
    background: #1b5e20;
    transform: scale(1.05);
}

.nigun-tag-inline.tag-collection {
    background: var(--color-collection);
    color: white;
}

.nigun-tag-inline.tag-collection:hover {
    background: var(--color-collection-dark);
    transform: scale(1.05);
}

.nigun-tag-inline.tag-album {
    background: var(--color-album);
    color: white;
}

.nigun-tag-inline.tag-album:hover {
    background: var(--color-album-dark);
    transform: scale(1.05);
}

.nigun-tag-inline.tag-document {
    background: var(--color-document);
    color: white;
}

.nigun-tag-inline.tag-document:hover {
    background: var(--color-document-dark);
    transform: scale(1.05);
}

.nigun-tag-inline.tag-resource {
    background: var(--color-resource);
    color: white;
}

.nigun-tag-inline.tag-resource:hover {
    background: var(--color-resource-dark);
    transform: scale(1.05);
}

.nigun-tag-inline.tag-verter {
    background: var(--color-verter);
    color: white;
}

.nigun-tag-inline.tag-verter:hover {
    background: var(--color-verter-dark);
    transform: scale(1.05);
}

.nigun-section h3 {
    margin: 0 0 15px 0;
    color: var(--primary);
    font-size: 1.05em;
    padding-bottom: 10px;
    border-bottom: 2px solid var(--primary-pale);
}

.nigun-section-content {
    color: var(--text-dark);
}

.nigun-siman {
    font-size: 1.1em;
    font-style: italic;
    color: var(--text-secondary);
    margin-bottom: 10px;
}

.nigun-verter {
    font-size: 1em;
}

.nigun-verter .field-link {
    font-size: 1.1em;
    color: var(--color-verter);
    border-bottom-color: var(--color-verter-light);
}

.nigun-verter .field-link:hover {
    color: var(--color-verter-dark);
}

.nigun-info-text {
    line-height: 1.7;
    white-space: pre-wrap;
}

.nigun-music-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
}

.nigun-music-tag {
    display: inline-block;
    padding: 8px 16px;
    border-radius: 20px;
    font-size: 0.9em;
    cursor: pointer;
    transition: var(--transition-smooth);
    color: white;
}

.nigun-music-tag:hover {
    transform: scale(1.05);
    filter: brightness(0.9);
}

.nigun-music-tag.tag-scale,
.nigun-music-tag.tag-ritem {
    background: var(--color-music);
}

.nigun-music-tag.tag-zman {
    background: var(--color-zman);
}

.nigun-music-tag.tag-maure {
    background: var(--color-zman-light);
}

.nigun-music-tag.tag-collection {
    background: var(--color-collection);
}

.nigun-notn-link {
    display: inline-block;
    padding: 10px 20px;
    background: var(--primary);
    color: white;
    border-radius: 10px;
    text-decoration: none;
    transition: var(--transition-smooth);
}

.nigun-notn-link:hover {
    background: var(--primary-deep);
    transform: translateY(-2px);
}

/* Nigun recordings - Song card style */
.nigun-recordings-section {
    margin-bottom: 20px;
}

.nigun-recordings-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.nigun-recording-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 14px;
    border-radius: 10px;
    cursor: pointer;
    background: var(--color-nigun-pale);
    border: 1px solid transparent;
    box-shadow: 0 0 0 rgba(74, 124, 201, 0);
    transition: background 0.3s ease, border-color 0.3s ease, color 0.3s ease, box-shadow 0.3s ease, padding 0.3s ease;
}

.nigun-recording-item:hover {
    background: #4a7cc9;
    border-color: #4a7cc9;
    color: white;
    box-shadow: 0 4px 15px rgba(74, 124, 201, 0.4);
    padding: 14px 16px;
}

.nigun-recording-item:hover .nigun-recording-name {
    color: white !important;
}

.nigun-recording-item:hover .nigun-recording-meta {
    color: rgba(255, 255, 255, 0.9) !important;
}

.nigun-recording-item:hover .nigun-recording-meta .song-meta-tag {
    opacity: 0.9;
}

.nigun-recording-item:hover .nigun-recording-number {
    background: rgba(255, 255, 255, 0.25) !important;
    color: white !important;
}

.nigun-recording-item.active {
    background: #4a7cc9 !important;
    color: white !important;
    border-color: #4a7cc9 !important;
}

.nigun-recording-item.active:hover {
    background: #3d6bb5 !important;
}

.nigun-recording-item.active .nigun-recording-name {
    color: white !important;
}

.nigun-recording-item.active .nigun-recording-meta {
    color: rgba(255, 255, 255, 0.9) !important;
}

.nigun-recording-item.active .nigun-recording-meta .song-meta-tag {
    opacity: 0.9;
}

.nigun-recording-item.active .nigun-recording-number {
    background: rgba(255, 255, 255, 0.2);
    color: white;
}

.nigun-recording-number {
    width: 30px;
    height: 30px;
    background: white;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    font-size: 0.85em;
    color: var(--color-nigun);
    flex-shrink: 0;
}

.nigun-recording-info {
    flex: 1;
    min-width: 0;
}

.nigun-recording-name {
    font-weight: 600;
    font-size: 1em;
    margin-bottom: 3px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    color: var(--color-nigun-dark);
}

.nigun-recording-name.default-name {
    color: var(--color-nigun-light);
}

.nigun-recording-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
    align-items: center;
    font-size: 0.85em;
}

/* Override tag styles within recording meta to be smaller */
.nigun-recording-meta .song-meta-tag {
    padding: 2px 8px !important;
    font-size: 0.75em !important;
    border-radius: 10px !important;
}

.nigun-recording-play-btn {
    width: 38px;
    height: 38px;
    background: var(--color-nigun);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.9em;
    flex-shrink: 0;
    border: none;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(74, 124, 201, 0.3);
    transition: var(--transition-smooth);
}

.nigun-recording-play-btn:hover {
    background: var(--color-nigun-dark);
    transform: scale(1.1);
}

.nigun-recording-item.active .nigun-recording-play-btn {
    background: white;
    color: var(--color-nigun);
}

/* Wave animation for playing recording */
.nigun-recording-wave {
    display: flex;
    align-items: center;
    gap: 2px;
    height: 20px;
    margin-left: 8px;
}

.nigun-recording-wave .wave-bar {
    width: 3px;
    background: white;
    border-radius: 3px;
    animation: waveStream 0.8s ease-in-out infinite;
}

.nigun-recording-wave .wave-bar:nth-child(1) {
    height: 6px;
    animation-delay: 0s;
}

.nigun-recording-wave .wave-bar:nth-child(2) {
    height: 12px;
    animation-delay: 0.1s;
}

.nigun-recording-wave .wave-bar:nth-child(3) {
    height: 8px;
    animation-delay: 0.2s;
}

.nigun-recording-wave .wave-bar:nth-child(4) {
    height: 14px;
    animation-delay: 0.15s;
}

.nigun-recording-item.paused .nigun-recording-wave .wave-bar {
    animation-play-state: paused;
}

/* Star rating for player - INTERACTIVE */
.player-rating {
    display: flex;
    align-items: center;
    gap: 2px;
    margin-right: auto;
    padding-left: 15px;
    cursor: pointer;
    flex-shrink: 0;
}

.player-rating-star {
    font-size: 1.1em;
    color: #555;
    transition: transform 0.15s ease, opacity 0.2s ease;
    cursor: pointer;
}

.player-rating-star:hover {
    transform: scale(1.2);
}

/* All 5 stars container */
.player-rating-stars {
    display: flex;
    gap: 2px;
}

/* Each star has its own gradient slice for smooth transitions */
.player-rating-stars .player-rating-star {
    background: linear-gradient(90deg, var(--color-nigun) 0%, var(--color-chatzer) 100%);
    background-size: 500% 100%;
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    transition: -webkit-text-fill-color 0.25s ease;
}

/* Position each star's gradient slice */
.player-rating-stars .player-rating-star:nth-child(1) {
    background-position: 0% 0;
}

.player-rating-stars .player-rating-star:nth-child(2) {
    background-position: 25% 0;
}

.player-rating-stars .player-rating-star:nth-child(3) {
    background-position: 50% 0;
}

.player-rating-stars .player-rating-star:nth-child(4) {
    background-position: 75% 0;
}

.player-rating-stars .player-rating-star:nth-child(5) {
    background-position: 100% 0;
}

/* Empty stars are gray */
.player-rating-stars .player-rating-star.empty {
    -webkit-text-fill-color: #ccc;
}

/* Hover preview - gray out non-preview stars */
.player-rating-stars:hover .player-rating-star:not(.hover-preview) {
    -webkit-text-fill-color: #ccc;
}

/* Hover-preview stars show gradient */
.player-rating-stars:hover .player-rating-star.hover-preview {
    -webkit-text-fill-color: transparent;
}

.player-rating:hover .player-rating-stars {
    filter: brightness(1.05);
}

/* Saving state */
.player-rating.saving {
    pointer-events: none;
    opacity: 0.6;
}

.player-rating.saving .player-rating-stars {
    animation: ratingPulse 1s ease-in-out infinite;
}

@keyframes ratingPulse {

    0%,
    100% {
        opacity: 0.6;
    }

    50% {
        opacity: 1;
    }
}

/* Images section */
.nigun-images-section {
    clear: both;
    margin-bottom: 20px;
}

.nigun-images-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: 15px;
    margin-top: 15px;
}

.nigun-image-item {
    background: var(--bg-light);
    border-radius: 10px;
    overflow: hidden;
    cursor: pointer;
    transition: var(--transition-smooth);
    border: 1px solid var(--border-color);
}

.nigun-image-item:hover {
    transform: scale(1.02);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
}

.nigun-image-item img {
    width: 100%;
    height: 150px;
    object-fit: cover;
    display: block;
}

.nigun-image-name {
    padding: 10px;
    font-size: 0.8em;
    color: var(--text-muted);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    background: white;
}

.nigun-image-details {
    padding: 5px 10px 10px;
    font-size: 0.75em;
    color: var(--text-secondary);
    background: white;
    border-top: 1px solid var(--border-color);
}

/* PDFs section */
.nigun-pdfs-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.nigun-pdf-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 15px;
    background: var(--bg-light);
    border-radius: 10px;
    text-decoration: none;
    color: var(--text-dark);
    transition: var(--transition-smooth);
}

.nigun-pdf-item:hover {
    background: var(--color-document-pale);
}

.nigun-pdf-icon {
    font-size: 1.5em;
}

.nigun-pdf-name {
    flex: 1;
    font-size: 0.95em;
}

.nigun-pdf-action {
    background: var(--color-document);
    color: white;
    padding: 5px 12px;
    border-radius: 15px;
    font-size: 0.85em;
}

/* Other Media section (6th attachment) */
.nigun-other-media-section {
    margin-bottom: 20px;
}

.nigun-other-media-content {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.nigun-other-media-text {
    line-height: 1.7;
    white-space: pre-wrap;
    color: var(--text-dark);
    background: var(--bg-light);
    padding: 15px;
    border-radius: 10px;
}

.nigun-other-media-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 15px;
}

/* Video items */
.nigun-video-item {
    background: var(--bg-light);
    border-radius: 10px;
    overflow: hidden;
    cursor: pointer;
    transition: var(--transition-smooth);
    border: 1px solid var(--border-color);
    position: relative;
}

.nigun-video-item:hover {
    transform: scale(1.02);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
}

.nigun-video-item video {
    width: 100%;
    height: 150px;
    object-fit: cover;
    display: block;
}

.nigun-video-play-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(0, 0, 0, 0.3);
    opacity: 1;
    transition: opacity 0.3s ease;
}

.nigun-video-item:hover .nigun-video-play-overlay {
    opacity: 0;
}

.nigun-video-play-icon {
    width: 50px;
    height: 50px;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5em;
    color: var(--primary);
}

.nigun-video-name {
    padding: 10px;
    font-size: 0.8em;
    color: var(--text-muted);
    background: white;
    text-align: center;
}

/* PDF preview box */
.nigun-pdf-preview {
    background: var(--bg-light);
    border-radius: 10px;
    overflow: hidden;
    cursor: pointer;
    transition: var(--transition-smooth);
    border: 1px solid var(--border-color);
    display: flex;
    flex-direction: column;
}

.nigun-pdf-preview:hover {
    transform: scale(1.02);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
}

.nigun-pdf-preview-box {
    height: 120px;
    background: linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: var(--color-document);
}

.nigun-pdf-preview-icon {
    font-size: 3em;
    margin-bottom: 5px;
}

.nigun-pdf-preview-label {
    font-size: 0.8em;
    font-weight: 600;
}

.nigun-pdf-preview-name {
    padding: 10px;
    font-size: 0.8em;
    color: var(--text-muted);
    background: white;
    text-align: center;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* File download items */
.nigun-files-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.nigun-file-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 15px;
    background: var(--bg-light);
    border-radius: 10px;
    text-decoration: none;
    color: var(--text-dark);
    transition: var(--transition-smooth);
    border: 1px solid var(--border-color);
}

.nigun-file-item:hover {
    background: var(--primary-pale);
    border-color: var(--primary-light);
}

.nigun-file-icon {
    font-size: 1.3em;
}

.nigun-file-name {
    flex: 1;
    font-size: 0.9em;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.nigun-file-download {
    background: var(--primary);
    color: white;
    padding: 5px 12px;
    border-radius: 15px;
    font-size: 0.8em;
}

/* Video modal/fullscreen */
.video-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.95);
    z-index: 2000;
    justify-content: center;
    align-items: center;
    padding: 20px;
}

.video-modal.active {
    display: flex;
}

.video-modal video {
    max-width: 90%;
    max-height: 90%;
}

.video-modal-close {
    position: absolute;
    top: 20px;
    right: 20px;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.2);
    border: none;
    border-radius: 50%;
    color: white;
    font-size: 1.5em;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
}

.video-modal-close:hover {
    background: rgba(255, 255, 255, 0.3);
}

/* Image modal */
.image-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.9);
    z-index: 2000;
    justify-content: center;
    align-items: center;
    padding: 20px;
}

.image-modal.active {
    display: flex;
}

.image-modal img {
    max-width: 90%;
    max-height: 90%;
    object-fit: contain;
    border-radius: 8px;
}

.image-modal-close {
    position: absolute;
    top: 20px;
    right: 20px;
    background: white;
    border: none;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    font-size: 1.5em;
    cursor: pointer;
}

.back-button {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 10px 20px;
    background: white;
    border: 2px solid var(--primary-pale);
    border-radius: 25px;
    color: var(--primary);
    font-size: 0.95em;
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition-smooth);
    margin-bottom: 25px;
    font-family: inherit;
}

.back-button:hover {
    background: var(--primary-pale);
    border-color: var(--primary);
}

.detail-header {
    display: flex;
    flex-direction: column;
    background: white;
    border-radius: 16px;
    box-shadow: var(--card-shadow);
    margin-bottom: 25px;
    overflow: hidden;
}

.detail-category-bar {
    padding: 8px 20px;
    font-size: 0.85em;
    font-weight: 600;
    background: var(--gradient-main);
    color: white;
}

.detail-header-content {
    display: flex;
    flex-direction: row;
    gap: 20px;
    align-items: center;
    padding: 25px;
}

.detail-header-content.no-image {
    justify-content: center;
    text-align: center;
}

.detail-header-text {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.detail-header-content.no-image .detail-header-text {
    align-items: center;
}

.detail-title {
    font-size: 1.8em;
    font-weight: 600;
    font-family: 'Heebo', sans-serif;
    color: var(--primary-deep);
    margin: 0;
}

/* Category-themed detail pages */




/* Mechaber formal name on profile (small, lighter) */
.mechaber-formal {
    display: block;
    font-size: 0.55em;
    font-weight: 400;
    color: var(--color-mechaber);
    margin-bottom: 6px;
}

/* Mechaber known name on profile (big, darker) */
.mechaber-known {
    font-size: 1em;
    font-weight: 700;
    color: var(--color-mechaber-dark);
}









/* Full-width detail page theme backgrounds */
.detail-page.theme-chatzer,
.detail-page.theme-mechaber,
.detail-page.theme-verter,
.detail-page.theme-zman,
.detail-page.theme-piyut,
.detail-page.theme-collection {
    position: relative;
    margin-left: calc(-50vw + 50%);
    margin-right: calc(-50vw + 50%);
    padding-left: calc(50vw - 50%);
    padding-right: calc(50vw - 50%);
    min-height: calc(100vh - 180px);
}

.detail-page.theme-chatzer {
    background: linear-gradient(180deg, var(--color-chatzer-pale) 0%, color-mix(in srgb, var(--color-chatzer-pale) 30%, #f8fafc) 300px, #f8fafc 100%);
}

.detail-page.theme-mechaber {
    background: linear-gradient(180deg, var(--color-mechaber-pale) 0%, color-mix(in srgb, var(--color-mechaber-pale) 30%, #f8fafc) 300px, #f8fafc 100%);
}

.detail-page.theme-verter {
    background: linear-gradient(180deg, var(--color-verter-pale) 0%, color-mix(in srgb, var(--color-verter-pale) 30%, #f8fafc) 300px, #f8fafc 100%);
}

.detail-page.theme-zman {
    background: linear-gradient(180deg, var(--color-zman-pale) 0%, color-mix(in srgb, var(--color-zman-pale) 30%, #f8fafc) 300px, #f8fafc 100%);
}

.detail-page.theme-piyut {
    background: linear-gradient(180deg, #e8f5e9 0%, color-mix(in srgb, #e8f5e9 30%, #f8fafc) 300px, #f8fafc 100%);
}

.detail-page.theme-collection {
    background: linear-gradient(180deg, var(--color-collection-pale) 0%, color-mix(in srgb, var(--color-collection-pale) 30%, #f8fafc) 300px, #f8fafc 100%);
}

/* Center content within full-width themed detail pages */
.detail-page.theme-chatzer>*,
.detail-page.theme-mechaber>*,
.detail-page.theme-verter>*,
.detail-page.theme-zman>*,
.detail-page.theme-piyut>*,
.detail-page.theme-collection>* {
    max-width: 900px;
    margin-left: auto;
    margin-right: auto;
}

/* Detail page sections and actions */
.detail-section {
    background: white;
    border-radius: 15px;
    padding: 20px 25px;
    box-shadow: var(--card-shadow);
    margin-bottom: 20px;
}

.detail-section h3 {
    margin: 0 0 15px 0;
    color: var(--primary);
    font-size: 1.05em;
    padding-bottom: 10px;
    border-bottom: 2px solid var(--primary-pale);
}

.detail-actions {
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
    margin-bottom: 20px;
}

.detail-action-btn {
    padding: 12px 25px;
    border-radius: 25px;
    font-size: 1em;
    font-weight: 600;
    text-decoration: none;
    cursor: pointer;
    border: none;
    transition: var(--transition-smooth);
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

.detail-pdf-preview {
    margin-bottom: 20px;
    border-radius: 15px;
    overflow: hidden;
    box-shadow: var(--card-shadow);
}


.detail-subtitle {
    font-size: 1.1em;
    color: var(--text-muted);
}

.detail-chatzer {
    margin-top: 10px;
}

.detail-year {
    font-size: 0.95em;
    color: var(--text-muted);
}

.resource-phone-display {
    font-size: 1.2em;
    font-weight: 600;
    color: var(--color-resource-dark);
    background: var(--color-resource-pale);
    padding: 15px 20px;
    border-radius: 10px;
    text-align: center;
    white-space: pre-line;
    line-height: 1.8;
}

.detail-image {
    width: 120px;
    height: 120px;
    border-radius: 15px;
    object-fit: cover;
    border: 4px solid var(--primary-pale);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    flex-shrink: 0;
}

/* Round images for mechabrim */
.mechaber-detail .detail-image,
.detail-page[data-type="mechabrim"] .detail-image {
    border-radius: 50%;
}

/* Placeholder for mechabrim without images */
.detail-image-placeholder {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    background: var(--color-mechaber-pale);
    display: flex;
    align-items: center;
    justify-content: center;
    border: 4px solid var(--color-mechaber-pale);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    flex-shrink: 0;
}

.detail-image-placeholder .mechaber-icon {
    width: 55px;
    height: 82px;
    background-color: var(--color-mechaber);
    -webkit-mask: url('assets/mechaber-placeholder.svg') center/contain no-repeat;
    mask: url('assets/mechaber-placeholder.svg') center/contain no-repeat;
}

.detail-icon {
    display: none;
}

.detail-type-badge {
    display: inline-block;
    background: var(--gradient-main);
    color: white;
    padding: 5px 15px;
    border-radius: 20px;
    font-size: 0.85em;
    font-weight: 600;
}

.detail-badges {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    margin-bottom: 12px;
    justify-content: center;
}

.detail-tag-badge {
    margin-bottom: 10px;
}

.mechaber-tag-name {
    display: inline-block;
    background: linear-gradient(135deg, var(--color-mechaber) 0%, var(--color-mechaber-light) 100%);
    color: white;
    padding: 6px 16px;
    border-radius: 20px;
    font-size: 0.85em;
    font-weight: 600;
}

.detail-life-dates {
    margin-top: 8px;
    font-size: 1em;
    color: var(--text-secondary);
    font-style: italic;
}

.detail-chatzer-badge {
    display: inline-block;
    background: var(--color-chatzer);
    color: white;
    padding: 5px 15px;
    border-radius: 20px;
    font-size: 0.85em;
    font-weight: 600;
    transition: var(--transition-smooth);
}

.detail-chatzer-badge:hover {
    background: var(--color-chatzer-dark);
    transform: scale(1.05);
}

.detail-zmanim-badges {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 10px;
}

.detail-zman-badge {
    background: var(--primary-pale);
    color: var(--primary-deep);
    padding: 5px 12px;
    border-radius: 15px;
    font-size: 0.85em;
    cursor: pointer;
    transition: var(--transition-smooth);
}

.detail-zman-badge:hover {
    background: var(--gradient-main);
    color: white;
    transform: scale(1.05);
}

.detail-subtitle {
    margin-top: 10px;
    font-size: 1em;
    color: var(--text-muted);
    display: flex;
    align-items: center;
    gap: 8px;
    flex-wrap: wrap;
}

.detail-makor-text {
    color: var(--primary);
    font-weight: 600;
}

.detail-mareh-text {
    color: var(--text-dark);
}

.detail-zman-text {
    color: var(--primary);
    font-weight: 600;
}

.detail-separator {
    color: var(--text-muted);
}

.detail-title {
    font-size: 2em;
    color: var(--primary-deep);
    font-family: 'Heebo', sans-serif;
    font-weight: 600;
    margin-bottom: 0;
    line-height: 1.3;
}

.detail-description-section {
    background: white;
    padding: 25px;
    border-radius: 20px;
    box-shadow: var(--card-shadow);
    margin-bottom: 25px;
}

.detail-description-section h3 {
    color: var(--primary);
    font-size: 1.2em;
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 2px solid var(--primary-pale);
}

.detail-description-content {
    font-size: 1em;
    color: var(--text-dark);
    line-height: 1.8;
}

.detail-description-content h4 {
    color: var(--primary-deep);
    font-size: 1.1em;
    margin: 20px 0 10px 0;
}

.detail-description-content a {
    color: var(--primary);
    text-decoration: underline;
}

.detail-description-content strong {
    color: var(--primary-deep);
}

.detail-info-section {
    background: white;
    padding: 25px;
    border-radius: 20px;
    box-shadow: var(--card-shadow);
    margin-bottom: 25px;
}

.detail-info-section h3 {
    color: var(--primary);
    font-size: 1.2em;
    margin-bottom: 20px;
    padding-bottom: 10px;
    border-bottom: 2px solid var(--primary-pale);
}

.detail-info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 15px;
}

.detail-info-item {
    background: #f8fafc;
    padding: 12px 15px;
    border-radius: 10px;
    border-right: 3px solid var(--primary);
}

.detail-info-label {
    display: block;
    font-size: 0.8em;
    color: var(--text-muted);
    margin-bottom: 4px;
}

.detail-info-value {
    display: block;
    font-size: 1em;
    color: var(--text-dark);
    font-weight: 600;
}

.detail-songs-section {
    background: white;
    padding: 25px;
    border-radius: 20px;
    box-shadow: var(--card-shadow);
}

.detail-songs-section.detail-related-songs {
    margin-top: 25px;
    background: linear-gradient(135deg, #fafafa 0%, #f5f5f5 100%);
    border: 1px solid var(--color-mechaber-pale);
}

.detail-songs-section.detail-related-songs h3 {
    color: var(--color-mechaber-dark);
}

.detail-mechabrim-section {
    background: white;
    padding: 25px;
    border-radius: 20px;
    box-shadow: var(--card-shadow);
    margin-bottom: 25px;
}

.detail-mechabrim-section h3 {
    color: var(--primary);
    font-size: 1.2em;
    margin-bottom: 20px;
    padding-bottom: 10px;
    border-bottom: 2px solid var(--primary-pale);
}

.mechabrim-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: 15px;
}

.mechaber-card {
    background: #f8fafc;
    border-radius: 12px;
    padding: 15px;
    text-align: center;
    cursor: pointer;
    transition: var(--transition-smooth);
    border: 2px solid transparent;
    position: relative;
    /* For pseudo-element */
}

/* Hover effect for Profile Mechaber Card */
.mechaber-card::after {
    content: '';
    position: absolute;
    top: -6px;
    left: -6px;
    right: -6px;
    bottom: -6px;
    border-radius: 12px;
    border: 2px solid var(--color-mechaber);
    /* Or primary if generic */
    opacity: 0;
    transition: opacity 0.2s ease, top 0s 0.2s, bottom 0s 0.2s, left 0s 0.2s, right 0s 0.2s;
    pointer-events: none;
    box-sizing: border-box;
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
}

/* Note: Mechabrim section uses primary usually, but let's check context. 
   It seems to be in a general list. I'll use primary for safety if not set, or mechaber color if strictly mechaber.
   Line 5420 used border-color: var(--primary). I'll stick to primary or allow theme override. */

.mechaber-card::after {
    border-color: var(--primary);
    box-shadow: 0 0 15px rgba(123, 31, 162, 0.15);
}

.mechaber-card:hover::after {
    opacity: 1;
    transform: scale(1);
    transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.mechaber-card:hover {
    /* border-color handled by ::after */
    transform: translateY(-3px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
}

.mechaber-card-image {
    width: 70px;
    height: 70px;
    border-radius: 50%;
    object-fit: cover;
    margin-bottom: 10px;
    border: 3px solid var(--primary-pale);
}

.mechaber-card-icon {
    width: 70px;
    height: 70px;
    border-radius: 50%;
    background: var(--primary-pale);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.8em;
    margin: 0 auto 10px auto;
}

.mechaber-card-name {
    font-size: 0.9em;
    font-weight: 600;
    color: var(--primary-deep);
    line-height: 1.3;
}

.detail-verter-section {
    background: white;
    padding: 25px;
    border-radius: 20px;
    box-shadow: var(--card-shadow);
    margin-bottom: 25px;
}

.detail-verter-section h3 {
    color: var(--primary);
    font-size: 1.2em;
    margin-bottom: 20px;
    padding-bottom: 10px;
    border-bottom: 2px solid var(--primary-pale);
}

.verter-content {
    background: linear-gradient(135deg, #f8fafc 0%, #fff 100%);
    padding: 25px;
    border-radius: 15px;
    border-right: 4px solid var(--accent-gold);
}

.verter-line {
    font-size: 1.1em;
    line-height: 1.8;
    color: var(--text-dark);
    font-family: 'David Libre', serif;
}

.verter-line.verter-empty {
    height: 15px;
}

.detail-songs-section h3 {
    color: var(--primary);
    font-size: 1.2em;
    margin-bottom: 20px;
    padding-bottom: 10px;
    border-bottom: 2px solid var(--primary-pale);
}


@media (max-width: 768px) {
    .detail-header {
        flex-direction: column;
        align-items: center;
        text-align: center;
    }

    .detail-image,
    .detail-icon {
        width: 120px;
        height: 120px;
    }

    .detail-title {
        font-size: 1.5em;
    }

    .detail-info-grid {
        grid-template-columns: 1fr;
    }
}

/* Expanded card info (hidden by default) */
.card-expanded-info {
    display: none;
    margin: 15px 0;
    padding: 15px;
    background: linear-gradient(135deg, var(--primary-pale) 0%, #fff 100%);
    border-radius: 12px;
    border: 1px solid var(--primary-pale);
}

.category-card.expanded .card-expanded-info {
    display: block;
}

.card-image-large {
    width: 120px;
    height: 120px;
    border-radius: 12px;
    object-fit: cover;
    float: right;
    margin-left: 15px;
    margin-bottom: 10px;
    border: 3px solid white;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
}

.card-full-description {
    font-size: 0.95em;
    color: var(--text-dark);
    line-height: 1.6;
    margin-bottom: 12px;
}

.card-info-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    clear: both;
}

.info-tag {
    background: white;
    color: var(--primary);
    padding: 5px 12px;
    border-radius: 15px;
    font-size: 0.85em;
    border: 1px solid var(--primary-pale);
}

.card-songs-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 10px;
    padding-bottom: 10px;
    border-bottom: 2px solid var(--primary-pale);
}

.card-songs-title {
    font-weight: 700;
    color: var(--primary);
    font-size: 1em;
}

/* Songs List inside Card */
.card-songs {
    display: none;
    margin-top: 20px;
    border-top: 1px solid var(--primary-pale);
    padding-top: 15px;
}

.category-card.expanded .card-songs {
    display: block;
}

.songs-list {
    list-style: none;
    max-height: 400px;
    overflow-y: auto;
}

.song-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 14px;
    border-radius: 10px;
    cursor: pointer;
    background: var(--color-nigun-pale);
    border: none;
    box-shadow: 0 2px 8px rgba(74, 124, 201, 0.1);
    transition: box-shadow 0.3s ease;
    position: relative;
}

/* Border effect using pseudo-element - fade from outside to inside */
.song-item::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    border-radius: 10px;
    border: 2px solid var(--color-nigun);
    opacity: 0;
    top: -6px;
    left: -6px;
    right: -6px;
    bottom: -6px;
    /* Leave transition: fade out, then reset scale invisibly */
    transition: opacity 0.2s ease, top 0s 0.2s, bottom 0s 0.2s, left 0s 0.2s, right 0s 0.2s;
    pointer-events: none;
    box-sizing: border-box;
    box-shadow: 0 0 15px rgba(74, 124, 201, 0.1);
}

.song-item:hover::after {
    opacity: 1;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    /* Enter transition: animate scale and opacity immediately */
    transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.song-item .song-name,
.song-item .song-number {
    transition: color 0.3s ease, background 0.3s ease;
}

.song-item:hover {
    box-shadow: 0 6px 20px rgba(74, 124, 201, 0.35);
}

.song-item.no-audio {
    background: var(--bg-light);
    opacity: 0.55;
    filter: grayscale(40%);
}

.song-item.no-audio:hover {
    opacity: 0.9;
    filter: grayscale(0%);
    box-shadow: 0 6px 20px rgba(74, 124, 201, 0.35);
}

.song-item.no-audio .song-number {
    background: var(--bg-light);
    color: var(--text-muted);
}

.song-item.no-audio .song-name {
    color: var(--text-muted);
}

.song-item.active {
    background: #4a7cc9 !important;
    color: white !important;
    box-shadow: 0 4px 15px rgba(74, 124, 201, 0.4) !important;
}

.song-item.active::after {
    opacity: 0 !important;
}

.song-item.active:hover {
    background: #3d6bb5 !important;
    box-shadow: 0 6px 20px rgba(74, 124, 201, 0.5) !important;
}

.song-item.active .song-meta {
    color: rgba(255, 255, 255, 0.9) !important;
}

.song-item.active .song-name {
    color: white !important;
}

.song-number {
    width: 30px;
    height: 30px;
    background: white;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    font-size: 0.85em;
    color: var(--color-nigun);
    flex-shrink: 0;
}

.song-item.active .song-number {
    background: rgba(255, 255, 255, 0.2);
    color: white;
}

.song-info {
    flex: 1;
    min-width: 0;
}

.song-name {
    font-weight: 600;
    font-size: 1em;
    margin-bottom: 3px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    color: var(--color-nigun-dark);
}

.song-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
    align-items: center;
}

.song-meta-link {
    color: var(--text-muted);
    text-decoration: none;
    transition: var(--transition-smooth);
}

.song-meta-link:hover {
    color: var(--primary);
    text-decoration: underline;
}

.song-item.active .song-meta-link {
    color: rgba(255, 255, 255, 0.8);
}

.song-item.active .song-meta-link:hover {
    color: white;
}

/* Song meta tags - smaller pill buttons for song list */
.song-meta-tag {
    padding: 2px 8px !important;
    font-size: 0.75em !important;
    border-radius: 10px !important;
}

.song-play-btn {
    width: 35px;
    height: 35px;
    background: var(--gradient-main);
    border: none;
    border-radius: 50%;
    color: white;
    font-size: 0.9em;
    cursor: pointer;
    opacity: 0;
    transition: var(--transition-smooth);
    flex-shrink: 0;
}

.song-details-btn {
    padding: 6px 12px;
    background: var(--color-nigun-pale);
    border: 1px solid var(--color-nigun-light);
    border-radius: 8px;
    color: var(--color-nigun-dark);
    font-size: 0.8em;
    cursor: pointer;
    transition: var(--transition-smooth);
    flex-shrink: 0;
    font-family: inherit;
}

.song-details-btn:hover {
    background: var(--color-nigun);
    color: white;
    border-color: var(--color-nigun);
}

.song-item.active .song-details-btn {
    background: rgba(255, 255, 255, 0.2);
    color: white;
    border-color: rgba(255, 255, 255, 0.3);
}

/* New Play Button Styling */
.song-play-btn-new {
    width: 38px;
    height: 38px;
    background: var(--color-nigun);
    border: none;
    border-radius: 50%;
    color: white;
    font-size: 0.9em;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(74, 124, 201, 0.3);
}

.song-play-btn-new:hover {
    background: var(--color-nigun-dark);
    transform: scale(1.1);
    box-shadow: 0 4px 15px rgba(74, 124, 201, 0.5);
}

.song-play-btn-new .play-icon,
.song-play-btn-new .pause-icon {
    position: absolute;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.song-play-btn-new .play-icon {
    opacity: 1;
    transform: scale(1);
}

.song-play-btn-new .pause-icon {
    opacity: 0;
    transform: scale(0.5);
}

.song-play-btn-new.playing .play-icon {
    opacity: 0;
    transform: scale(0.5);
}

.song-play-btn-new.playing .pause-icon {
    opacity: 1;
    transform: scale(1);
}

.song-item.active .song-play-btn-new {
    background: rgba(255, 255, 255, 0.25);
    color: white;
}

.song-item.active .song-play-btn-new:hover {
    background: white !important;
    color: var(--color-nigun) !important;
}

/* Recording play button - smaller version */
.rec-play-btn {
    width: 32px !important;
    height: 32px !important;
    flex-shrink: 0;
}

.rec-play-btn svg {
    width: 12px !important;
    height: 12px !important;
}

/* ===== ACTIVE NIGUN & RECORDING COLOR SCHEME =====
 * Color hierarchy (darkest to lightest):
 * 1. Active nigun header: var(--color-nigun-dark) #2d5aa0
 * 2. Active nigun body: var(--color-nigun) #4a7cc9  
 * 3. Recordings container: var(--color-nigun-light) with transparency
 * 4. Active recording: White with blue glow
 */

/* Active recording row - beautiful highlight */
.song-item-recording.active-recording {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(227, 242, 253, 0.95) 100%);
    border-radius: 10px;
    box-shadow: 0 2px 12px rgba(74, 124, 201, 0.35),
        inset 0 0 0 2px var(--color-nigun-light);
    transform: translateX(-3px);
}

.song-item-recording.active-recording .song-item-rec-num {
    background: linear-gradient(135deg, var(--color-nigun) 0%, var(--color-nigun-dark) 100%);
    color: white;
    box-shadow: 0 2px 8px rgba(74, 124, 201, 0.4);
}

.song-item-recording.active-recording .song-item-rec-name {
    color: var(--color-nigun-dark);
    font-weight: 600;
}

.song-item-recording.active-recording .rec-play-btn {
    background: var(--color-nigun) !important;
    color: white !important;
    box-shadow: 0 2px 8px rgba(74, 124, 201, 0.4);
}

/* Active nigun with expanded recordings - enhanced header */
.song-item-expanded.active .song-item-header,
.song-item-full.active .song-item-header {
    background: linear-gradient(135deg, var(--color-nigun-dark) 0%, var(--color-nigun) 100%);
    border-radius: 12px 12px 0 0;
}

/* Recordings container in active nigun */
.song-item-expanded.active .song-item-recordings,
.song-item-full.active .song-full-recordings {
    background: linear-gradient(180deg, rgba(74, 124, 201, 0.15) 0%, rgba(74, 124, 201, 0.08) 100%);
    border-top: 2px solid var(--color-nigun-light);
}

/* Recording rows inside active nigun */
.song-item-expanded.active .song-item-recording:not(.active-recording),
.song-item-full.active .song-item-recording:not(.active-recording) {
    background: rgba(255, 255, 255, 0.5);
    border: 1px solid rgba(74, 124, 201, 0.15);
}

.song-item-expanded.active .song-item-recording:not(.active-recording):hover,
.song-item-full.active .song-item-recording:not(.active-recording):hover {
    background: rgba(255, 255, 255, 0.8);
    border-color: var(--color-nigun-light);
}

/* Recording number in active nigun */
.song-item-expanded.active .song-item-rec-num,
.song-item-full.active .song-item-rec-num {
    background: var(--color-nigun-pale);
    color: var(--color-nigun);
}

/* Recording name in active nigun */
.song-item-expanded.active .song-item-rec-name,
.song-item-full.active .song-item-rec-name {
    color: var(--color-nigun-dark);
}

/* Tags in active nigun recordings */
.song-item-expanded.active .song-item-rec-tags .nigun-tag-inline,
.song-item-full.active .song-item-rec-tags .nigun-tag-inline {
    opacity: 0.9;
}

/* Low quality indicator button */
.song-btn-low-quality {
    background: var(--color-nigun-pale) !important;
    color: var(--color-nigun) !important;
    cursor: default !important;
    opacity: 0.7;
}

.song-btn-low-quality:hover {
    background: var(--color-nigun-pale) !important;
    transform: none !important;
    box-shadow: none !important;
}

.low-quality-icon {
    font-size: 18px;
    line-height: 1;
    color: var(--color-nigun);
}

/* Wave Animation for Playing Song */
/* Center-mirrored wave animation (streaming style) */
.song-wave-animation {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 2px;
    height: 20px;
    margin-right: 8px;
}

.wave-bar {
    width: 3px;
    background: white;
    border-radius: 3px;
    animation: waveStream 0.8s ease-in-out infinite;
    transform-origin: center;
}

.wave-bar:nth-child(1) {
    height: 8px;
    animation-delay: 0s;
}

.wave-bar:nth-child(2) {
    height: 14px;
    animation-delay: 0.2s;
}

.wave-bar:nth-child(3) {
    height: 16px;
    animation-delay: 0.1s;
}

.wave-bar:nth-child(4) {
    height: 10px;
    animation-delay: 0.3s;
}

@keyframes waveStream {

    0%,
    100% {
        transform: scaleY(0.3);
    }

    50% {
        transform: scaleY(1);
    }
}

/* Paused state - wave bars stay still */
.song-item.active.paused .wave-bar {
    animation-play-state: paused;
}

/* Expanded song item (recordings mode) */
.song-item-expanded,
.song-item-full {
    flex-direction: column;
    align-items: stretch;
    padding: 0;
    gap: 0;
}

.song-item-expanded .song-item-header,
.song-item-full .song-item-header {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 15px 20px;
}

/* Recordings list inside song item */
.song-item-recordings {
    border-top: 1px solid var(--color-nigun-pale);
    padding: 8px 20px 12px;
    background: rgba(74, 124, 201, 0.03);
}

.song-item-recording {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px 12px;
    margin: 4px 0;
    border-radius: 8px;
    cursor: pointer;
    transition: var(--transition-smooth);
}

.song-item-recording:hover {
    background: var(--color-nigun-pale);
}

.song-item-rec-num {
    width: 24px;
    height: 24px;
    background: var(--color-nigun-pale);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.75em;
    font-weight: 600;
    color: var(--color-nigun-dark);
    flex-shrink: 0;
}

.song-item-rec-name {
    flex: 1;
    font-size: 0.9em;
    color: var(--text-dark);
}

.song-item-rec-info {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.song-item-rec-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
}

.song-item-rec-tags .nigun-tag-inline {
    font-size: 0.7em;
    padding: 2px 6px;
}

/* Album tag color */
.tag-album {
    background: var(--color-album-pale, #e8f5e9) !important;
    color: var(--color-album-dark, #2e7d32) !important;
    border-color: var(--color-album-light, #81c784) !important;
}

/* Gezungen (sung by) tag color */
.tag-gezungen {
    background: #fff8e1 !important;
    color: #f57c00 !important;
    border-color: #ffcc80 !important;
}

/* Rating display for recordings */
.rec-rating-display {
    color: var(--color-nigun);
    font-size: 0.7em;
    letter-spacing: -1px;
    flex-shrink: 0;
    margin-left: 8px;
}

.song-item-rec-play {
    width: 28px;
    height: 28px;
    background: var(--color-nigun);
    border: none;
    border-radius: 50%;
    color: white;
    font-size: 0.75em;
    cursor: pointer;
    transition: var(--transition-smooth);
    flex-shrink: 0;
}

.song-item-rec-play:hover {
    background: var(--color-nigun-dark);
    transform: scale(1.1);
}

/* Low quality recording indicator */
.song-item-rec-low-quality {
    background: var(--color-nigun-pale) !important;
    color: var(--color-nigun) !important;
    cursor: default !important;
    display: flex;
    align-items: center;
    justify-content: center;
}

.song-item-rec-low-quality:hover {
    background: var(--color-nigun-pale) !important;
    transform: none !important;
}

.low-quality-rec {
    opacity: 0.6;
}

.low-quality-rec:hover {
    opacity: 0.8;
}

/* Full mode - additional info section */
.song-full-details {
    border-top: 1px solid var(--color-nigun-pale);
    padding: 12px 20px;
    background: rgba(74, 124, 201, 0.03);
}

.song-full-label {
    font-weight: 600;
    color: var(--color-nigun-dark);
    white-space: nowrap;
}

.song-full-value {
    color: var(--text-dark);
}

.song-full-info .song-full-value {
    font-size: 0.9em;
    line-height: 1.4;
}

.song-full-recordings {
    border-top: 1px solid var(--color-nigun-pale);
    padding: 10px 20px 12px;
    background: rgba(74, 124, 201, 0.05);
}

.song-full-rec-title {
    font-weight: 600;
    font-size: 0.85em;
    color: var(--color-nigun-dark);
    margin-bottom: 8px;
    display: flex;
    align-items: center;
    gap: 6px;
}

.rec-collapse-toggle {
    color: var(--color-nigun);
    cursor: pointer;
    font-size: 1em;
    transition: transform 0.2s ease;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 20px;
    height: 20px;
}

.rec-collapse-toggle:hover {
    color: var(--color-nigun-dark);
    transform: scale(1.2);
}

/* Active state for expanded items */
.song-item-expanded.active .song-item-recordings,
.song-item-full.active .song-full-details,
.song-item-full.active .song-full-recordings {
    background: rgba(255, 255, 255, 0.1);
    border-top-color: rgba(255, 255, 255, 0.2);
}

.song-item-expanded.active .song-item-recording:hover,
.song-item-full.active .song-item-recording:hover {
    background: rgba(255, 255, 255, 0.15);
}

.song-item-expanded.active .song-item-rec-num,
.song-item-full.active .song-item-rec-num {
    background: rgba(255, 255, 255, 0.2);
    color: white;
}

.song-item-expanded.active .song-item-rec-name,
.song-item-full.active .song-item-rec-name,
.song-item-full.active .song-full-label,
.song-item-full.active .song-full-value,
.song-item-full.active .song-full-rec-title {
    color: rgba(255, 255, 255, 0.9);
}

.song-item-expanded.active .song-item-rec-play,
.song-item-full.active .song-item-rec-play {
    background: rgba(255, 255, 255, 0.3);
}

.song-item-expanded.active .song-item-rec-play:hover,
.song-item-full.active .song-item-rec-play:hover {
    background: white;
    color: var(--color-nigun);
}

/* Tags container for full mode */
.song-full-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    flex: 1;
}

.song-full-row {
    display: flex;
    align-items: flex-start;
    gap: 8px;
    padding: 6px 0;
    font-size: 0.85em;
}

/* Tag styles for scale and ritem */
.tag-scale {
    background: var(--color-music-pale, #e3f2fd) !important;
    color: var(--color-music-dark, #1565c0) !important;
    border-color: var(--color-music-light, #90caf9) !important;
}

.tag-ritem {
    background: #f3e5f5 !important;
    color: #7b1fa2 !important;
    border-color: #ce93d8 !important;
}

.tag-siman {
    background: #fff3e0 !important;
    color: #e65100 !important;
    border-color: #ffcc80 !important;
}

/* Date styling */
.song-full-date {
    font-size: 0.9em;
    color: var(--text-muted);
    background: var(--bg-muted, #f5f5f5);
    padding: 4px 10px;
    border-radius: 8px;
}

/* Active state adjustments for tags in full mode */
.song-item-full.active .nigun-tag-inline {
    background: rgba(255, 255, 255, 0.2) !important;
    border-color: rgba(255, 255, 255, 0.3) !important;
    color: white !important;
}

.song-item-full.active .nigun-tag-inline:hover {
    background: rgba(255, 255, 255, 0.35) !important;
}

.song-item-full.active .song-full-date {
    background: rgba(255, 255, 255, 0.15);
    color: rgba(255, 255, 255, 0.9);
}

.songs-card {
    background: white;
    border-radius: 16px;
    padding: 25px;
    box-shadow: var(--card-shadow);
}

.filters-container {
    max-width: 700px;
    margin: 0 auto 20px auto;
    background: var(--color-nigun-pale);
    border-radius: 15px;
    box-shadow: var(--card-shadow);
    padding: 15px;
    border: 1px solid var(--color-nigun-light);
}

.all-songs-grid {
    display: flex;
    flex-direction: column;
    gap: 8px;
    min-height: 300px;
}

.all-songs-controls {
    display: flex;
    gap: 15px;
    margin-bottom: 20px;
    flex-wrap: wrap;
    align-items: center;
}

.sort-btn {
    padding: 8px 16px;
    border: 2px solid var(--primary-pale);
    background: white;
    border-radius: 20px;
    font-size: 0.9em;
    cursor: pointer;
    transition: var(--transition-smooth);
    font-family: inherit;
}

.sort-btn:hover,
.sort-btn.active {
    border-color: var(--primary);
    background: var(--primary-pale);
}

/* Pagination */
.pagination {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
    margin-top: 30px;
    padding-top: 20px;
    border-top: 1px solid var(--color-nigun-light);
}

.page-btn {
    width: 40px;
    height: 40px;
    border: 2px solid var(--color-nigun-light);
    background: white;
    border-radius: 10px;
    font-size: 1em;
    cursor: pointer;
    transition: var(--transition-smooth);
    font-family: inherit;
}

.page-btn:hover:not(:disabled) {
    border-color: var(--color-nigun);
    background: var(--color-nigun-pale);
}

.page-btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
}

.page-info {
    padding: 8px 16px;
    background: var(--color-nigun-pale);
    border-radius: 10px;
    font-weight: 600;
    color: var(--color-nigun-dark);
}

/* Fixed Player */
.player-section {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: white;
    padding: 15px 30px;
    box-shadow: 0 -5px 30px rgba(74, 18, 89, 0.15);
    z-index: 200;
    direction: ltr;
    transform: translateY(100%);
    opacity: 0;
    transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.4s ease;
}

.player-section.player-visible {
    transform: translateY(0);
    opacity: 1;
}

.player-section.player-minimized {
    transform: translateY(100%);
    opacity: 0;
}

.player-hide-btn {
    position: absolute;
    top: -12px;
    left: 30px;
    width: 36px;
    height: 24px;
    background: white;
    border: none;
    border-radius: 12px 12px 0 0;
    box-shadow: 0 -3px 10px rgba(74, 18, 89, 0.15);
    cursor: pointer;
    color: var(--text-muted);
    font-size: 18px;
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: var(--transition-smooth);
}

.player-hide-btn:hover {
    color: var(--primary);
    background: var(--primary-pale);
}

.player-show-btn {
    position: fixed;
    bottom: 20px;
    left: 20px;
    transform: translateY(100px);
    opacity: 0;
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
    color: white;
    border: none;
    border-radius: 30px;
    padding: 12px 24px;
    font-size: 0.95em;
    font-weight: 600;
    cursor: pointer;
    box-shadow: 0 4px 20px rgba(123, 31, 162, 0.4);
    z-index: 199;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.4s ease;
    pointer-events: none;
}

.player-show-btn.visible {
    transform: translateY(0);
    opacity: 1;
    pointer-events: auto;
}

.player-show-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 25px rgba(123, 31, 162, 0.5);
}

.equalizer-icon {
    display: flex;
    align-items: center;
    gap: 2px;
    height: 18px;
    margin-left: 10px;
}

.equalizer-icon .bar {
    width: 3px;
    background: white;
    border-radius: 3px;
    animation: waveStream 0.8s ease-in-out infinite;
    transform-origin: center;
}

.equalizer-icon .bar:nth-child(1) {
    height: 8px;
    animation-delay: 0s;
}

.equalizer-icon .bar:nth-child(2) {
    height: 14px;
    animation-delay: 0.1s;
}

.equalizer-icon .bar:nth-child(3) {
    height: 10px;
    animation-delay: 0.2s;
}

/* Paused state for equalizer */
.equalizer-icon.paused .bar {
    animation-play-state: paused;
}

.player-inner {
    max-width: 1400px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    gap: 20px;
}

.player-info {
    flex: 1;
    text-align: right;
    direction: rtl;
    min-width: 0;
}

.player-song-name {
    font-weight: 700;
    font-size: 1.1em;
    color: var(--primary-deep);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.player-song-meta {
    font-size: 0.85em;
    color: var(--text-muted);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.player-meta-link {
    color: var(--text-muted);
    text-decoration: none;
    transition: var(--transition-smooth);
}

.player-meta-link:hover {
    color: var(--primary);
    text-decoration: underline;
}

#playerCollection .player-meta-link {
    color: var(--primary);
    font-weight: 600;
}

#playerCollection .player-meta-link:hover {
    color: var(--primary-deep);
}

/* Entity-specific player meta links */
.player-meta-link-mechaber {
    color: var(--color-mechaber-dark);
    text-decoration: none;
    transition: var(--transition-smooth);
}

.player-meta-link-mechaber:hover {
    color: var(--color-mechaber);
    text-decoration: underline;
}

.player-meta-link-chatzer {
    color: var(--color-chatzer-dark);
    text-decoration: none;
    transition: var(--transition-smooth);
}

.player-meta-link-chatzer:hover {
    color: var(--color-chatzer);
    text-decoration: underline;
}

.player-meta-link-collection {
    color: var(--color-collection-dark);
    font-weight: 600;
    text-decoration: none;
    transition: var(--transition-smooth);
}

.player-meta-link-collection:hover {
    color: var(--color-collection);
    text-decoration: underline;
}

.player-controls {
    display: flex;
    align-items: center;
    gap: 10px;
    flex-shrink: 0;
}

.player-btn {
    width: 40px;
    height: 40px;
    border: none;
    background: transparent;
    color: var(--text-muted);
    font-size: 1.2em;
    cursor: pointer;
    border-radius: 50%;
    transition: var(--transition-smooth);
    display: flex;
    align-items: center;
    justify-content: center;
}

.player-btn svg {
    display: block;
}

.player-btn:hover {
    color: var(--primary);
    background: var(--primary-pale);
}

.player-btn.main {
    width: 55px;
    height: 55px;
    background: var(--gradient-main);
    color: white;
    font-size: 1.4em;
    box-shadow: 0 4px 15px rgba(74, 124, 201, 0.25), 0 4px 15px rgba(156, 91, 181, 0.2);
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
}

.player-btn.main:hover {
    transform: scale(1.05);
    box-shadow: 0 6px 20px rgba(74, 124, 201, 0.35), 0 6px 20px rgba(156, 91, 181, 0.3);
}

/* Animated play/pause icons in player */
.player-play-icon,
.player-pause-icon {
    position: absolute;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex;
    align-items: center;
    justify-content: center;
}

.player-play-icon svg,
.player-pause-icon svg {
    display: block;
}

.player-play-icon {
    opacity: 1;
    transform: scale(1);
}

.player-pause-icon {
    opacity: 0;
    transform: scale(0.5);
}

.player-btn.main.playing .player-play-icon {
    opacity: 0;
    transform: scale(0.5);
}

.player-btn.main.playing .player-pause-icon {
    opacity: 1;
    transform: scale(1);
}

.player-progress {
    flex: 2;
    display: flex;
    flex-direction: column;
    gap: 5px;
}

.progress-bar-container {
    width: 100%;
    height: 6px;
    background: var(--primary-pale);
    border-radius: 10px;
    cursor: pointer;
    overflow: hidden;
}

.progress-bar-container:hover {
    height: 8px;
}

.progress-bar {
    height: 100%;
    background: linear-gradient(90deg, var(--color-mechaber) 0%, var(--color-chatzer) 50%, var(--color-nigun) 100%);
    border-radius: 10px;
    width: 0%;
    transition: width 0.1s linear;
}

.time-display {
    display: flex;
    justify-content: space-between;
    font-size: 0.75em;
    color: var(--text-muted);
}

.player-extra {
    flex: 1;
    text-align: left;
    direction: rtl;
}

.player-extra-line {
    font-size: 0.75em;
    color: var(--text-muted);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

#playerCollection {
    font-weight: 600;
    color: var(--primary);
}

/* Loading */
.loading {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 60px;
    color: var(--text-muted);
}

.spinner {
    width: 50px;
    height: 50px;
    border: 4px solid var(--primary-pale);
    border-top-color: var(--primary);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-bottom: 15px;
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

/* Modal */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.6);
    z-index: 300;
    align-items: center;
    justify-content: center;
    padding: 20px;
}

.modal.show {
    display: flex;
}

.modal-content {
    background: white;
    border-radius: 20px;
    max-width: 600px;
    width: 100%;
    max-height: 80vh;
    overflow: hidden;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
}

.modal-header {
    background: var(--gradient-main);
    padding: 20px 25px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    color: white;
}

.modal-header h2 {
    font-size: 1.3em;
    font-family: 'Heebo', sans-serif;
    font-weight: 600;
}

.modal-close {
    width: 35px;
    height: 35px;
    border: none;
    background: rgba(255, 255, 255, 0.2);
    color: white;
    border-radius: 50%;
    font-size: 1.3em;
    cursor: pointer;
    transition: var(--transition-smooth);
}

.modal-close:hover {
    background: rgba(255, 255, 255, 0.3);
}

.modal-body {
    padding: 25px;
    overflow-y: auto;
    max-height: calc(80vh - 80px);
}

/* Modal recordings section */
.modal-recordings-section {
    margin-top: 20px;
    padding-top: 20px;
    border-top: 2px solid var(--primary-pale);
}

.modal-recordings-title {
    font-size: 1.1em;
    font-weight: 700;
    color: var(--primary);
    margin-bottom: 15px;
}

.modal-recordings-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.modal-recording-item {
    background: var(--primary-pale);
    border-radius: 12px;
    padding: 12px 15px;
    cursor: pointer;
    transition: var(--transition-smooth);
    display: flex;
    align-items: center;
}

.modal-recording-item:hover {
    background: var(--primary-light);
    transform: translateX(-3px);
}

.modal-recording-item.active {
    background: var(--primary);
}

.modal-recording-item.active .modal-recording-name {
    color: white;
}

.modal-recording-item.active .modal-recording-play-btn {
    background: white;
    color: var(--primary);
}

.modal-recording-header {
    display: flex;
    align-items: center;
    gap: 12px;
    flex: 1;
}

.modal-recording-play-btn {
    width: 36px;
    height: 36px;
    background: var(--primary);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.9em;
    flex-shrink: 0;
    transition: var(--transition-smooth);
}

.modal-recording-item:hover .modal-recording-play-btn {
    transform: scale(1.1);
}

.modal-recording-name {
    font-weight: 600;
    color: var(--text-dark);
    font-size: 0.95em;
}

/* Nigun Modal Overlay - Lightbox style */
.nigun-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.3);
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
    padding: 20px;
    overflow-y: auto;
}

.nigun-modal-overlay.active {
    opacity: 1;
    visibility: visible;
}

.nigun-modal-content {
    background: #f8fafc;
    border-radius: 20px;
    max-width: 850px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    overflow-x: hidden;
    position: relative;
    transform: scale(0.9) translateY(30px);
    transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    box-shadow: 0 25px 80px rgba(0, 0, 0, 0.5);
    border: 3px solid var(--color-nigun);
}

/* Minimal scrollbar for nigun modal - just the thumb, no track */
.nigun-modal-content::-webkit-scrollbar {
    width: 8px;
    margin-right: -10px;
}

.nigun-modal-content::-webkit-scrollbar-track {
    background: transparent;
}

.nigun-modal-content::-webkit-scrollbar-thumb {
    background: var(--color-nigun);
    border-radius: 10px;
}

.nigun-modal-content::-webkit-scrollbar-thumb:hover {
    background: var(--color-nigun-dark);
}

/* Hide scrollbar arrows */
.nigun-modal-content::-webkit-scrollbar-button {
    display: none;
}

/* Firefox scrollbar */
.nigun-modal-content {
    scrollbar-width: thin;
    scrollbar-color: var(--color-nigun) transparent;
}

.nigun-modal-overlay.active .nigun-modal-content {
    transform: scale(1) translateY(0);
}

.nigun-modal-close {
    position: absolute;
    top: 50%;
    right: -60px;
    transform: translateY(-50%);
    width: 45px;
    height: 45px;
    background: white;
    border: 3px solid var(--color-nigun);
    border-radius: 50%;
    font-size: 26px;
    cursor: pointer;
    z-index: 10;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    transition: transform 0.2s ease, background 0.2s ease;
    color: var(--color-nigun);
    font-weight: bold;
}

.nigun-modal-close:hover {
    transform: scale(1.1);
    background: var(--color-nigun-pale);
}

/* Hide back button inside modal since we have our own close */
.nigun-modal-content .back-button {
    display: none;
}

/* Remove page-level padding inside modal */
.nigun-modal-content .detail-page {
    padding-top: 10px;
}

/* Fix overflow in modal - just hide horizontal scroll */
#nigunModalBody {
    overflow-x: hidden;
}

/* Mobile responsiveness for nigun modal */
@media (max-width: 768px) {
    .nigun-modal-overlay {
        padding: 10px;
    }

    .nigun-modal-content {
        max-height: 95vh;
        border-radius: 15px;
        margin-right: 50px;
        /* Make room for close button */
    }

    .nigun-modal-close {
        right: -45px;
        width: 38px;
        height: 38px;
        font-size: 20px;
    }
}

.detail-row {
    display: flex;
    padding: 12px 0;
    border-bottom: 1px solid var(--primary-pale);
}

.detail-row:last-child {
    border-bottom: none;
}

.detail-label {
    width: 120px;
    font-weight: 700;
    color: var(--primary);
    flex-shrink: 0;
}

.detail-value {
    flex: 1;
    color: var(--text-dark);
}

.field-link {
    color: var(--primary);
    text-decoration: none;
    font-weight: 600;
    padding: 2px 8px;
    background: var(--primary-pale);
    border-radius: 12px;
    transition: var(--transition-smooth);
    display: inline-block;
    margin: 2px;
}

.field-link:hover {
    background: var(--primary);
    color: white;
    text-decoration: none;
}

/* Hover Tooltip Popup */
.hover-tooltip {
    position: fixed;
    background: white;
    border-radius: 12px;
    padding: 0;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
    border: none;
    z-index: 10001;
    pointer-events: none;
    opacity: 0;
    transform: translateY(10px);
    transition: opacity 0.2s, transform 0.2s;
    max-width: 280px;
    min-width: 200px;
    direction: rtl;
    overflow: hidden;
}

.hover-tooltip-type {
    font-size: 0.75em;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
    padding: 8px 15px;
    background: var(--primary);
    color: white;
}

/* Category-themed tooltips */
.hover-tooltip.tooltip-chatzer .hover-tooltip-type {
    background: var(--color-chatzer);
}

.hover-tooltip.tooltip-chatzer .hover-tooltip-title {
    color: var(--color-chatzer-dark);
}

.hover-tooltip.tooltip-mechaber .hover-tooltip-type {
    background: var(--color-mechaber-dark);
}

.hover-tooltip.tooltip-mechaber .hover-tooltip-title {
    color: var(--color-mechaber-dark);
}

.hover-tooltip.tooltip-verter .hover-tooltip-type {
    background: var(--color-verter);
}

.hover-tooltip.tooltip-verter .hover-tooltip-title {
    color: var(--text-dark);
    font-weight: 400;
    font-size: 1em;
    line-height: 1.5;
}

.hover-tooltip.tooltip-zman .hover-tooltip-type {
    background: var(--color-zman);
}

.hover-tooltip.tooltip-zman .hover-tooltip-title {
    color: var(--color-zman-dark);
}

.hover-tooltip.tooltip-piyut .hover-tooltip-type {
    background: var(--color-piyut);
}

.hover-tooltip.tooltip-piyut .hover-tooltip-title {
    color: var(--color-piyut-dark);
}

.hover-tooltip.tooltip-collection .hover-tooltip-type {
    background: var(--color-collection);
}

.hover-tooltip.tooltip-collection .hover-tooltip-title {
    color: var(--color-collection-dark);
}

.hover-tooltip.show {
    opacity: 1;
    transform: translateY(0);
}

.hover-tooltip-header {
    display: flex;
    gap: 12px;
    padding: 15px;
    align-items: center;
}

.hover-tooltip-image {
    width: 50px;
    height: 50px;
    border-radius: 8px;
    object-fit: cover;
    flex-shrink: 0;
}

.hover-tooltip-image.round {
    border-radius: 50%;
}

.hover-tooltip-image.large {
    width: 60px;
    height: 60px;
}

.hover-tooltip-title-area {
    flex: 1;
}

.hover-tooltip-title {
    font-size: 1.15em;
    font-weight: 700;
    color: var(--text-dark);
    line-height: 1.3;
}

.hover-tooltip-subtitle {
    font-size: 0.85em;
    color: var(--text-muted);
    margin-top: 4px;
}

.hover-tooltip-stats {
    padding: 10px 15px;
    background: #f8fafc;
    border-top: 1px solid rgba(0, 0, 0, 0.05);
    font-size: 0.9em;
    color: var(--text-muted);
}

.hover-tooltip-hint {
    padding: 8px 15px;
    font-size: 0.75em;
    color: var(--text-muted);
    text-align: center;
    background: rgba(0, 0, 0, 0.03);
}

/* Empty State */
.empty-state {
    text-align: center;
    padding: 60px 20px;
    color: var(--text-muted);
}

.empty-state-icon {
    font-size: 4em;
    margin-bottom: 15px;
    opacity: 0.5;
}

/* Skeleton Loader - RTL shimmer direction */
@keyframes skeleton-shimmer {
    0% {
        background-position: -200% 0;
    }

    100% {
        background-position: 200% 0;
    }
}

.skeleton {
    background: linear-gradient(90deg,
            rgba(200, 200, 200, 0.2) 25%,
            rgba(200, 200, 200, 0.4) 50%,
            rgba(200, 200, 200, 0.2) 75%);
    background-size: 200% 100%;
    animation: skeleton-shimmer 1.5s ease-in-out infinite;
    border-radius: 8px;
}

.skeleton-page {
    padding: 20px;
    min-height: calc(100vh - 200px);
}

.skeleton-title-bar {
    height: 50px;
    border-radius: 10px;
    margin-bottom: 10px;
    background: linear-gradient(90deg,
            rgba(180, 150, 180, 0.3) 25%,
            rgba(180, 150, 180, 0.5) 50%,
            rgba(180, 150, 180, 0.3) 75%);
    background-size: 200% 100%;
    animation: skeleton-shimmer 1.5s ease-in-out infinite;
}

.skeleton-subtitle {
    height: 24px;
    width: 200px;
    margin: 0 auto 30px;
}

.skeleton-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 20px;
    padding: 20px 0;
}

.skeleton-card {
    height: 120px;
    border-radius: 16px;
    background: rgba(255, 255, 255, 0.6);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.03);
    position: relative;
    overflow: hidden;
}

.skeleton-card::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(270deg,
            transparent 0%,
            rgba(255, 255, 255, 0.3) 50%,
            transparent 100%);
    background-size: 200% 100%;
    animation: skeleton-shimmer 2.5s ease-in-out infinite;
}

/* Theme-specific skeleton colors */
.skeleton-songs-layout {
    display: flex;
    gap: 20px;
}

.skeleton-songs-main {
    flex: 1;
}

.skeleton-songs-sidebar {
    width: 280px;
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.skeleton-search-box {
    height: 45px;
    border-radius: 25px;
}

.skeleton-filter {
    height: 40px;
    border-radius: 8px;
}

.skeleton-song-row {
    height: 60px;
    margin-bottom: 10px;
    border-radius: 12px;
    background: rgba(255, 255, 255, 0.6);
    position: relative;
    overflow: hidden;
}

.skeleton-song-row::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(270deg,
            transparent 0%,
            rgba(255, 255, 255, 0.3) 50%,
            transparent 100%);
    background-size: 200% 100%;
    animation: skeleton-shimmer 2.5s ease-in-out infinite;
}

@media (max-width: 768px) {
    .skeleton-songs-layout {
        flex-direction: column;
    }

    .skeleton-songs-sidebar {
        width: 100%;
        order: -1;
    }

    .skeleton-grid {
        grid-template-columns: 1fr;
    }
}

.loading-songs-message {
    text-align: center;
    padding: 60px 20px;
    color: var(--text-muted);
}

.loading-songs-message .loading-spinner {
    width: 50px;
    height: 50px;
    border: 4px solid var(--primary-pale);
    border-top-color: var(--primary);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin: 0 auto 20px;
}

/* Responsive */
@media (max-width: 768px) {
    .header-top {
        flex-direction: column;
        gap: 15px;
    }

    .global-search {
        max-width: 100%;
        margin: 0;
        order: 2;
    }

    .main-nav {
        order: 3;
    }

    .category-grid {
        grid-template-columns: 1fr;
    }

    .player-inner {
        flex-wrap: wrap;
    }

    .player-info {
        order: 1;
        width: 100%;
        text-align: center;
        margin-bottom: 10px;
    }

    .player-controls {
        order: 2;
    }

    .player-progress {
        order: 3;
        flex: 1;
    }

    .player-extra {
        display: none;
    }
}

/* Filters section for all songs page */
.filters-container {
    background: var(--bg-light);
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 20px;
}

/* Songs page sidebar layout */
.songs-page-layout {
    display: flex;
    flex-direction: row-reverse;
    gap: 25px;
    align-items: flex-start;
    position: relative;
}

.songs-main-content {
    flex: 1;
    min-width: 0;
}

.sidebar-wrapper {
    width: 280px;
    flex-shrink: 0;
}

.songs-sidebar {
    width: 280px;
    background: white;
    border-radius: 15px;
    padding: 20px;
    box-shadow: var(--card-shadow);
    position: sticky;
    top: 90px;
    min-height: calc(100vh - 100px);
    max-height: calc(100vh - 100px);
    overflow-y: auto;
    overflow-x: hidden;
    scrollbar-width: thin;
    scrollbar-color: rgba(74, 124, 201, 0.3) transparent;
}

.songs-sidebar::-webkit-scrollbar {
    width: 4px;
}

.songs-sidebar::-webkit-scrollbar-track {
    background: transparent;
}

.songs-sidebar::-webkit-scrollbar-thumb {
    background: rgba(74, 124, 201, 0.3);
    border-radius: 4px;
}

.songs-sidebar::-webkit-scrollbar-thumb:hover {
    background: rgba(74, 124, 201, 0.5);
}

.sidebar-search-box {
    display: flex;
    position: relative;
    margin-bottom: 10px;
}

.sidebar-search-input {
    flex: 1;
    padding: 8px 12px;
    padding-left: 35px;
    border: 2px solid var(--color-nigun-pale);
    border-radius: 8px;
    font-size: 0.9em;
    font-family: inherit;
    direction: rtl;
    transition: var(--transition-smooth);
}

.sidebar-search-input:focus {
    outline: none;
    border-color: var(--color-nigun);
}

.sidebar-search-btn {
    position: absolute;
    left: 8px;
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    font-size: 1.1em;
    cursor: pointer;
    opacity: 0.6;
    transition: var(--transition-smooth);
}

.sidebar-search-btn:hover {
    opacity: 1;
}

.sidebar-search-clear {
    position: absolute;
    left: 35px;
    top: 50%;
    transform: translateY(-50%);
    background: #999;
    color: white;
    border: none;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    font-size: 14px;
    line-height: 1;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
}

.sidebar-search-clear:hover {
    background: #666;
}

.sidebar-audio-toggle {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 15px;
    background: var(--color-nigun-pale);
    border-radius: 10px;
    margin-bottom: 20px;
    cursor: pointer;
    font-weight: 500;
    transition: var(--transition-smooth);
}

.sidebar-audio-toggle:hover {
    background: var(--color-nigun-light);
}

.sidebar-audio-toggle input[type="checkbox"] {
    width: 20px;
    height: 20px;
    accent-color: var(--color-nigun);
    cursor: pointer;
}

/* Sort toggle slider styles */
.sidebar-sort-section {
    margin-bottom: 10px;
}

.sidebar-sort-label {
    font-size: 0.8em;
    font-weight: 600;
    color: var(--text-dark);
    margin-bottom: 4px;
    display: block;
}

.sort-toggle-container {
    display: flex;
    background: var(--color-nigun-pale);
    border-radius: 10px;
    padding: 4px;
    position: relative;
}

.sort-toggle-option {
    flex: 1;
    padding: 6px 6px;
    text-align: center;
    font-size: 0.8em;
    font-weight: 500;
    color: var(--text-dark);
    cursor: pointer;
    border-radius: 6px;
    transition: var(--transition-smooth);
    z-index: 1;
    position: relative;
    white-space: nowrap;
}

.sort-toggle-option:hover {
    color: var(--color-nigun-dark);
}

.sort-toggle-option.active {
    color: white;
    font-weight: 600;
}

.sort-toggle-slider {
    position: absolute;
    top: 4px;
    bottom: 4px;
    background: var(--color-nigun);
    border-radius: 8px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    /* Will be positioned dynamically via JavaScript */
}

/* Quality Stars Filter */
.quality-stars-filter {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    padding: 4px;
    background: var(--color-nigun-pale);
    border-radius: 10px;
    direction: ltr;
    /* Stars fill left to right */
}

.quality-star {
    font-size: 1.3em;
    color: #ccc;
    cursor: pointer;
    transition: all 0.2s ease;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    padding: 4px 3px;
}

.quality-star.active {
    color: var(--color-nigun);
}

/* Reset all stars on hover, let JavaScript handle the fill */
.quality-stars-filter:hover .quality-star {
    color: #ccc;
}

.quality-stars-filter .quality-star:hover {
    transform: scale(1.15);
}

/* Use JavaScript for proper hover fill since CSS sibling selectors don't work backwards */
.quality-stars-filter.hovering .quality-star.hover-active {
    color: var(--color-nigun);
}

.quality-clear {
    font-size: 1.4em;
    color: #999;
    cursor: pointer;
    margin-left: 8px;
    transition: all 0.2s ease;
    line-height: 1;
}

.quality-clear:hover {
    color: var(--color-nigun-dark);
    transform: scale(1.1);
}

.quality-clear.hidden {
    display: none;
}

/* Quality Star Tooltips */
.quality-star[data-tooltip],
.quality-clear[data-tooltip] {
    position: relative;
}

.quality-star[data-tooltip]::after,
.quality-clear[data-tooltip]::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: calc(100% + 8px);
    left: 50%;
    transform: translateX(-50%);
    background: var(--color-nigun);
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    white-space: nowrap;
    opacity: 0;
    visibility: hidden;
    transition: all 0.2s ease;
    z-index: 1000;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
    pointer-events: none;
    font-weight: 400;
}

.quality-star[data-tooltip]::before,
.quality-clear[data-tooltip]::before {
    content: '';
    position: absolute;
    bottom: calc(100% + 2px);
    left: 50%;
    transform: translateX(-50%);
    border: 6px solid transparent;
    border-top-color: var(--color-nigun);
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    z-index: 1001;
}

.quality-star[data-tooltip]:hover::after,
.quality-star[data-tooltip]:hover::before,
.quality-clear[data-tooltip]:hover::after,
.quality-clear[data-tooltip]:hover::before {
    opacity: 1;
    visibility: visible;
}

/* Sort toggle slider styles */
.sidebar-sort-section {
    margin-bottom: 20px;
}

.sidebar-sort-label {
    font-size: 0.9em;
    font-weight: 600;
    color: var(--text-dark);
    margin-bottom: 8px;
    display: block;
}

.sort-toggle-container {
    display: flex;
    background: var(--color-nigun-pale);
    border-radius: 10px;
    padding: 4px;
    position: relative;
}

.sort-toggle-option {
    flex: 1;
    padding: 10px 8px;
    text-align: center;
    font-size: 0.85em;
    font-weight: 500;
    color: var(--text-dark);
    cursor: pointer;
    border-radius: 8px;
    transition: var(--transition-smooth);
    z-index: 1;
    position: relative;
    white-space: nowrap;
}

.sort-toggle-option:hover {
    color: var(--color-nigun-dark);
}

.sort-toggle-option.active {
    color: white;
    font-weight: 600;
}

.sort-toggle-slider {
    position: absolute;
    top: 4px;
    bottom: 4px;
    background: var(--color-nigun);
    border-radius: 8px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    /* Will be positioned dynamically via JavaScript */
}

/* Quality Stars Filter */
.quality-stars-filter {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    padding: 4px;
    background: var(--color-nigun-pale);
    border-radius: 10px;
    direction: ltr;
    /* Stars fill left to right */
}

.quality-star {
    font-size: 1.6em;
    color: #ccc;
    cursor: pointer;
    transition: all 0.2s ease;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    padding: 6px 4px;
}

.quality-star.active {
    color: var(--color-nigun);
}

/* Reset all stars on hover, let JavaScript handle the fill */
.quality-stars-filter:hover .quality-star {
    color: #ccc;
}

.quality-stars-filter .quality-star:hover {
    transform: scale(1.15);
}

/* Use JavaScript for proper hover fill since CSS sibling selectors don't work backwards */
.quality-stars-filter.hovering .quality-star.hover-active {
    color: var(--color-nigun);
}

.quality-clear {
    font-size: 1.4em;
    color: #999;
    cursor: pointer;
    margin-left: 8px;
    transition: all 0.2s ease;
    line-height: 1;
}

.quality-clear:hover {
    color: var(--color-nigun-dark);
    transform: scale(1.1);
}

.quality-clear.hidden {
    display: none;
}

/* Quality Star Tooltips */
.quality-star[data-tooltip],
.quality-clear[data-tooltip] {
    position: relative;
}

.quality-star[data-tooltip]::after,
.quality-clear[data-tooltip]::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: calc(100% + 8px);
    left: 50%;
    transform: translateX(-50%);
    background: var(--color-nigun);
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    white-space: nowrap;
    opacity: 0;
    visibility: hidden;
    transition: all 0.2s ease;
    z-index: 1000;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
    pointer-events: none;
    font-weight: 400;
}

.quality-star[data-tooltip]::before,
.quality-clear[data-tooltip]::before {
    content: '';
    position: absolute;
    bottom: calc(100% + 2px);
    left: 50%;
    transform: translateX(-50%);
    border: 6px solid transparent;
    border-top-color: var(--color-nigun);
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    z-index: 1001;
}

.quality-star[data-tooltip]:hover::after,
.quality-star[data-tooltip]:hover::before,
.quality-clear[data-tooltip]:hover::after,
.quality-clear[data-tooltip]:hover::before {
    opacity: 1;
    visibility: visible;
}

.sidebar-section {
    margin-bottom: 6px;
}

.sidebar-section-title {
    font-size: 0.8em;
    font-weight: 600;
    color: var(--text-dark);
    margin-bottom: 4px;
    display: block;
}

.sidebar-collection-btn {
    width: 100%;
    padding: 12px 15px;
    background: white;
    border: 2px solid var(--color-nigun);
    border-radius: 10px;
    font-family: inherit;
    font-size: 0.95em;
    cursor: pointer;
    transition: var(--transition-smooth);
    color: var(--color-nigun);
}

.sidebar-collection-btn:hover,
.sidebar-collection-btn.active {
    background: var(--color-nigun);
    color: white;
}

.sidebar-filter {
    margin-bottom: 6px;
}

.sidebar-filter-dropdown {
    position: relative;
}

.sidebar-filter-btn {
    width: 100%;
    padding: 8px 12px;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.9) 100%);
    border: 1px solid rgba(74, 124, 201, 0.15);
    border-radius: 8px;
    font-family: inherit;
    font-size: 0.85em;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 6px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    padding-right: 14px;
    box-shadow: 0 2px 6px rgba(74, 124, 201, 0.06);
    overflow: hidden;
}

.sidebar-filter-btn::before {
    content: '';
    position: absolute;
    right: 0;
    top: 0;
    bottom: 0;
    width: 4px;
    border-radius: 0 12px 12px 0;
    transition: width 0.3s ease;
}

.sidebar-filter-btn::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, transparent 0%, rgba(74, 124, 201, 0.05) 100%);
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
}

.sidebar-filter-btn:hover::after {
    opacity: 1;
}

.sidebar-filter-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 16px rgba(74, 124, 201, 0.15);
    border-color: rgba(74, 124, 201, 0.25);
}

.sidebar-filter-btn:hover::before {
    width: 6px;
}

/* Filter colors as right border */
.sidebar-filter[data-filter="collection"] .sidebar-filter-btn::before {
    background: linear-gradient(180deg, var(--color-collection) 0%, var(--color-collection-dark) 100%);
}

.sidebar-filter[data-filter="chatzer"] .sidebar-filter-btn::before {
    background: linear-gradient(180deg, var(--color-chatzer) 0%, var(--color-chatzer-dark) 100%);
}

.sidebar-filter[data-filter="mechaber"] .sidebar-filter-btn::before {
    background: linear-gradient(180deg, var(--color-mechaber) 0%, var(--color-mechaber-dark) 100%);
}

.sidebar-filter[data-filter="verter"] .sidebar-filter-btn::before {
    background: linear-gradient(180deg, var(--color-verter) 0%, var(--color-verter-dark) 100%);
}

.sidebar-filter[data-filter="gezungen"] .sidebar-filter-btn::before {
    background: linear-gradient(180deg, #2e8b2e 0%, #1e6b1e 100%);
}

/* גרין - פיוטים */
.sidebar-filter[data-filter="ritem"] .sidebar-filter-btn::before {
    background: linear-gradient(180deg, var(--color-music) 0%, var(--color-music-dark) 100%);
}

.sidebar-filter[data-filter="scale"] .sidebar-filter-btn::before {
    background: linear-gradient(180deg, var(--color-nigun) 0%, var(--color-nigun-dark) 100%);
}

.sidebar-filter-btn .sidebar-filter-label {
    font-size: 0.9em;
    font-weight: 600;
    color: var(--color-nigun-dark);
}

.sidebar-filter-btn .sidebar-filter-value {
    flex: 1;
    text-align: left;
    color: var(--text-muted);
    font-size: 0.85em;
}

.sidebar-filter-btn .dropdown-arrow {
    color: var(--color-nigun);
    font-size: 0.7em;
    transition: transform 0.3s ease;
}

.sidebar-filter-btn.active .dropdown-arrow {
    transform: rotate(180deg);
}

.sidebar-filter-btn.active {
    border-color: var(--color-nigun);
    background: linear-gradient(135deg, var(--color-nigun-pale) 0%, rgba(227, 242, 253, 0.8) 100%);
    box-shadow: 0 4px 16px rgba(74, 124, 201, 0.2);
}

.sidebar-dropdown-content {
    display: none;
    position: absolute;
    top: calc(100% + 4px);
    right: 0;
    left: 0;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(248, 250, 252, 0.95) 100%);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(74, 124, 201, 0.2);
    border-radius: 12px;
    max-height: 280px;
    overflow-y: auto;
    z-index: 50;
    box-shadow: 0 10px 40px rgba(74, 124, 201, 0.2);
    animation: dropdownSlide 0.25s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes dropdownSlide {
    from {
        opacity: 0;
        transform: translateY(-8px) scale(0.98);
    }

    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

.sidebar-dropdown-content.show {
    display: block;
}

.dropdown-search-box {
    padding: 10px;
    border-bottom: 1px solid rgba(74, 124, 201, 0.1);
    position: sticky;
    top: 0;
    background: linear-gradient(180deg, white 0%, rgba(255, 255, 255, 0.95) 100%);
    backdrop-filter: blur(8px);
    z-index: 1;
}

.dropdown-search-input {
    width: 100%;
    padding: 10px 14px;
    border: 1px solid rgba(74, 124, 201, 0.2);
    border-radius: 8px;
    font-size: 0.85em;
    font-family: inherit;
    direction: rtl;
    background: rgba(248, 250, 252, 0.8);
    transition: all 0.2s ease;
}

.dropdown-search-input:focus {
    outline: none;
    border-color: var(--color-nigun);
    background: white;
    box-shadow: 0 0 0 3px rgba(74, 124, 201, 0.1);
}

.dropdown-options {
    max-height: 220px;
    overflow-y: auto;
    padding: 4px;
}

.sidebar-filter-option {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 12px;
    cursor: pointer;
    transition: all 0.2s ease;
    font-size: 0.88em;
    border-radius: 8px;
    margin: 2px 0;
}

.sidebar-filter-option:hover {
    background: linear-gradient(135deg, var(--color-nigun-pale) 0%, rgba(227, 242, 253, 0.6) 100%);
    transform: translateX(-2px);
}

.sidebar-filter-option input {
    accent-color: var(--color-nigun);
    width: 16px;
    height: 16px;
    cursor: pointer;
    flex-shrink: 0;
}

.sidebar-filter-option input:checked+* {
    color: var(--color-nigun-dark);
    font-weight: 500;
}

/* Mobile responsive */
@media (max-width: 900px) {
    .songs-page-layout {
        flex-direction: column;
    }

    .songs-sidebar {
        width: 100%;
        position: static;
        max-height: none;
        margin-bottom: 20px;
    }
}

.search-row {
    display: flex;
    gap: 10px;
    align-items: center;
    margin-bottom: 15px;
}

.songs-search-box {
    display: flex;
    flex: 1;
    position: relative;
}

.songs-search-input {
    flex: 1;
    padding: 10px 15px;
    padding-left: 40px;
    border: 2px solid #ddd;
    border-left: none;
    border-radius: 0 8px 8px 0;
    font-size: 0.95em;
    font-family: inherit;
    direction: rtl;
    transition: var(--transition-smooth);
}

.songs-search-input:focus {
    outline: none;
    border-color: var(--color-nigun);
}

.search-clear-btn {
    position: absolute;
    left: 70px;
    top: 50%;
    transform: translateY(-50%);
    background: #999;
    color: white;
    border: none;
    width: 22px;
    height: 22px;
    border-radius: 50%;
    font-size: 16px;
    line-height: 1;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: var(--transition-smooth);
}

.search-clear-btn:hover {
    background: #666;
}

.songs-search-btn {
    padding: 10px 20px;
    background: var(--color-nigun);
    color: white;
    border: 2px solid var(--color-nigun);
    border-radius: 8px 0 0 8px;
    font-family: inherit;
    font-size: 0.95em;
    cursor: pointer;
    transition: var(--transition-smooth);
    white-space: nowrap;
}

.songs-search-btn:hover {
    background: var(--color-nigun-dark);
    border-color: var(--color-nigun-dark);
}

.clear-filters-btn {
    padding: 10px 15px;
    border: 2px solid #e74c3c;
    background: white;
    color: #e74c3c;
    border-radius: 8px;
    font-size: 0.9em;
    cursor: pointer;
    transition: var(--transition-smooth);
    font-family: inherit;
    white-space: nowrap;
}

.clear-filters-btn:hover {
    background: #e74c3c;
    color: white;
}

.filters-row {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    align-items: center;
}

.filter-dropdown {
    position: relative;
}

.filter-btn {
    padding: 10px 15px;
    border: 2px solid var(--color-nigun-light);
    background: white;
    border-radius: 10px;
    font-size: 0.9em;
    cursor: pointer;
    transition: var(--transition-smooth);
    font-family: inherit;
    display: flex;
    align-items: center;
    gap: 8px;
}

.filter-btn:hover,
.filter-btn.active {
    border-color: var(--color-nigun);
    background: var(--color-nigun-pale);
}

.filter-dropdown-content {
    display: none;
    position: absolute;
    top: 100%;
    right: 0;
    background: white;
    border: 2px solid var(--color-nigun);
    border-radius: 10px;
    margin-top: 5px;
    min-width: 200px;
    max-height: 300px;
    overflow-y: auto;
    z-index: 50;
    box-shadow: var(--card-hover-shadow);
}

.filter-dropdown-content.show {
    display: block;
}

.filter-option {
    padding: 10px 15px;
    cursor: pointer;
    transition: var(--transition-smooth);
    display: flex;
    align-items: center;
    gap: 10px;
}

.filter-option:hover {
    background: var(--primary-pale);
}

.filter-option input {
    width: 18px;
    height: 18px;
}

.active-filters {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    margin-top: 12px;
    padding-top: 12px;
    border-top: 1px solid var(--primary-pale);
}

.active-filters:empty {
    display: none;
}

.filter-tag {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
    color: white;
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 0.85em;
    display: flex;
    align-items: center;
    gap: 8px;
}

.filter-tag-close {
    cursor: pointer;
    font-weight: bold;
    opacity: 0.8;
}

.filter-tag-close:hover {
    opacity: 1;
}

/* Stats cards on home */
.stats-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
    margin-bottom: 30px;
}

.stat-card {
    background: white;
    padding: 20px;
    border-radius: 12px;
    text-align: center;
    box-shadow: var(--card-shadow);
}

.stat-number {
    font-size: 2em;
    font-weight: 600;
    color: var(--primary);
    font-family: 'Heebo', sans-serif;
}

.stat-label {
    font-size: 0.9em;
    color: var(--text-muted);
    margin-top: 5px;
}

/* Home About Us Section - Full Width */
.home-about-section {
    margin-top: 60px;
}

.home-about-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: var(--gradient-main);
    padding: 20px 30px;
    border-radius: 18px 18px 0 0;
    cursor: pointer;
    transition: var(--transition-smooth);
    text-decoration: none;
    color: inherit;
}

.home-about-header:hover {
    filter: brightness(1.05);
}

.home-about-title {
    font-size: 1.25em;
    font-weight: 600;
    color: white;
}

.home-about-arrow {
    color: white;
    font-size: 1.3em;
    transition: var(--transition-smooth);
}

.home-about-header:hover .home-about-arrow {
    transform: translateX(-5px);
}

.home-about-links {
    background: white;
    border-radius: 0 0 18px 18px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
    overflow: hidden;
    display: grid;
    grid-template-columns: repeat(4, 1fr);
}

.home-about-link {
    padding: 18px 15px;
    cursor: pointer;
    transition: var(--transition-smooth);
    border-left: 1px solid var(--color-chatzer-pale);
    color: var(--text);
    font-size: 0.95em;
    text-align: center;
    text-decoration: none;
}

.home-about-link:first-child {
    border-left: none;
}

.home-about-link:hover {
    background: var(--gradient-main-pale);
}

/* Terms Link */
.home-terms-link {
    text-align: center;
    margin-top: 35px;
    margin-bottom: 20px;
    color: var(--text-muted);
    font-size: 0.9em;
    cursor: pointer;
    transition: var(--transition-smooth);
    text-decoration: none;
    display: block;
}

.home-terms-link:hover {
    color: var(--color-chatzer);
    text-decoration: underline;
}

/* Info Pages Layout */
.info-page {
    max-width: 1000px;
    margin: 0 auto;
    padding: 30px 20px;
}

.info-page-header {
    text-align: center;
    margin-bottom: 40px;
}

.info-page-title {
    font-size: 2.2em;
    background: var(--gradient-main);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 10px;
    font-weight: 600;
}

.info-page-subtitle {
    color: var(--text-muted);
    font-size: 1.1em;
}

.info-page-content {
    background: white;
    border-radius: 16px;
    padding: 40px;
    box-shadow: var(--card-shadow);
    line-height: 1.8;
    margin-bottom: 25px;
}

.info-page-content p {
    margin-bottom: 20px;
}

.info-page-content ul {
    margin: 20px 0;
    padding-right: 25px;
}

.info-page-content li {
    margin-bottom: 10px;
}

/* Info Pages Sub-Navigation */
.info-nav {
    display: flex;
    justify-content: center;
    gap: 16px;
    flex-wrap: wrap;
    margin-bottom: 30px;
    padding: 18px 25px;
    background: var(--gradient-main-pale);
    border-radius: 16px;
    border: 1px solid var(--color-chatzer-pale);
}

.info-nav-item {
    padding: 12px 30px;
    border-radius: 25px;
    cursor: pointer;
    font-size: 0.95em;
    transition: var(--transition-smooth);
    background: white;
    color: var(--text);
    border: 1px solid var(--color-chatzer-pale);
    text-decoration: none;
}

.info-nav-item:hover {
    background: var(--gradient-main);
    color: white;
    border-color: var(--color-chatzer);
    transform: translateY(-2px);
}

.info-nav-item.active {
    background: var(--gradient-main);
    color: white;
    border-color: var(--color-chatzer);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
}

.info-nav-item.info-nav-featured {
    background: white;
    border: 2px solid;
    border-image: var(--gradient-main) 1;
    border-radius: 10px;
    font-weight: 700;
    box-shadow: 0 4px 15px rgba(139, 92, 246, 0.15);
    position: relative;
    margin: 0 8px;
}

.info-nav-item.info-nav-featured {
    background: var(--gradient-main);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.info-nav-item.info-nav-featured:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(139, 92, 246, 0.25);
}

.info-nav-item.info-nav-featured.active {
    background: var(--gradient-main);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    box-shadow: 0 6px 20px rgba(139, 92, 246, 0.3);
}

.info-nav-divider {
    width: 1px;
    background: var(--color-chatzer-light);
    margin: 0 5px;
}

/* Stats Page Grid */
.stats-page-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-top: 30px;
}

.stats-page-card {
    background: var(--gradient-main-pale);
    padding: 30px;
    border-radius: 16px;
    text-align: center;
    cursor: pointer;
    transition: var(--transition-smooth);
    border: 1px solid var(--color-chatzer-pale);
    text-decoration: none;
    color: inherit;
}

.stats-page-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    background: var(--gradient-main-soft);
}

.stats-page-number {
    font-size: 2.5em;
    font-weight: 700;
    background: var(--gradient-main);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    font-family: 'Heebo', sans-serif;
}

.stats-page-label {
    font-size: 1.1em;
    color: var(--text);
    margin-top: 8px;
}

/* Instructions Page */
.instructions-page-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 25px;
    margin-top: 30px;
}

.instruction-page-item {
    background: var(--gradient-main-pale);
    padding: 25px;
    border-radius: 16px;
    border: 1px solid var(--color-chatzer-pale);
    display: flex;
    gap: 20px;
    align-items: flex-start;
}

.instruction-page-number {
    width: 45px;
    height: 45px;
    background: var(--gradient-main);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.3em;
    font-weight: 700;
    flex-shrink: 0;
}

.instruction-page-text {
    flex: 1;
}

.instruction-page-text strong {
    display: block;
    font-size: 1.15em;
    background: var(--gradient-main);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 8px;
}

/* Credits Page */
.credits-page-list {
    display: grid;
    gap: 20px;
    margin-top: 30px;
}

.credit-page-item {
    background: var(--gradient-main-pale);
    padding: 25px;
    border-radius: 16px;
    border: 1px solid var(--color-chatzer-pale);
}

.credit-page-item strong {
    background: var(--gradient-main);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    font-size: 1.1em;
}

/* Thanks Page */
.thanks-page-list {
    list-style: none;
    padding: 0;
    margin: 25px 0;
}

.thanks-page-list li {
    padding: 15px 20px;
    background: var(--gradient-main-pale);
    border-radius: 12px;
    margin-bottom: 12px;
    border-right: 4px solid;
    border-image: var(--gradient-main-vertical) 1;
}

.blessing-text {
    background: linear-gradient(135deg, var(--gold-light) 0%, var(--gold-pale) 100%);
    padding: 25px;
    border-radius: 16px;
    text-align: center;
    font-size: 1.15em;
    color: var(--gold);
    margin-top: 30px;
    border: 1px solid var(--gold-light);
}

/* Terms Page */
.terms-page-content {
    max-width: 800px;
    margin: 0 auto;
    text-align: left;
    direction: ltr;
}

.terms-last-updated {
    color: var(--text-muted);
    font-size: 0.95em;
    margin-bottom: 30px;
}

.terms-intro {
    font-size: 1.05em;
    line-height: 1.8;
    margin-bottom: 40px;
}

.terms-section {
    margin-bottom: 45px;
}

.terms-section-header {
    font-size: 1.4em;
    font-weight: 600;
    color: var(--primary-deep);
    margin-bottom: 8px;
    padding-bottom: 12px;
    border-bottom: 2px solid var(--primary-light);
}

.terms-section p {
    line-height: 1.9;
    margin-bottom: 15px;
    color: var(--text-dark);
}

.terms-section ul {
    list-style: disc;
    padding-right: 0;
    padding-left: 25px;
    margin: 15px 0;
}

.terms-section li {
    line-height: 1.8;
    margin-bottom: 10px;
    color: var(--text-dark);
}

.terms-section ol {
    padding-right: 0;
    padding-left: 25px;
    margin: 15px 0;
}

.terms-section ol li {
    margin-bottom: 8px;
}

.terms-divider {
    border: none;
    border-top: 1px solid #e0e0e0;
    margin: 35px 0;
}

.terms-email {
    color: var(--primary);
    font-weight: 500;
}

@media (max-width: 768px) {
    .info-nav {
        gap: 6px;
        padding: 12px;
    }

    .info-nav-item {
        padding: 8px 14px;
        font-size: 0.85em;
    }

    .info-nav-divider {
        display: none;
    }

    .info-page-content {
        padding: 25px;
    }

    .info-page-title {
        font-size: 1.8em;
    }
}

/* Goals Page - Brick Layout Design */
.goals-intro {
    text-align: center;
    margin-bottom: 35px;
    font-size: 1.15em;
    color: var(--text);
}

.goals-bricks {
    margin-bottom: 40px;
}

.goals-brick-row {
    display: flex;
    gap: 16px;
    margin-bottom: 16px;
}

.goal-brick {
    flex: 1;
    position: relative;
    background: var(--gradient-main-pale);
    border-radius: 14px;
    padding: 22px 25px;
    transition: var(--transition-smooth);
    border: 1px solid var(--color-chatzer-pale);
    overflow: hidden;
}

.goal-brick::before {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    width: 5px;
    height: 100%;
    background: var(--gradient-main);
    border-radius: 0 14px 14px 0;
}

.goal-brick:hover {
    transform: translateY(-4px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    background: var(--gradient-main-soft);
}

.goal-brick-text {
    font-size: 1em;
    line-height: 1.7;
    text-align: center;
    color: var(--text-dark);
}

/* Warning Box */
.goals-warning {
    background: white;
    border: 2px solid var(--color-chatzer-light);
    border-radius: 16px;
    padding: 25px 30px;
    margin-bottom: 35px;
    text-align: center;
}

.goals-warning-title {
    font-size: 1.3em;
    font-weight: 700;
    background: var(--gradient-main);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 12px;
}

.goals-warning-text {
    font-size: 1.05em;
    color: var(--text-dark);
    line-height: 1.6;
}

/* Contact Box */
.goals-contact {
    background: var(--gradient-main-pale);
    border-radius: 16px;
    padding: 30px;
    text-align: center;
    border: 1px solid var(--color-chatzer-pale);
}

.goals-contact-title {
    font-size: 1.25em;
    font-weight: 600;
    background: var(--gradient-main);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 12px;
}

.goals-contact-text {
    color: var(--text-muted);
    margin-bottom: 15px;
}

.goals-contact-email {
    display: inline-block;
    padding: 12px 28px;
    background: var(--gradient-main);
    color: white;
    border-radius: 30px;
    font-size: 1.05em;
    text-decoration: none;
    transition: var(--transition-smooth);
    direction: ltr;
}

.goals-contact-email:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
}

/* Contribute Page Styles */
.contribute-page {
    background: var(--bg-color);
}

.contribute-hero {
    background: var(--gradient-main);
    padding: 60px 40px;
    border-radius: 20px;
    margin-bottom: 40px;
    text-align: center;
    position: relative;
    overflow: hidden;
}

.contribute-hero::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    opacity: 0.3;
}

.contribute-hero-content {
    position: relative;
    z-index: 1;
}

.contribute-hero-title {
    color: white;
    font-size: 2.5em;
    font-weight: 700;
    margin-bottom: 15px;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
}

.contribute-hero-subtitle {
    color: rgba(255, 255, 255, 0.9);
    font-size: 1.2em;
    max-width: 600px;
    margin: 0 auto;
}

.contribute-content {
    padding: 30px 20px 20px 20px;
}

.contribute-intro {
    text-align: center;
    font-size: 1.1em;
    color: var(--text-dark);
    margin-bottom: 40px;
    max-width: 700px;
    margin-left: auto;
    margin-right: auto;
}

.contribute-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 25px;
    margin-bottom: 50px;
}

.contribute-card {
    background: white;
    border-radius: 16px;
    padding: 30px;
    text-align: center;
    box-shadow: 0 4px 20px rgba(74, 124, 201, 0.1);
    border: 1px solid rgba(74, 124, 201, 0.1);
    transition: all 0.3s ease;
}

.contribute-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 12px 40px rgba(74, 124, 201, 0.2);
    border-color: var(--color-nigun);
}

.contribute-card-icon {
    font-size: 3em;
    margin-bottom: 15px;
}

.contribute-card-title {
    color: var(--color-nigun-dark);
    font-size: 1.3em;
    font-weight: 600;
    margin-bottom: 10px;
}

.contribute-card-text {
    color: var(--text-muted);
    font-size: 0.95em;
    margin-bottom: 20px;
    line-height: 1.6;
}

.contribute-card-btn {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    background: linear-gradient(135deg, var(--color-nigun) 0%, var(--color-nigun-dark) 100%);
    color: white;
    padding: 12px 24px;
    border-radius: 10px;
    text-decoration: none;
    font-weight: 500;
    font-size: 0.95em;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(74, 124, 201, 0.3);
}

.contribute-card-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(74, 124, 201, 0.4);
}

.contribute-card-btn .btn-arrow {
    transition: transform 0.3s ease;
}

.contribute-card-btn:hover .btn-arrow {
    transform: translateX(-5px);
}

.contribute-contact {
    text-align: center;
    background: linear-gradient(135deg, rgba(74, 124, 201, 0.05) 0%, rgba(74, 124, 201, 0.1) 100%);
    padding: 40px;
    border-radius: 16px;
    border: 1px solid rgba(74, 124, 201, 0.15);
}

.contribute-contact-title {
    color: var(--text-dark);
    font-size: 1.2em;
    margin-bottom: 15px;
}

.contribute-email {
    display: inline-block;
    background: linear-gradient(135deg, var(--color-nigun) 0%, var(--color-nigun-dark) 100%);
    color: white;
    padding: 15px 30px;
    border-radius: 12px;
    font-size: 1.1em;
    text-decoration: none;
    direction: ltr;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(74, 124, 201, 0.3);
}

.contribute-email:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(74, 124, 201, 0.4);
}

/* Main Nigun Button - Largest */
.contribute-main-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 15px;
    padding: 25px 40px;
    border-radius: 16px;
    text-decoration: none;
    font-size: 1.4em;
    font-weight: 600;
    color: white;
    margin-bottom: 30px;
    transition: all 0.3s ease;
}

.contribute-main-btn .btn-external {
    transition: transform 0.3s ease;
    font-size: 1.2em;
}

.contribute-main-btn:hover .btn-external {
    transform: translate(3px, -3px);
}

/* External arrow for all buttons */
.btn-external {
    transition: transform 0.3s ease;
    opacity: 0.9;
}

.contribute-btn:hover .btn-external {
    transform: translate(3px, -3px);
    opacity: 1;
}

/* Category Buttons Grid */
.contribute-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 15px;
    margin-bottom: 40px;
}

.contribute-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    padding: 16px 20px;
    border-radius: 12px;
    text-decoration: none;
    font-weight: 500;
    color: white;
    transition: all 0.3s ease;
    text-align: center;
}

.contribute-btn-icon {
    font-size: 1.3em;
}

.contribute-btn-text {
    text-align: center;
}

.contribute-btn .btn-arrow {
    transition: transform 0.3s ease;
    opacity: 0.8;
}

.contribute-btn:hover .btn-arrow {
    transform: translateX(-5px);
    opacity: 1;
}

.contribute-btn:hover {
    transform: translateY(-3px);
}

/* Extra Section */
.contribute-extra-section {
    margin-bottom: 40px;
}

.contribute-section-title {
    color: var(--text-dark);
    font-size: 1.2em;
    font-weight: 600;
    margin-bottom: 20px;
    text-align: center;
}

.contribute-extra-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
}

/* Terms Link */
.contribute-terms {
    text-align: center;
    margin-top: 30px;
    padding-top: 20px;
}

.contribute-terms-link {
    color: var(--text-muted);
    text-decoration: none;
    font-size: 0.9em;
    transition: color 0.3s ease;
}

.contribute-terms-link:hover {
    color: var(--color-nigun);
}

@media (max-width: 768px) {
    .contribute-hero {
        padding: 40px 20px;
    }

    .contribute-hero-title {
        font-size: 1.8em;
    }

    .contribute-hero-subtitle {
        font-size: 1em;
    }

    .contribute-cards {
        grid-template-columns: 1fr;
    }

    .contribute-card {
        padding: 25px;
    }
}

@media (max-width: 768px) {
    .goals-brick-row {
        flex-direction: column;
    }

    .goal-brick {
        padding: 18px 20px;
    }

    .goals-warning,
    .goals-contact {
        padding: 20px;
    }
}
